<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.11" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="alternate" hreflang="en-us" href="https://blog.chcbz.net/en/article/2018121710.html"><meta property="og:url" content="https://blog.chcbz.net/article/2018121710.html"><meta property="og:site_name" content="布衣云水客"><meta property="og:title" content="三小时攻克 Kubernetes！"><meta property="og:description" content="​ 前言 我保证本文是最详尽的 Kubernetes 技术文档，从我在后台排版了这么漫长的时间就能看出来。废话不多说——牢牢占据容器技术统治地位的 Kubernetes，其重要性想必不言而喻。 Kubernetes 以下为译文： 为什么银行肯花大价钱雇我做 Kubernetes 如此简单的工作？——我一直很奇怪这一点，因为我觉得任何人都可以在 3 个小时内学会这项技术。 如果你怀疑我说的，就来挑战一下吧！**读完本文，你绝对可以学会如何在 Kubernetes 集群上运行基于微服务的应用程序。**我保证你可以做到，因为我就是这样向我的客户介绍 Kubernetes 的。"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.chcbz.net/"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="og:updated_time" content="2023-04-09T09:10:03.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="三小时攻克 Kubernetes！"><meta property="article:author" content="Mr.Chen"><meta property="article:tag" content="Java"><meta property="article:tag" content="Kubernetes"><meta property="article:published_time" content="2018-12-17T10:12:05.000Z"><meta property="article:modified_time" content="2023-04-09T09:10:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"三小时攻克 Kubernetes！","image":["https://blog.chcbz.net/"],"datePublished":"2018-12-17T10:12:05.000Z","dateModified":"2023-04-09T09:10:03.000Z","author":[{"@type":"Person","name":"Mr.Chen","url":"https://blog.chcbz.net"}]}</script><title>三小时攻克 Kubernetes！ | 布衣云水客</title><meta name="description" content="​ 前言 我保证本文是最详尽的 Kubernetes 技术文档，从我在后台排版了这么漫长的时间就能看出来。废话不多说——牢牢占据容器技术统治地位的 Kubernetes，其重要性想必不言而喻。 Kubernetes 以下为译文： 为什么银行肯花大价钱雇我做 Kubernetes 如此简单的工作？——我一直很奇怪这一点，因为我觉得任何人都可以在 3 个小时内学会这项技术。 如果你怀疑我说的，就来挑战一下吧！**读完本文，你绝对可以学会如何在 Kubernetes 集群上运行基于微服务的应用程序。**我保证你可以做到，因为我就是这样向我的客户介绍 Kubernetes 的。">
    <link rel="preload" href="/assets/style-9Mn05JWz.css" as="style"><link rel="stylesheet" href="/assets/style-9Mn05JWz.css">
    <link rel="modulepreload" href="/assets/app-5ZyUDSyM.js"><link rel="modulepreload" href="/assets/2018121710.html-sRsR_ymu.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/assets/2018121710.html-eJHZm8La.js">
    <link rel="prefetch" href="/assets/index.html-lbc7fGuB.js" as="script"><link rel="prefetch" href="/assets/slides.html-okUiZ-zB.js" as="script"><link rel="prefetch" href="/assets/102533089.html-cjmbnXdB.js" as="script"><link rel="prefetch" href="/assets/102695355.html-KnFjCLCF.js" as="script"><link rel="prefetch" href="/assets/103254628.html-B7qCcamr.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-nTVCPxMD.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-4DYuiLWD.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-m2hKBD2-.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-_i7EIqfQ.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-f0Yxpogp.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-lsK0z0dc.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-B6r6FUOd.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-fF6zs6dI.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-u8iG-X5D.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-005FEyf_.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-HkoOcynt.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-cwSYNXPt.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-Zq9Ue_jM.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-lCGPKy9G.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-e998V6_H.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-xtbsHBwo.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-iFHn9chN.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-0Ik9IROs.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-PLfNXcRY.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-QXRCZdo5.js" as="script"><link rel="prefetch" href="/assets/2023101600.html-DlOTnCaY.js" as="script"><link rel="prefetch" href="/assets/5466524.html-goDfbrun.js" as="script"><link rel="prefetch" href="/assets/5487455.html-Zdq7T3EM.js" as="script"><link rel="prefetch" href="/assets/5491957.html-GM5jNUFf.js" as="script"><link rel="prefetch" href="/assets/5542697.html-WF5qhAtS.js" as="script"><link rel="prefetch" href="/assets/6032924.html-2-SqStFK.js" as="script"><link rel="prefetch" href="/assets/6046168.html-UAgyELVe.js" as="script"><link rel="prefetch" href="/assets/index.html-BxQvivuG.js" as="script"><link rel="prefetch" href="/assets/slides.html-c7heAMho.js" as="script"><link rel="prefetch" href="/assets/index.html-SqfJI5Fn.js" as="script"><link rel="prefetch" href="/assets/disable.html-DoAYDT2w.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-CVU-4eLd.js" as="script"><link rel="prefetch" href="/assets/markdown.html--2yjPdGA.js" as="script"><link rel="prefetch" href="/assets/page.html-lY8QkTyQ.js" as="script"><link rel="prefetch" href="/assets/index.html-6g2wHVi1.js" as="script"><link rel="prefetch" href="/assets/index.html-QuXAjd9b.js" as="script"><link rel="prefetch" href="/assets/202404252334.html-0fz7nJMZ.js" as="script"><link rel="prefetch" href="/assets/102533089.html-Ka1sRsC7.js" as="script"><link rel="prefetch" href="/assets/102695355.html-fNztDKaf.js" as="script"><link rel="prefetch" href="/assets/103254628.html-MPexnJ8L.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-U0VIsFy7.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-Xx9b4n50.js" as="script"><link rel="prefetch" href="/assets/2018121710.html-UuI1jEvn.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-l8goxP4L.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-cVIN2USn.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-rQ58oEOi.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-H66W-h35.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-WE-xvpm6.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-t-s8Htli.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-1jnHROWC.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-CPUezikX.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-bA8KjgU6.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-PXcSv6-j.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-hYxoT2zv.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-hHcguKn8.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-ZGZWZzu6.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-ZkSdAozL.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-dpEw6Uga.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-SuCYzMhe.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-dph0Vwy8.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-HY8_xVeT.js" as="script"><link rel="prefetch" href="/assets/5466524.html-xkSOnHsU.js" as="script"><link rel="prefetch" href="/assets/5487455.html-mIgbS_ub.js" as="script"><link rel="prefetch" href="/assets/5491957.html-ZlsPIM-U.js" as="script"><link rel="prefetch" href="/assets/5542697.html-sTtN35zk.js" as="script"><link rel="prefetch" href="/assets/6032924.html-djq9NgdR.js" as="script"><link rel="prefetch" href="/assets/6046168.html-WLm5cnNn.js" as="script"><link rel="prefetch" href="/assets/index.html-Kxt8PPH7.js" as="script"><link rel="prefetch" href="/assets/index.html-dmxozKfb.js" as="script"><link rel="prefetch" href="/assets/index.html-C_7jqWIS.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-Zwp3_YBF.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-1oLhd3aV.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-p3Y0oOqN.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-n3b7dptQ.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-hKDnt64r.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-B9ul7Pvo.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-O5sRDQMG.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-Sk6AIYUE.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-h6MQDi9w.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-InhqtGMi.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-5uulFBvS.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-rqnInyfh.js" as="script"><link rel="prefetch" href="/assets/index.html-Dpo-8VD4.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-1HgN0TRl.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-QIcyEpC6.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-TGpUY7rn.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-PVuYqIKL.js" as="script"><link rel="prefetch" href="/assets/index.html-pofDR3Fw.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-Ewh5IL-x.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-SAYC91Jk.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-UIGH1fxE.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-cgvD1PF5.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-p4MDYTwN.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-iYYPsHvd.js" as="script"><link rel="prefetch" href="/assets/index.html-ph0A8Qfl.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-XPmYdKUO.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-FYIiFqcv.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-i-dCpm8d.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-bfbZGbL5.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-D9leOTfh.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-7Sz4Cc-X.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-BhPKwVVT.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-SjTTcRpo.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-NVGvK8LL.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-p4pY70sc.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-3MORbAlO.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html-qSaIKIHk.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-FG8sGokO.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-Sgsl-Ei2.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-jI3Np270.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-VSTWEamV.js" as="script"><link rel="prefetch" href="/assets/index.html-JW0sgYfF.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-BselYZ2_.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-25QbUEro.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-Rqxhhd7H.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-uTBj3bsV.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-nrxp7X_2.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-GFzVjiJU.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-G4gFMxCt.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-MzPBinbM.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-Ak24C8n9.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-CwxdhBj0.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-USi6gxZT.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-YCYivsdk.js" as="script"><link rel="prefetch" href="/assets/index.html-JNhEypM6.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-V6BrPUDV.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-NshRTVpG.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-MxF7heyZ.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-2EqW2wI5.js" as="script"><link rel="prefetch" href="/assets/index.html-qHEU4fyX.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-BJsSHyFl.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-nmG2_yk0.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-IYT2jNwY.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-8OkjLutG.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-kTHl6C6n.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-qMobi4sr.js" as="script"><link rel="prefetch" href="/assets/index.html-yRxVLYCB.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-RdUmNcU2.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-8bkvuAF3.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-C_ldgGGG.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-XzhXhm5V.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-4AmegLrE.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-FoT5YJcL.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-TmaB1rJc.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-BQTxzDwP.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-i-iNQWAS.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-b2y1AZf8.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-8Lnf9TO2.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html-5-AF1K20.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-UhetpJhC.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-cMa-YJJY.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-W1VBGeCX.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-6jl6-HgG.js" as="script"><link rel="prefetch" href="/assets/404.html-xOuGuK5E.js" as="script"><link rel="prefetch" href="/assets/index.html-ibww4veZ.js" as="script"><link rel="prefetch" href="/assets/index.html-ca9-YtNo.js" as="script"><link rel="prefetch" href="/assets/index.html-82wMCphs.js" as="script"><link rel="prefetch" href="/assets/index.html-3LyBxmHk.js" as="script"><link rel="prefetch" href="/assets/index.html-wOYaWU97.js" as="script"><link rel="prefetch" href="/assets/index.html-ibww4veZ.js" as="script"><link rel="prefetch" href="/assets/index.html-tO0VkZ0T.js" as="script"><link rel="prefetch" href="/assets/index.html-4AZFrQ7v.js" as="script"><link rel="prefetch" href="/assets/index.html-08UcJxvf.js" as="script"><link rel="prefetch" href="/assets/index.html-wTpZBs6l.js" as="script"><link rel="prefetch" href="/assets/index.html-82wMCphs.js" as="script"><link rel="prefetch" href="/assets/index.html-tsvBuaJe.js" as="script"><link rel="prefetch" href="/assets/index.html-BUWPfffV.js" as="script"><link rel="prefetch" href="/assets/index.html-xJrJfBe6.js" as="script"><link rel="prefetch" href="/assets/index.html-G4COlT5e.js" as="script"><link rel="prefetch" href="/assets/index.html-o68hD0La.js" as="script"><link rel="prefetch" href="/assets/index.html-9O_6zotR.js" as="script"><link rel="prefetch" href="/assets/index.html-m-_cpzdU.js" as="script"><link rel="prefetch" href="/assets/index.html-7L_go_Er.js" as="script"><link rel="prefetch" href="/assets/index.html-mRj61E1Y.js" as="script"><link rel="prefetch" href="/assets/index.html-dZ6a4TOa.js" as="script"><link rel="prefetch" href="/assets/index.html-Oms-m2oU.js" as="script"><link rel="prefetch" href="/assets/index.html-4j9-jQoc.js" as="script"><link rel="prefetch" href="/assets/index.html-FWhRtBwE.js" as="script"><link rel="prefetch" href="/assets/index.html-gyWZ_yxp.js" as="script"><link rel="prefetch" href="/assets/index.html-Wd3NytVX.js" as="script"><link rel="prefetch" href="/assets/index.html-qTpgm02e.js" as="script"><link rel="prefetch" href="/assets/index.html-5dn56mj2.js" as="script"><link rel="prefetch" href="/assets/index.html-QuQFmg3v.js" as="script"><link rel="prefetch" href="/assets/index.html-YV47FpjC.js" as="script"><link rel="prefetch" href="/assets/index.html-g2UV0xoZ.js" as="script"><link rel="prefetch" href="/assets/index.html-5kEEz3l_.js" as="script"><link rel="prefetch" href="/assets/index.html-0_U2D2qO.js" as="script"><link rel="prefetch" href="/assets/index.html-rBtMyTlr.js" as="script"><link rel="prefetch" href="/assets/index.html-OR0gYaBm.js" as="script"><link rel="prefetch" href="/assets/index.html-4SiXHz2l.js" as="script"><link rel="prefetch" href="/assets/index.html-26rTPcP0.js" as="script"><link rel="prefetch" href="/assets/index.html-jVfdCYiQ.js" as="script"><link rel="prefetch" href="/assets/index.html-1PK73ibj.js" as="script"><link rel="prefetch" href="/assets/index.html-jLIndP4B.js" as="script"><link rel="prefetch" href="/assets/index.html-xgi-vCaH.js" as="script"><link rel="prefetch" href="/assets/index.html-E4oHeplv.js" as="script"><link rel="prefetch" href="/assets/index.html-FzKM0q2s.js" as="script"><link rel="prefetch" href="/assets/index.html-PRAMHLKu.js" as="script"><link rel="prefetch" href="/assets/index.html-otWReHFr.js" as="script"><link rel="prefetch" href="/assets/index.html-nulExq4-.js" as="script"><link rel="prefetch" href="/assets/index.html-kfxuGuGT.js" as="script"><link rel="prefetch" href="/assets/index.html-HRmfyTzV.js" as="script"><link rel="prefetch" href="/assets/index.html--48Ez_Qi.js" as="script"><link rel="prefetch" href="/assets/index.html-Q1nmZqhE.js" as="script"><link rel="prefetch" href="/assets/index.html-2OGzqHVf.js" as="script"><link rel="prefetch" href="/assets/index.html-qGTEvuaj.js" as="script"><link rel="prefetch" href="/assets/index.html-VYTVJRFa.js" as="script"><link rel="prefetch" href="/assets/index.html-1JhBpabb.js" as="script"><link rel="prefetch" href="/assets/index.html-RIanURhk.js" as="script"><link rel="prefetch" href="/assets/index.html-Nv3IWbr8.js" as="script"><link rel="prefetch" href="/assets/index.html-A-qPtfOy.js" as="script"><link rel="prefetch" href="/assets/index.html-lxBBGGWk.js" as="script"><link rel="prefetch" href="/assets/index.html-veZkX2N8.js" as="script"><link rel="prefetch" href="/assets/index.html-7sixlFzu.js" as="script"><link rel="prefetch" href="/assets/index.html-Pkq9BCbt.js" as="script"><link rel="prefetch" href="/assets/index.html-2U0__Nh3.js" as="script"><link rel="prefetch" href="/assets/index.html-0egDcDtZ.js" as="script"><link rel="prefetch" href="/assets/index.html-6B8VHTrg.js" as="script"><link rel="prefetch" href="/assets/index.html-2CxETNd5.js" as="script"><link rel="prefetch" href="/assets/index.html-yfQL_zjO.js" as="script"><link rel="prefetch" href="/assets/index.html--yRDJMtQ.js" as="script"><link rel="prefetch" href="/assets/index.html-t93PsUdU.js" as="script"><link rel="prefetch" href="/assets/index.html-pwdmYhAu.js" as="script"><link rel="prefetch" href="/assets/index.html-H1l2AAoF.js" as="script"><link rel="prefetch" href="/assets/index.html-yZ81lBt6.js" as="script"><link rel="prefetch" href="/assets/index.html-IK8LXdpI.js" as="script"><link rel="prefetch" href="/assets/index.html-haidobA4.js" as="script"><link rel="prefetch" href="/assets/index.html-AMQHHJyO.js" as="script"><link rel="prefetch" href="/assets/index.html-mlfmrgYN.js" as="script"><link rel="prefetch" href="/assets/index.html-dbTCK4DZ.js" as="script"><link rel="prefetch" href="/assets/slides.html-J3mkKp6K.js" as="script"><link rel="prefetch" href="/assets/102533089.html-s6ZdcLCo.js" as="script"><link rel="prefetch" href="/assets/102695355.html-yoG8kqk8.js" as="script"><link rel="prefetch" href="/assets/103254628.html-6iIwZ76n.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-o5EE-TT_.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-jMlBm0J5.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-qzcAHPi8.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-g9RcZgHK.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-jYnq50_2.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-nNLLdzji.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-ygS2xua-.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-RyjCwxSu.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-EX5NPZjv.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-QbVYfOdy.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-PwxL4LOM.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-6Iw2CVWl.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-k42noWGf.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-yxiX3L6g.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-3oOiul5q.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-ZkyobVpG.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-j05jhbN-.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-uB36nTdr.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-4j41lBS5.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-tb35Ft_l.js" as="script"><link rel="prefetch" href="/assets/2023101600.html-ZqcFM4jp.js" as="script"><link rel="prefetch" href="/assets/5466524.html-QNKXpBZa.js" as="script"><link rel="prefetch" href="/assets/5487455.html-Gg6fCYgZ.js" as="script"><link rel="prefetch" href="/assets/5491957.html-gIKYKW9Z.js" as="script"><link rel="prefetch" href="/assets/5542697.html-8DUyD9GD.js" as="script"><link rel="prefetch" href="/assets/6032924.html-7rMHBni6.js" as="script"><link rel="prefetch" href="/assets/6046168.html-vaKWyL-y.js" as="script"><link rel="prefetch" href="/assets/index.html-rMMLYOcW.js" as="script"><link rel="prefetch" href="/assets/slides.html-gnxAjqwC.js" as="script"><link rel="prefetch" href="/assets/index.html-l9kNAMxN.js" as="script"><link rel="prefetch" href="/assets/disable.html-bQrhevoH.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-8w8w7Od0.js" as="script"><link rel="prefetch" href="/assets/markdown.html-aeov_Wne.js" as="script"><link rel="prefetch" href="/assets/page.html-MnKGOn6-.js" as="script"><link rel="prefetch" href="/assets/index.html-eXxWEzUs.js" as="script"><link rel="prefetch" href="/assets/index.html--FlTFKNU.js" as="script"><link rel="prefetch" href="/assets/202404252334.html-bkYMAcmK.js" as="script"><link rel="prefetch" href="/assets/102533089.html-Ijz9avDd.js" as="script"><link rel="prefetch" href="/assets/102695355.html-BtHPHd6H.js" as="script"><link rel="prefetch" href="/assets/103254628.html-uYcB00Wl.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-Xc-ZNlFY.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-dld2CPky.js" as="script"><link rel="prefetch" href="/assets/2018121710.html-TtfK8GmM.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-soA2cSvN.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-2gZIX8pD.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-nzuoEfny.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-9u4ye-I9.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-nhie_X8z.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-GkapCMIt.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-MXR1Qfhc.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-Y8k7Ol5d.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-GLihvdHu.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-dVtwzfvf.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-qOw6vOz_.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-JSHdre4q.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-gqaNc1oe.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-WsJoNZtH.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-pnHp6zTI.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-SShfvLMT.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-E_1TZRVB.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-3IDcCRqA.js" as="script"><link rel="prefetch" href="/assets/5466524.html-ArHIqMWR.js" as="script"><link rel="prefetch" href="/assets/5487455.html-zfvQlyNL.js" as="script"><link rel="prefetch" href="/assets/5491957.html-SR_hHEGt.js" as="script"><link rel="prefetch" href="/assets/5542697.html-FVKmCtrp.js" as="script"><link rel="prefetch" href="/assets/6032924.html-_hLfPtJU.js" as="script"><link rel="prefetch" href="/assets/6046168.html-v2pxyfiI.js" as="script"><link rel="prefetch" href="/assets/index.html-OfnRvO1B.js" as="script"><link rel="prefetch" href="/assets/index.html-l9e7hzY_.js" as="script"><link rel="prefetch" href="/assets/index.html-OXneLtHE.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-yc3salJm.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-MwCe7QzP.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-SrFu2kjj.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-K1VO1e14.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-tk0AFT9Z.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-3SssSRuk.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-BkSpnwlD.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-VBA0YRLE.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-ZMG_NSwn.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-oDWYJ6mN.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-PX_ULxOx.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-oeYDjOV5.js" as="script"><link rel="prefetch" href="/assets/index.html-sdktrw8a.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-E8L2VS_3.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-7wjHunoI.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-Hiejd_fC.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-hpfWHxhk.js" as="script"><link rel="prefetch" href="/assets/index.html-9MVibQIT.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-_LuwHjKq.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-6qTJOnG9.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-QL7oTkuH.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-BdXZVPWg.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-UnqQ5eEV.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-2_pHJQNt.js" as="script"><link rel="prefetch" href="/assets/index.html-BdPLgMwn.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-VzqXBuVQ.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-yxY9mrF3.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-7JViUBXy.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-JD9LrLHl.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-yU8mNvLq.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-kirURqPe.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-GSP2Cdzn.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-_4Ro8K6g.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-vKkatxcC.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-8t1bttpc.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-EH37CQtr.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html--EfJ61Il.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-VUE76o-V.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-BlNzY1tS.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-KAsUDrU-.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-tdLIkQ1I.js" as="script"><link rel="prefetch" href="/assets/index.html-LXYWDEUd.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-bX-1K3Wg.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-fdqjvzLv.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-VVMYJ-kW.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-jzDpw-Du.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-wPqHXfm9.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-vgLHLYjb.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-I74XLFPT.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-XiLLuAAm.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-xNhWiYM5.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-apPDX1hP.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-enYvMSpT.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-dAkQnrHR.js" as="script"><link rel="prefetch" href="/assets/index.html-UKNdcxtq.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-VqnU8IWD.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-dCH3P-nw.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-wbqQG9sY.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-oWQ-6bt6.js" as="script"><link rel="prefetch" href="/assets/index.html-_cCNKsg9.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-2CtYOBhF.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-NApJPdIZ.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-n5CE0VaT.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-EmKCw3kt.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-X0QLcqcM.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-MCVH0tFd.js" as="script"><link rel="prefetch" href="/assets/index.html-DLTBVrmo.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-7hP0SOBb.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-OSjJLKT3.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-2-J08yu_.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-uakiiVC1.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-QASzYXXR.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-dqOGAP6b.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-JS34uZcD.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-h2OAQ3vp.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-y0vwyv_F.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-k6TyFvX0.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-tQudhSyl.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html-mq8iKi9s.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-MZX7_iO6.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-G807oEXe.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-30xFFFHa.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-g0wsdl2z.js" as="script"><link rel="prefetch" href="/assets/404.html-5HiG5_qk.js" as="script"><link rel="prefetch" href="/assets/index.html-0fCskzDr.js" as="script"><link rel="prefetch" href="/assets/index.html-kGy0dpvS.js" as="script"><link rel="prefetch" href="/assets/index.html-I7sDk935.js" as="script"><link rel="prefetch" href="/assets/index.html-XHVsMUrp.js" as="script"><link rel="prefetch" href="/assets/index.html-xmT_CCAP.js" as="script"><link rel="prefetch" href="/assets/index.html-0fCskzDr.js" as="script"><link rel="prefetch" href="/assets/index.html-OlBiSeCY.js" as="script"><link rel="prefetch" href="/assets/index.html-lSeu6F_C.js" as="script"><link rel="prefetch" href="/assets/index.html-4GNNLEsm.js" as="script"><link rel="prefetch" href="/assets/index.html-TQ0MKVTS.js" as="script"><link rel="prefetch" href="/assets/index.html-I7sDk935.js" as="script"><link rel="prefetch" href="/assets/index.html--QGWQAy5.js" as="script"><link rel="prefetch" href="/assets/index.html-6wMrenD3.js" as="script"><link rel="prefetch" href="/assets/index.html-NeByVx3K.js" as="script"><link rel="prefetch" href="/assets/index.html-R9NKf2SL.js" as="script"><link rel="prefetch" href="/assets/index.html-jYkuqTfe.js" as="script"><link rel="prefetch" href="/assets/index.html-dFwpS-t7.js" as="script"><link rel="prefetch" href="/assets/index.html-6S_z8jiM.js" as="script"><link rel="prefetch" href="/assets/index.html--h48Inu_.js" as="script"><link rel="prefetch" href="/assets/index.html-bmAN9KBe.js" as="script"><link rel="prefetch" href="/assets/index.html-y7CosQPl.js" as="script"><link rel="prefetch" href="/assets/index.html-0CoXYzGF.js" as="script"><link rel="prefetch" href="/assets/index.html-gPmEaxDl.js" as="script"><link rel="prefetch" href="/assets/index.html-nZW_eguA.js" as="script"><link rel="prefetch" href="/assets/index.html-7O2HYgnY.js" as="script"><link rel="prefetch" href="/assets/index.html-qNF9on_l.js" as="script"><link rel="prefetch" href="/assets/index.html-BQZaZhVu.js" as="script"><link rel="prefetch" href="/assets/index.html-drakyYZY.js" as="script"><link rel="prefetch" href="/assets/index.html-OHTk5us3.js" as="script"><link rel="prefetch" href="/assets/index.html-VaBOWQ2S.js" as="script"><link rel="prefetch" href="/assets/index.html-idoYlEkM.js" as="script"><link rel="prefetch" href="/assets/index.html-UU9FCgEx.js" as="script"><link rel="prefetch" href="/assets/index.html-BLO0tGxk.js" as="script"><link rel="prefetch" href="/assets/index.html-qT49xuno.js" as="script"><link rel="prefetch" href="/assets/index.html-SLYBDt9r.js" as="script"><link rel="prefetch" href="/assets/index.html-ZbWpcSSY.js" as="script"><link rel="prefetch" href="/assets/index.html-aN9QBuMa.js" as="script"><link rel="prefetch" href="/assets/index.html-5fX4-HHi.js" as="script"><link rel="prefetch" href="/assets/index.html-b7NC3DTm.js" as="script"><link rel="prefetch" href="/assets/index.html-PHaK8NMb.js" as="script"><link rel="prefetch" href="/assets/index.html-Vatbh4qv.js" as="script"><link rel="prefetch" href="/assets/index.html-aHK_y0G3.js" as="script"><link rel="prefetch" href="/assets/index.html--BlEic-2.js" as="script"><link rel="prefetch" href="/assets/index.html-t_SMODgu.js" as="script"><link rel="prefetch" href="/assets/index.html-l9i8fzgd.js" as="script"><link rel="prefetch" href="/assets/index.html-7soScVZy.js" as="script"><link rel="prefetch" href="/assets/index.html-6vBkzqxF.js" as="script"><link rel="prefetch" href="/assets/index.html-v3LTQQIK.js" as="script"><link rel="prefetch" href="/assets/index.html-buLSE6Ts.js" as="script"><link rel="prefetch" href="/assets/index.html-mzy4uT44.js" as="script"><link rel="prefetch" href="/assets/index.html-IkOR9J0O.js" as="script"><link rel="prefetch" href="/assets/index.html-12IROKUq.js" as="script"><link rel="prefetch" href="/assets/index.html-zl1WqX2f.js" as="script"><link rel="prefetch" href="/assets/index.html-iMJRPIt2.js" as="script"><link rel="prefetch" href="/assets/index.html-uUSkrrU6.js" as="script"><link rel="prefetch" href="/assets/index.html-t7ThS6Js.js" as="script"><link rel="prefetch" href="/assets/index.html-nJnm0gU9.js" as="script"><link rel="prefetch" href="/assets/index.html-gb50PU3d.js" as="script"><link rel="prefetch" href="/assets/index.html-0MCg5xg6.js" as="script"><link rel="prefetch" href="/assets/index.html-ibmi2LmD.js" as="script"><link rel="prefetch" href="/assets/index.html-1un7U6_Q.js" as="script"><link rel="prefetch" href="/assets/index.html-GLHIpbMz.js" as="script"><link rel="prefetch" href="/assets/index.html-OsXlOlt1.js" as="script"><link rel="prefetch" href="/assets/index.html-uPGZsS5E.js" as="script"><link rel="prefetch" href="/assets/index.html-YTpF8cZO.js" as="script"><link rel="prefetch" href="/assets/index.html-5SF17J0s.js" as="script"><link rel="prefetch" href="/assets/index.html-kDmDYPwh.js" as="script"><link rel="prefetch" href="/assets/index.html-KBAyWs8E.js" as="script"><link rel="prefetch" href="/assets/index.html-_H5JLUd8.js" as="script"><link rel="prefetch" href="/assets/index.html-R8nzvar-.js" as="script"><link rel="prefetch" href="/assets/index.html-TYkI_EMF.js" as="script"><link rel="prefetch" href="/assets/index.html-NWLvmYVu.js" as="script"><link rel="prefetch" href="/assets/index.html-mv1fdAWG.js" as="script"><link rel="prefetch" href="/assets/index.html-BMdt8Uz8.js" as="script"><link rel="prefetch" href="/assets/index.html-Z3GNlmTX.js" as="script"><link rel="prefetch" href="/assets/giscus-NkhROb6B.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-08_zHRDQ.js" as="script"><link rel="prefetch" href="/assets/style-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/docsearch-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/index-QOy62Fup.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">布衣云水客</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="主页" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="文章" class="vp-link nav-link active nav-link active" href="/article/"><span class="font-icon icon iconfont icon-discover" style=""></span>文章<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="视频" class="vp-link nav-link nav-link" href="/video/"><span class="font-icon icon iconfont icon-actions" style=""></span>视频<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="手册" class="vp-link nav-link nav-link" href="/handbook/"><span class="font-icon icon iconfont icon-repo" style=""></span>手册<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button type="button" class="dropdown-title" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="简体中文" class="vp-link nav-link active nav-link active" href="/article/2018121710.html"><!---->简体中文<!----></a></li><li class="dropdown-item"><a aria-label="English" class="vp-link nav-link nav-link" href="/en/article/2018121710.html"><!---->English<!----></a></li></ul></button></div></div><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/chcbz/chcbz.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="主页" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon iconfont icon-actions" style=""></span><span class="vp-sidebar-title">视频</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-object" style=""></span><span class="vp-sidebar-title">1.线性代数的本质</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-valine" style=""></span><span class="vp-sidebar-title">2.微积分的本质</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-relation" style=""></span><span class="vp-sidebar-title">3.深度学习</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-function" style=""></span><span class="vp-sidebar-title">4.微分方程</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><!--[--><a aria-label="幻灯片页" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/slides.html"><span class="font-icon icon iconfont icon-slides" style=""></span>幻灯片页<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-creative" style=""></span>三小时攻克 Kubernetes！</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://blog.chcbz.net" target="_blank" rel="noopener noreferrer">Mr.Chen</a></span><span property="author" content="Mr.Chen"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2018-12-17T10:12:05.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 40 分钟</span><meta property="timeRequired" content="PT40M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category2 clickable" role="navigation">文章</span><!--]--><meta property="articleSection" content="文章"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag4 clickable" role="navigation">Java</span><span class="page-tag-item tag3 clickable" role="navigation">Kubernetes</span><!--]--><meta property="keywords" content="Java,Kubernetes"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#前言">前言</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#应用程序示范">应用程序示范</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#在计算机上运行基于微服务的应用程序">在计算机上运行基于微服务的应用程序</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#设置-react-的本地部署">设置 React 的本地部署</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#准备好-react-应用的产品环境">准备好 React 应用的产品环境</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#利用-nginx-提供静态文件">利用 Nginx 提供静态文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#检查代码">检查代码</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#建立-spring-网络应用程序">建立 Spring 网络应用程序</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#将应用程序打包成-jar-文件">将应用程序打包成 Jar 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#启动应用程序">启动应用程序</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#检查错误代码">检查错误代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#定义属性">定义属性</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#建立-python-应用程序">建立 Python 应用程序</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#安装依赖">安装依赖</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#启动应用">启动应用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#检查-python-代码">检查 python 代码</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#为每个服务创建容器映像">为每个服务创建容器映像</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#通过虚拟机提供-react-静态文件">通过虚拟机提供 React 静态文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#通过容器提供-react-静态文件">通过容器提供 React 静态文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#为-react-应用建立容器映像-docker-简介">为 React 应用建立容器映像（Docker 简介）</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#为前端定义-dockerfile">为前端定义 Dockerfile</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#建立并推送容器">建立并推送容器</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#运行容器">运行容器</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#dockerignore-文件">Dockerignore 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#为-java-应用程序建立容器映像">为 Java 应用程序建立容器映像</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#为-python-应用程序创建容器映像">为 Python 应用程序创建容器映像</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#测试容器化的应用程序">测试容器化的应用程序</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#智力问答题——为什么使用-kubernetes">智力问答题——为什么使用 Kubernetes？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-简介">Kubernetes 简介</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#kubernetes-是什么">Kubernetes 是什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#底层基础设施的抽象">底层基础设施的抽象</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#标准化的云服务提供商">标准化的云服务提供商</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-实践——pod">Kubernetes 实践——Pod</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#安装和启动-minikube">安装和启动 Minikube</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#pod">Pod</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#pod-的定义">Pod 的定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#创建-sa-frontend-的-pod">创建 SA Frontend 的 Pod</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#从外部访问应用程序">从外部访问应用程序</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#扩大规模的错误方法">扩大规模的错误方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#总结-pod">总结 Pod</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-实践——服务">Kubernetes 实践——服务</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#标签">标签</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#服务的定义">服务的定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#服务的总结">服务的总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-实践——部署">Kubernetes 实践——部署</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#部署实践">部署实践</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#部署的定义">部署的定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#好处-1-采用零停机时间部署-zero-downtime">好处 1：采用零停机时间部署(Zero-downtime)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#确认部署">确认部署</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#rollingupdate-背后的情况">“RollingUpdate”背后的情况</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#好处2-回滚到前一个状态">好处2：回滚到前一个状态</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-和其他一切的实战应用">Kubernetes 和其他一切的实战应用</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#部署-sa-logic">部署 SA-Logic</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-logic-服务">SA Logic 服务</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-webapp-部署">SA-WebApp 部署</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#kube-dns">KUBE-DNS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-webapp-部署-续">SA WebApp 部署（续）</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-webapp-服务">SA-WebApp 服务</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#全文总结">全文总结</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#本文中覆盖的内容">本文中覆盖的内容</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><p>​</p><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>我保证本文是最详尽的 Kubernetes 技术文档，从我在后台排版了这么漫长的时间就能看出来。废话不多说——牢牢占据容器技术统治地位的 Kubernetes，其重要性想必不言而喻。</p><figure><img src="/assets/img-20230408164138-5XXB39WD.png" alt="Kubernetes" tabindex="0" loading="lazy"><figcaption>Kubernetes</figcaption></figure><p>以下为译文：</p><p>为什么银行肯花大价钱雇我做 Kubernetes 如此简单的工作？——我一直很奇怪这一点，因为我觉得任何人都可以在 3 个小时内学会这项技术。</p><p>如果你怀疑我说的，就来挑战一下吧！**读完本文，你绝对可以学会如何在 Kubernetes 集群上运行基于微服务的应用程序。**我保证你可以做到，因为我就是这样向我的客户介绍 Kubernetes 的。</p><p>本文的教程与其他资源有何不同？有很大不同。大多数的教程都从最简单的内容讲起：Kubernetes 的概念和 kubectl 的命令。本文则是基于读者了解应用程序的开发、微服务和 Docker 容器等基础之上。</p><p>本文中，我们会涉及的内容包括：</p><ul><li><p>在计算机上运行基于微服务的应用程序；</p></li><li><p>为微服务应用程序的每个服务建立容器映像；</p></li><li><p>Kubernetes 的基本介绍；</p></li><li><p>在 Kubernetes 管理的集群内部署基于微服务的应用程序。</p></li></ul><p>通过一步步深入学习，让大家能够领会 Kubernetes 的简单易用。只有你了解它的使用环境时，才能轻松掌握 Kubernetes。废话不多说，我们开始吧。</p><h2 id="应用程序示范" tabindex="-1"><a class="header-anchor" href="#应用程序示范" aria-hidden="true">#</a> 应用程序示范</h2><p>如下应用程序有一个功能：每次输入接受一个句子；使用文本分析，计算句子所表达的情绪。</p><figure><img src="/assets/img-20230408164516-dfk621Eq.gif" alt="图1：情感分析网络应用" tabindex="0" loading="lazy"><figcaption>图1：情感分析网络应用</figcaption></figure><p>从技术的角度看来，这个应用程序包含 3 个微服务，每个都包含特定功能：</p><ul><li><p>SA-Frontend：前端， Nginx 网络服务器，提供 ReactJS 静态文件；</p></li><li><p>SA-WebAp：网络应用， Java 网络应用程序，处理来自前端的请求；</p></li><li><p>SA-Logic：逻辑处理， Python 应用程序，执行情感分析。</p></li></ul><p>你需要知道微服务是无法独立工作的，它们引入了“关注点分离”（separation of concerns），但是它们之间依然需要交互。</p><figure><img src="/assets/img-20230408164616-W-O4plhl.gif" alt="图2：情感分析网络应用中的数据流" tabindex="0" loading="lazy"><figcaption>图2：情感分析网络应用中的数据流</figcaption></figure><p>我们可以通过微服务之间的数据流来描述这种交互：</p><ul><li><p>客户端应用程序请求初始页面 index.html（index.html 页面会反过来加载 ReactJS 应用程序的脚本）；</p></li><li><p>用户与应用程序的交互触发到 Spring 网络应用的请求；</p></li><li><p>Spring 网络应用将请求发送给 Python 应用做情感分析；</p></li><li><p>Python 应用计算情感值，并返回结果；</p></li><li><p>Spring 网络应用将结果返回给 React 应用（然后由 React 应用将结果显示给用户）。</p></li></ul><p>点击此处下载这些应用程序的代码：<code>https://github.com/rinormaloku/k8s-mastery</code>。现在就可以克隆这个代码仓库，接下来我们要做更加精彩的东西。</p><h2 id="在计算机上运行基于微服务的应用程序" tabindex="-1"><a class="header-anchor" href="#在计算机上运行基于微服务的应用程序" aria-hidden="true">#</a> 在计算机上运行基于微服务的应用程序</h2><p>我们需要启动所需的 3 个服务。让我们从最有意思的部分——前端应用程序开始。</p><h3 id="设置-react-的本地部署" tabindex="-1"><a class="header-anchor" href="#设置-react-的本地部署" aria-hidden="true">#</a> 设置 React 的本地部署</h3><p>为了运行 React 应用程序，首先你需要在计算机上安装 NodeJS 和 NPM。安装好这些后，在终端中进入目录 sa-frontend。然后运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>该命令会将 React 应用程序的所有 Javascript 依赖都下载到文件夹 node_modules 中（package.json 文件中定义了所有依赖）。在所有依赖都解决后，运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这样就可以了！我们运行了 React 应用程序，现在可以通过默认端口 localhost:3000 访问该应用程序了。你可以自由修改代码，并从浏览器中观察即时效果。这里用到了热模块替换（即在运行时用替换模块来减少页面刷新次数）技术，可以减轻前端开发的工作。</p><h3 id="准备好-react-应用的产品环境" tabindex="-1"><a class="header-anchor" href="#准备好-react-应用的产品环境" aria-hidden="true">#</a> 准备好 React 应用的产品环境</h3><p>为了搭建产品环境，我们需要建立应用程序的静态网页，并通过网络服务器提供服务。</p><p>为了搭建 React 应用程序，首先在终端中进入目录 sa-frontend。然后运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> run build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>该命令会在项目的文件目录中生成一个名叫“build”的文件夹。该文件夹内包含了 ReactJS 应用程序所需的所有静态文件。</p><h3 id="利用-nginx-提供静态文件" tabindex="-1"><a class="header-anchor" href="#利用-nginx-提供静态文件" aria-hidden="true">#</a> 利用 Nginx 提供静态文件</h3><p>首先安装并启动 Nginx 网络服务器。然后将 sa-frontend/build 目录内的文件移动到 [nginx安装目录]/html。</p><p>如此一来，我们就可以通过 [nginx安装目录]/html/index.html 来访问 index.html 文件了，而它是 Nginx 服务的默认文件。</p><p>默认情况下，Nginx 网络服务器会监听端口 80。你可以通过修改 [nginx安装目录]/conf/nginx.conf 文件中的 server.listen 字段来指定不同的端口。</p><p>打开浏览器，并访问端口 80，可以看到 ReactJS 应用程序加载成功。</p><figure><img src="/assets/img-20230408164933-WOqfKvBX.png" alt="图3：Nginx 提供的 React 应用程序服务" tabindex="0" loading="lazy"><figcaption>图3：Nginx 提供的 React 应用程序服务</figcaption></figure><p>在输入框“Type your sentence”（输入句子）中输入句子，然后点击 SEND（发送）按钮，但是页面会返回错误 404（你可以检查浏览器的控制台）。为什么？让我们检查一下代码。</p><h3 id="检查代码" tabindex="-1"><a class="header-anchor" href="#检查代码" aria-hidden="true">#</a> 检查代码</h3><p>我们可以在 App.js 文件中看到，点击“SEND”按钮会触发 analyzeSentence。该方法的代码如下所示（我们对每一段代码进行了编号“#号码”，具体解释如下所示）：</p><div class="language-JavaScript line-numbers-mode" data-ext="JavaScript"><pre class="language-JavaScript"><code>analyzeSentence() {
    fetch(&#39;http://localhost:8080/sentiment&#39;, {  // #1
        method: &#39;POST&#39;,
        headers: {
            &#39;Content-Type&#39;: &#39;application/json&#39;
        },
        body: JSON.stringify({
                       sentence: this.textField.getValue()})// #2
    })
        .then(response =&gt; response.json())
        .then(data =&gt; this.setState(data));  // #3
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1：POST 方法调用的 URL（应用程序应该在该 URL 上监听访问）；<br> #2：发送到应用程序的请求主体如下所示：</p></blockquote><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>{
    sentence: “I like yogobella!”
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#3：返回值将更新该组件的状态，而状态的变更将重新渲染这个组件。如果我们收到数据（即包含用户输入的句子和极性的 JSON 对象），那么我们会显示组件 polarityComponent，因为满足条件而且我们可以如下定义该组件：</p></blockquote><div class="language-JavaScript line-numbers-mode" data-ext="JavaScript"><pre class="language-JavaScript"><code>const polarityComponent = this.state.polarity !== undefined ?
    &lt;Polarity sentence={this.state.sentence} 
              polarity={this.state.polarity}/&gt; :
    null;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一切看起来都很好。但是我们还差什么呢？你可能已经发现我们没有在 localhost:8080 上设置任何东西！我们必须启动 Spring 网络应用程序监听这个端口！</p><figure><img src="/assets/img-20230408165252-z_NFJ38x.png" alt="图4：缺失的 Spring 网络应用程序微服务" tabindex="0" loading="lazy"><figcaption>图4：缺失的 Spring 网络应用程序微服务</figcaption></figure><h2 id="建立-spring-网络应用程序" tabindex="-1"><a class="header-anchor" href="#建立-spring-网络应用程序" aria-hidden="true">#</a> 建立 Spring 网络应用程序</h2><p>为了设置 Spring 网络应用程序，你必须安装 JDK8 和 Maven，并设置它们的环境变量。设置好后，我们继续下个部分。</p><h3 id="将应用程序打包成-jar-文件" tabindex="-1"><a class="header-anchor" href="#将应用程序打包成-jar-文件" aria-hidden="true">#</a> 将应用程序打包成 Jar 文件</h3><p>在终端中进入 sa-webapp 目录，并运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mvn <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>该命令会在目录 sa-webapp 中生成一个名叫 target 的文件夹。target 文件夹内有打包好的 Java 应用程序包：’sentiment-analysis-web-0.0.1-SNAPSHOT.jar’。</p><h3 id="启动应用程序" tabindex="-1"><a class="header-anchor" href="#启动应用程序" aria-hidden="true">#</a> 启动应用程序</h3><p>进入 target 目录，并通过如下命令启动应用程序：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> sentiment-analysis-web-0.0.1-SNAPSHOT.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>等等……出错了。应用程序启动失败，我们可以看到如下异常信息：</p><blockquote><p>Error creating bean with name &#39;sentimentController&#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;sa.logic.api.url&#39; in value &quot;${sa.logic.api.url}&quot;</p></blockquote><p>这里显示的重要信息是 SentimentController 中的 sa.logic.api.url。我们检查一下这段代码。</p><h3 id="检查错误代码" tabindex="-1"><a class="header-anchor" href="#检查错误代码" aria-hidden="true">#</a> 检查错误代码</h3><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>@CrossOrigin(origins = &quot;*&quot;)
@RestController
public class SentimentController {
@Value(&quot;${sa.logic.api.url}&quot;)    // #1
    private String saLogicApiUrl;
@PostMapping(&quot;/sentiment&quot;)
    public SentimentDto sentimentAnalysis(
                            @RequestBody SentenceDto sentenceDto) {
        RestTemplate restTemplate = new RestTemplate();
return restTemplate.postForEntity(
                saLogicApiUrl + &quot;/analyse/sentiment&quot;,    // #2
                sentenceDto, SentimentDto.class)
                .getBody();
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1：SentimentController 有一个名叫 saLogicApiUrl 的字段。这个字段的赋值是由 sa.logic.api.url 属性定义的。<br> #2：saLogicApiUrl 与值“/analyse/sentiment”连接在一起，共同构成了 Sentiment Analysis 请求的 URL。</p></blockquote><h3 id="定义属性" tabindex="-1"><a class="header-anchor" href="#定义属性" aria-hidden="true">#</a> 定义属性</h3><p>在 Spring 中默认的属性资源是 application.properties（具体位置在 sa-webapp/src/main/resources 中）。但是这不是定义属性的唯一方式，我们可以通过之前的命令完成属性定义：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> sentiment-analysis-web-0.0.1-SNAPSHOT.jar 
     <span class="token parameter variable">--sa.logic.api.url</span><span class="token operator">=</span>WHAT.IS.THE.SA.LOGIC.API.URL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>应该由 Python 应用程序运行时定义的值初始化该属性，如此一来 Spring 网络应用程序就可以知道在运行时把信息传递到哪里了。</p><p>为了简单起见，我们假设在 localhost:5000 上运行 Python 应用程序。请记得哦！</p><p>运行如下命令，然后我们来看看最后一个服务：Python 应用程序。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> sentiment-analysis-web-0.0.1-SNAPSHOT.jar 
     <span class="token parameter variable">--sa.logic.api.url</span><span class="token operator">=</span>http://localhost:5000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/img-20230408170828-K0XZcry3.png" alt="服务部署情况" tabindex="0" loading="lazy"><figcaption>服务部署情况</figcaption></figure><h2 id="建立-python-应用程序" tabindex="-1"><a class="header-anchor" href="#建立-python-应用程序" aria-hidden="true">#</a> 建立 Python 应用程序</h2><p>为了启动 Python 应用程序，首先我们需要安装 Python3 和 Pip，以及设置它们的环境变量。</p><h3 id="安装依赖" tabindex="-1"><a class="header-anchor" href="#安装依赖" aria-hidden="true">#</a> 安装依赖</h3><p>在终端中进入 sa-logic/sa (代码库)，然后运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt
python <span class="token parameter variable">-m</span> textblob.download_corpora
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动应用" tabindex="-1"><a class="header-anchor" href="#启动应用" aria-hidden="true">#</a> 启动应用</h3><p>在利用 Pip 安装好依赖后，我们就可以通过运行如下命令启动应用程序了：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python sentiment_analysis.py
* Running on http://0.0.0.0:5000/ <span class="token punctuation">(</span>Press CTRL+C to quit<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这意味着应用程序已经启动，并在 localhost 的端口 5000 上监听 HTTP 请求了。</p><h3 id="检查-python-代码" tabindex="-1"><a class="header-anchor" href="#检查-python-代码" aria-hidden="true">#</a> 检查 python 代码</h3><p>让我们检查代码，看看处理逻辑部分的 Python 应用程序在干什么：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> textblob <span class="token keyword">import</span> TextBlob
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> request<span class="token punctuation">,</span> jsonify
app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>                                   <span class="token comment">#1</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&quot;/analyse/sentiment&quot;</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token comment">#2</span>
<span class="token keyword">def</span> <span class="token function">analyse_sentiment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    sentence <span class="token operator">=</span> request<span class="token punctuation">.</span>get_json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;sentence&#39;</span><span class="token punctuation">]</span>           <span class="token comment">#3</span>
    polarity <span class="token operator">=</span> TextBlob<span class="token punctuation">(</span>sentence<span class="token punctuation">)</span><span class="token punctuation">.</span>sentences<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>polarity <span class="token comment">#4</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span>                                     <span class="token comment">#5</span>
        sentence<span class="token operator">=</span>sentence<span class="token punctuation">,</span>
        polarity<span class="token operator">=</span>polarity
    <span class="token punctuation">)</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span>                <span class="token comment">#6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1：实例化一个 Flask 对象；<br> #2：定义 POST 请求访问的路径；<br> #3：从请求主体内抽出“sentence”属性；<br> #4：初始化匿名 TextBlob 对象，并从第一个句子（我们只有一个）中获取极性；<br> #5：在相应体内返回句子和极性；<br> #6：运行 flask 对象应用来监听 localhost:5000 上的请求。</p></blockquote><p>所有的服务都设置好，可以互相交流了。试试看重开前端的 localhost:80。</p><figure><img src="/assets/img-20230408171154-hmECa1Ei.png" alt="图6：微服务架构完成" tabindex="0" loading="lazy"><figcaption>图6：微服务架构完成</figcaption></figure><p>在下面一节中，我们将介绍如何在 Docker 容器内启动这些服务，因为这是在 Kubernetes 集群内运行这些服务的前提条件。</p><h2 id="为每个服务创建容器映像" tabindex="-1"><a class="header-anchor" href="#为每个服务创建容器映像" aria-hidden="true">#</a> 为每个服务创建容器映像</h2><p>Kubernetes 是容器管理平台。可想而知我们需要容器去管理它们。但是容器是什么？Docker 官方文档的最佳答案如下：</p><blockquote><p>容器映像是轻量级的、独立的、可执行软件包，包含所有可运行的东西：代码、运行时、系统工具、系统库、设置。对于基于 Linux 和 Windows 的应用，不论环境如何，容器化的软件都可以照常运行。</p></blockquote><p>这意味着容器可以在任何计算机上运行，甚至是在产品服务器上，都没有任何差别。</p><p>为了更形象地描述，让我们来对比一下 React 应用程序在虚拟机上和容器内运行的情况。</p><h3 id="通过虚拟机提供-react-静态文件" tabindex="-1"><a class="header-anchor" href="#通过虚拟机提供-react-静态文件" aria-hidden="true">#</a> 通过虚拟机提供 React 静态文件</h3><p>使用虚拟机的缺点包括：</p><ul><li><p>资源效率低下，每个虚拟机都需要一个完全成熟的操作系统；</p></li><li><p>对平台有依赖性。本地机器上运行得很好的功能未必能在产品服务器上正常工作；</p></li><li><p>与容器相比，更重而且规模伸缩较慢。</p></li></ul><figure><img src="/assets/img-20230408171317-N-0xzjbZ.png" alt="图7：虚拟机上提供静态文件的 Nginx 网络服务器" tabindex="0" loading="lazy"><figcaption>图7：虚拟机上提供静态文件的 Nginx 网络服务器</figcaption></figure><h3 id="通过容器提供-react-静态文件" tabindex="-1"><a class="header-anchor" href="#通过容器提供-react-静态文件" aria-hidden="true">#</a> 通过容器提供 React 静态文件</h3><p>使用容器的优点包括：</p><ul><li><p>资源效率很高，在 Docker 的帮助下使用主机操作系统；</p></li><li><p>对平台没有依赖性。可以在本地机器上运行的容器可以在任何机器上正常工作；</p></li><li><p>通过映像层提供轻量级服务。</p></li></ul><figure><img src="/assets/img-20230408171405-0LnRVAl3.png" alt="图8：在容器内提供静态文件的 Nginx 网络服务器" tabindex="0" loading="lazy"><figcaption>图8：在容器内提供静态文件的 Nginx 网络服务器</figcaption></figure><p>以上是使用容器最突出的特色和优势。更多信息，请参阅 Docker 官方文档：<code>https://www.docker.com/what-container</code>。</p><h3 id="为-react-应用建立容器映像-docker-简介" tabindex="-1"><a class="header-anchor" href="#为-react-应用建立容器映像-docker-简介" aria-hidden="true">#</a> 为 React 应用建立容器映像（Docker 简介）</h3><p>Docker 容器最基本的组件是 .dockerfile。该 Dockerfile 文件最基本的组成是容器镜像，我们将通过下列一系列说明，介绍如何创建一个符合应用程序需求的容器镜像。</p><p>在开始定义 Dockerfile 之前，让我们先回想一下使用 Nginx 服务 React 静态文件的步骤：</p><ul><li><p>创建静态文件（npm run build）；</p></li><li><p>启动 Nginx 服务器；</p></li><li><p>将前端项目的 build 文件夹的内容复制到 nginx/html 目录中。</p></li></ul><p>在下一节中，你会注意到创建容器与建立本地 React 的过程非常相似。</p><h3 id="为前端定义-dockerfile" tabindex="-1"><a class="header-anchor" href="#为前端定义-dockerfile" aria-hidden="true">#</a> 为前端定义 Dockerfile</h3><p>前端 Dockerfile 的建立只有两个步骤。这是因为 Nginx 团队为我们提供了基本的 Nginx 映像，我们可以直接利用。这两个步骤如下：</p><ul><li><p>启动基本的 Nginx 映像；</p></li><li><p>将 sa-frontend/build 目录复制到容器的 nginx/html 中。</p></li></ul><p>转换成的Dockerfile如下所示：</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> nginx</span>
<span class="token instruction"><span class="token keyword">COPY</span> build /usr/share/nginx/html</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>很惊讶吧？这个文件是可读的，我们可以概括为：</p><p>从 Nginx 映像开始（不管里面是什么）。将 build 目录复制到映像的 nginx/html 目录中。然后就好了！</p><p>你可能在想，我该从哪儿复制 build 文件呢？例如：/usr/share/nginx/html。非常简单：在 Docker Hub 的 Nginx 映像文档中有记载。</p><h3 id="建立并推送容器" tabindex="-1"><a class="header-anchor" href="#建立并推送容器" aria-hidden="true">#</a> 建立并推送容器</h3><p>在推送映像之前，我们需要一个容器注册来托管映像。Docker Hub 是一个免费的云容器服务，我们将使用它来做演示。接下来有 3 个任务需要完成：</p><ul><li><p>安装 Docker CE；</p></li><li><p>注册 Docker Hub；</p></li><li><p>在终端中运行如下命令登录：</p></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> login <span class="token parameter variable">-u</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$DOCKER_USERNAME</span>&quot;</span> <span class="token parameter variable">-p</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$DOCKER_PASSWORD</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在完成上述任何后，请进入目录 sa-frontend。然后运行如下命令（请用你的 docker hub 用户名替换 $DOCKER 用户名，例如：rinormaloku/sentiment-analysis-frontend）。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-f</span> Dockerfile <span class="token parameter variable">-t</span> <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>现在我们可以删掉 -f Dockerfile 了，因为我们已经在包含 Dockerfile 的目录中了。</p><p>我们可以使用 docker push 命令来推送映像：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> push <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请确认映像已成功地被推送到 docker hub 代码库。</p><h3 id="运行容器" tabindex="-1"><a class="header-anchor" href="#运行容器" aria-hidden="true">#</a> 运行容器</h3><p>现在任何人都可以获取 $DOCKER_USER_ID/sentiment-analysis-frontend 中的映像并运行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Docker 容器已经处于运行状态了！</p><p>在进行下一步之前，让我们先来讲解一下 80:80，很多人对此比较不解：</p><ul><li><p>第一个 80 是主机的端口号（例如：我的计算机）；</p></li><li><p>第二个 80 是容器的端口号，请求都会被转送到这里。</p></li></ul><figure><img src="/assets/img-20230408171731-QDwNlCQH.png" alt="图9：从主机到容器的端口匹配" tabindex="0" loading="lazy"><figcaption>图9：从主机到容器的端口匹配</figcaption></figure><p>这是从&lt;主机端口&gt;匹配到&lt;容器端口&gt;的。也就是说每个发往主机 80 端口的请求都会被匹配到容器的 80 端口，如图 9 所示。</p><p>因为在主机上（你的计算机）80 端口上运行的端口可以访问 localhost:80。如果本地不支持 Docker，那么你可以在 &lt;docker机器ip&gt;:80 上打开应用程序。运行 docker-machine ip 命令可以找到 Docker 机器的 IP。</p><p>试试看！你现在应该可以访问 React 应用程序了。</p><h3 id="dockerignore-文件" tabindex="-1"><a class="header-anchor" href="#dockerignore-文件" aria-hidden="true">#</a> Dockerignore 文件</h3><p>刚才我们看到建立 SA-Frontend 的映像非常慢，不好意思，应该是超级慢。这是因为我们必须将建立过程中的环境文件发送给 Docker 服务。更具体地来说，建立过程中的环境文件指的是在建立映像的时候，所有会用到的 Dockerfile 目录中的数据。</p><p>以我们的例子来说，SA-Frontend 文件包括如下文件夹：</p><div class="language-folder line-numbers-mode" data-ext="folder"><pre class="language-folder"><code>sa-frontend:
|   .dockerignore
|   Dockerfile
|   package.json
|   README.md
+---build
+---node_modules
+---public
\---src
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是我们只需要 build 文件夹。上传其他的文件会浪费时间。我们可以通过删除其他目录来节约时间。这就需要用到 .dockerignore。你可能觉得这与 .gitignore 很相似，例如你可以所有想要忽略的目录都添加到 .dockerignore，如下所示：</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>node_modules
src
public
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个 .dockerignore 文件应该与 Dockerfile 在同一文件夹中。现在建立映像文件只需要几秒钟了。</p><p>让我们继续看看 Java 应用程序。</p><h3 id="为-java-应用程序建立容器映像" tabindex="-1"><a class="header-anchor" href="#为-java-应用程序建立容器映像" aria-hidden="true">#</a> 为 Java 应用程序建立容器映像</h3><p>你知道吗？你已经差不多学习了所有关于创建容器映像的知识！这就是为什么这一小节这么短的原因。</p><p>在 sa-webapp 中打开 Dockerfile，你会看到只有两个新的关键字：</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>ENV SA_LOGIC_API_URL http://localhost:5000
…
EXPOSE 8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关键字 ENV 在 Docker 容器内声明了环境变量。这可以让我们在启动容器的时候为情感分析 API 提供 URL。</p><p>另外，关键字 EXPOSE 提供了一个端口，供我们以后访问。但是等等，我们在 SA-Frontend 的时候没有做这一步，说得很对！这个端口仅用于文档，换句话说就是这个端口是用来向阅读 Dockerfile 的人提供信息的。</p><p>你应该已经掌握了创建和推送容器映像。如果遇到任何困难，可以阅读 <a href="http://xn--sa-webappREADME-tz3x8921c.md" target="_blank" rel="noopener noreferrer">sa-webapp中的README.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 文件。</p><h3 id="为-python-应用程序创建容器映像" tabindex="-1"><a class="header-anchor" href="#为-python-应用程序创建容器映像" aria-hidden="true">#</a> 为 Python 应用程序创建容器映像</h3><p>sa-logic 的 Dockerfile 中没有新的关键字。现在你已经是 Docker 达人了。</p><p>关于如何建立和推送容器映像，请阅读 sa-logic 目录中的 <a href="http://README.md" target="_blank" rel="noopener noreferrer">README.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 文件。</p><h2 id="测试容器化的应用程序" tabindex="-1"><a class="header-anchor" href="#测试容器化的应用程序" aria-hidden="true">#</a> 测试容器化的应用程序</h2><p>你能相信没有测试过的东西吗？我也不信。所以我们来测试一下这些容器吧。</p><p>1.运行 sa-logic 容器，并配置监听端口 5050：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">5050</span>:5000 <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-logic
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.运行 sa-webapp 容器，并配置监听端口 8080（因为我们改变了 Python 应用监听的端口，所以我们需要重写环境变量 SA_LOGIC_API_URL）：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token parameter variable">-e</span> <span class="token assign-left variable">SA_LOGIC_API_URL</span><span class="token operator">=</span><span class="token string">&#39;http://&lt;container_ip or docker machine ip&gt;:5000&#39;</span> <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-web-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3.运行 sa-frontend 容器：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后就可以了。在浏览器中打开 localhost:80。</p><p>请注意：如果你改变 sa-webapp 的端口，或使用 Docker 机器的 IP，那么你需要更新 sa-frontend 中的 App.js，让 analyzeSentence 从新的 IP 或端口获取 URL。然后你需要建立并使用更新后的映像。</p><figure><img src="/assets/img-20230408172325-yGCYnEtS.png" alt="图10：在容器内运行微服务" tabindex="0" loading="lazy"><figcaption>图10：在容器内运行微服务</figcaption></figure><h3 id="智力问答题——为什么使用-kubernetes" tabindex="-1"><a class="header-anchor" href="#智力问答题——为什么使用-kubernetes" aria-hidden="true">#</a> 智力问答题——为什么使用 Kubernetes？</h3><p>本节中，我们学习了 Dockerfile，如何使用它创建映像，以及推送映像到 Docker注册目录的命令。另外，我们探讨了如何通过忽略没用的文件，减少需要发送的建立过程中的环境文件。最后我们从容器上运行了应用程序。</p><p>接下来，我们介绍为什么要使用 Kubernetes？我们将在下面深入介绍 Kubernetes，这里我想给你留个智力问答题。</p><p>如果我们的情感分析网络应用完成得很好，突然间访问量暴涨到每分钟数百万的请求，那么我们的 sa-webapp 和 sa-logic 将面临巨大的负荷压力。请问，我们如何才能扩大容器的规模？</p><h2 id="kubernetes-简介" tabindex="-1"><a class="header-anchor" href="#kubernetes-简介" aria-hidden="true">#</a> Kubernetes 简介</h2><p>我向你保证我没有夸大其词，读完本文你会问“为什么我们不称它为 Supernetes？”</p><figure><img src="/assets/img-20230408175432-Lx7JdE9H.png" alt="图11：Supernetes" tabindex="0" loading="lazy"><figcaption>图11：Supernetes</figcaption></figure><h3 id="kubernetes-是什么" tabindex="-1"><a class="header-anchor" href="#kubernetes-是什么" aria-hidden="true">#</a> Kubernetes 是什么？</h3><p>从容器启动微服务后，我们有一个问题，让我们通过如下问答的形式具体描述这个问题：</p><blockquote><p>问：我们怎么扩大或缩小容器？<br> 答：我们启动另外一个容器。<br> 问：我们如何在容器间分摊负荷？如果当前服务器的负荷达到最大，那我们是否需要另外一个服务器？我们如何最大化硬件使用率？<br> 答：唔......呃......（让我搜一下）<br> 问：如果在打更新补丁的时候，不影响到所有的服务？如果服务出了问题，如何才能返回之前能正常工作的版本？</p></blockquote><p>Kubernetes 可以解决以上所有问题（以及更多问题！）。我可以用一句话总结 Kubernetes：“Kubernetes 是容器控制平台，可以抽象所有的底层基础设施（容器运行用到的基础设施）。”</p><p>我们对容器控制平台有个模糊的概念。在本文后续部分，我们将看看它的实际应用，但是这是第一次我们提到“底层基础设施的抽象”，所以我们来详细看看这个概念。</p><h3 id="底层基础设施的抽象" tabindex="-1"><a class="header-anchor" href="#底层基础设施的抽象" aria-hidden="true">#</a> 底层基础设施的抽象</h3><p>Kubernetes 通过一个简单的 API 提供底层基础设施的抽象，我们可以向该 API 发送请求。这些请求可以让 Kubernetes 尽最大能力应对。例如，可以简单地要求“Kubernetes 添加映像 x 的 4 个容器。”然后 Kubernetes 会找出使用中的节点，并在内添加新的容器（如图 12 所示）。</p><figure><img src="/assets/img-20230408175545-nEYAkD4O.png" alt="图12：向 API 发送请求" tabindex="0" loading="lazy"><figcaption>图12：向 API 发送请求</figcaption></figure><p>这对开发人员来说意味着什么？意味着开发人员不需要在意节点的数目，也不需要在意从哪里运行容器以及如何与它们交流。开发人员不需要管理硬件优化，或担心节点关闭（它们将遵循墨菲法则），因为新的节点会添加到 Kubernetes 集群。同时 Kubernetes 会在其他运行的节点中添加容器。Kubernetes 会发挥最大的作用。</p><p>在图 2 中我们看到了一些新东西：</p><ul><li><p>API服务器：与集群交互的唯一方式。负责启动或停止另外一个容器，或检查当前状态，日志等；</p></li><li><p>Kubelet：监视节点内的容器，并与主节点交流；</p></li><li><p>Pod：初始阶段我们可以把 pod 当成容器。</p></li></ul><p>就介绍这么多，跟深入的介绍会导致我们分心，我们可以等到后面一点再介绍，有一些有用的资源，比如官方文档，或者阅读 Marko Lukša 的著作《Kubernetes in Action》，以及 Sébastien Goasguen &amp; Michael Hausenblas 的《Kubernetes Cookbook》。</p><h3 id="标准化的云服务提供商" tabindex="-1"><a class="header-anchor" href="#标准化的云服务提供商" aria-hidden="true">#</a> 标准化的云服务提供商</h3><p>Kubernetes 另外一个深入人心的点是：它标准化了云服务提供商。这是一个很大胆的宣言，我们通过如下例子来具体看一看：</p><p>比如，有一个 Azure、Google 云平台或其他云服务提供商的专家，他担任了一个搭建在全新的云服务提供商的项目。这可能引起很多后果，比如说：他可能无法在截止期限内完成；公司可能需要招聘更多相关的人员，等等。</p><p>相对的，Kubernetes 就没有这个问题。因为不论是哪家云服务提供商，你都可以在上面运行相同的命令。你可以以既定的方式向 API 服务器发送请求。Kubernetes 会负责抽象，并实装这家云服务商。</p><p>停一秒钟仔细想一下，这是极其强有力的功能。对公司来说，这意味着他们不需要绑定到一家云服务商。他们可以计算别家云服务商的开销，然后转移到别家。他们依旧可以保留原来的专家，保留原来的人员，他们还可以花更少的钱。</p><p>说了这么多，在下一节中让我们来实际使用 Kubernetes。</p><h2 id="kubernetes-实践——pod" tabindex="-1"><a class="header-anchor" href="#kubernetes-实践——pod" aria-hidden="true">#</a> Kubernetes 实践——Pod</h2><p>我们建立了微服务在容器上运行，虽然颇为坎坷，但还是可以工作的。我们还提到这种解决方案不具有伸缩性和弹性，而 Kubernetes 可以解决这些问题。在本文的后续章节，我们会将各个服务转移到由 Kubernetes 管理的容器中，如图 13 所示。</p><figure><img src="/assets/img-20230408175653-CUeizlws.png" alt="图13：在 Kubernetes 管理的集群中运行微服务" tabindex="0" loading="lazy"><figcaption>图13：在 Kubernetes 管理的集群中运行微服务</figcaption></figure><p>在本文中，我们将使用 Minikube 进行本地调试，尽管所有东西都是运行在 Azure 和 Google 云平台中的。</p><h3 id="安装和启动-minikube" tabindex="-1"><a class="header-anchor" href="#安装和启动-minikube" aria-hidden="true">#</a> 安装和启动 Minikube</h3><p>请参阅安装 Minikube 的官方文档：</p><blockquote><p><code>https://kubernetes.io/docs/tasks/tools/install-minikube/</code></p></blockquote><p>在安装 Minikube 的同时，你可以捎带着安装 Kubectl。Kubectl 是向 Kubernetes API 服务器发送请求的客户端。</p><p>可以通过运行 minikube start 命令启动 Minikube，在启动后，运行 kubectl get nodes 命令可以得到如下结果：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get nodes
NAME       STATUS    ROLES     AGE       VERSION
minikube   Ready     <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>    11m       v1.9.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Minikube 提供给我们的 Kubernetes 集群只有一个节点，但是记住我们并不在乎有多少个节点，Kubernetes 会负责抽象，对我们来说深入掌握 Kubernetes 并不重要。</p><p>在下一节中，我们将介绍 Kubernetes 的第一个资源：Pod。</p><h3 id="pod" tabindex="-1"><a class="header-anchor" href="#pod" aria-hidden="true">#</a> Pod</h3><p>我大爱容器，相信现在你也很喜欢容器。那为什么 Kubernetes 给我们最小的可部署计算单元 Pod 呢？Pod是干什么的？由一个或一组容器组成的 Pod 可以共享相同的运行环境。</p><p>但是我们真的需要在一个 Pod 内运行两个容器吗？呃……一般来说，只会运行一个容器，我们的例子中也是这样的。但是有些情况下，比如两个容器需要共享卷，或它们之间是通过跨进程的交流方式交流的，又或者它们被绑到一起，那么就可以使用 Pod。Pod 的另一个特征是：如果我们希望使用其他 Rke 等技术的话，我们可以做到不依赖 Docker 容器。</p><figure><img src="/assets/img-20230408175841-bo_l_DBt.png" alt="图14：Pod 属性" tabindex="0" loading="lazy"><figcaption>图14：Pod 属性</figcaption></figure><p>总的来说，Pod 的主要属性包括（如图 14 所示）：</p><ul><li><p>每个 Pod 可以在 Kubernetes 集群内拥有唯一的 IP 地址；</p></li><li><p>Pod 可以拥有多个容器。这些容器共享同一个端口空间，所以他们可以通过 localhost 交流（可想而知它们无法使用相同的端口），与其他 Pod 内容器的交流可以通过结合 Pod 的 IP 完成；</p></li><li><p>一个 Pod 内的容器共享同一个卷、同一个 IP、端口空间、IPC 命名空间。</p></li></ul><p>注：容器有个自己独立的文件系统，尽管他们可以通过 Kubernetes 的资源卷共享数据。</p><p>更多详细内容，请参阅相关的官方文档：</p><blockquote><p><code>https://kubernetes.io/docs/concepts/workloads/pods/pod/</code></p></blockquote><h3 id="pod-的定义" tabindex="-1"><a class="header-anchor" href="#pod-的定义" aria-hidden="true">#</a> Pod 的定义</h3><p>如下是我们的第一个 pod sa-frontend 的清单文件，我们会对文件内容进行逐一解释。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: v1
kind: Pod                                            <span class="token comment"># 1</span>
metadata:
  name: sa-frontend                                  <span class="token comment"># 2</span>
spec:                                                <span class="token comment"># 3</span>
  containers:
    - image: rinormaloku/sentiment-analysis-frontend <span class="token comment"># 4</span>
      name: sa-frontend                              <span class="token comment"># 5</span>
      ports:
        - containerPort: <span class="token number">80</span>                          <span class="token comment"># 6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1 kind：指定我们想创建的 Kubernetes 资源的类型。这里是 Pod。<br> #2 name：定义该资源的名字。我们在这里命名为 sa-frontend。<br> #3 spec：该对象定义了资源应有的状态。Pod Spec 中最重要的属性是容器的数组。<br> #4 image：是指我们希望在本 Pod 中启动的容器的映像。<br> #5 name：Pod 中容器中唯一的名字。<br> #6 containerPort：是指容器监听的端口号。这只是为了提供文档信息（即便没有这个端口也不会影响访问）。</p></blockquote><h3 id="创建-sa-frontend-的-pod" tabindex="-1"><a class="header-anchor" href="#创建-sa-frontend-的-pod" aria-hidden="true">#</a> 创建 SA Frontend 的 Pod</h3><p>你可以在 resource-manifests/sa-frontend-pod.yaml 中找到上述 Pod 的定义。你可以在终端中进入该文件夹，或在命令行输入完整的路径。然后执行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> sa-frontend-pod.yaml
pod <span class="token string">&quot;sa-frontend&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以通过如下命令确认 Pod：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods
NAME                          READY     STATUS    RESTARTS   AGE
sa-frontend                   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          7s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果该 Pod 还处于容器生成中的状态的话，你可以在运行命令的时候加入参数 --watch，当 Pod 进入运行状态的时候，终端会显示信息。</p><h3 id="从外部访问应用程序" tabindex="-1"><a class="header-anchor" href="#从外部访问应用程序" aria-hidden="true">#</a> 从外部访问应用程序</h3><p>为了从外部访问应用程序，我们需要创建服务类型的Kubernetes资源，具体内容我们将在后续章节讲解，虽然通过服务类型的资源支持外部访问是更合适的做法，但是此处为了快速调试，我们还有另外一个办法，即转发端口：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl port-forward sa-frontend-pod <span class="token number">88</span>:80
Forwarding from <span class="token number">127.0</span>.0.1:88 -<span class="token operator">&gt;</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在浏览器中访问 127.0.0.1:88，即可打开 React 应用程序。</p><h3 id="扩大规模的错误方法" tabindex="-1"><a class="header-anchor" href="#扩大规模的错误方法" aria-hidden="true">#</a> 扩大规模的错误方法</h3><p>我们说过 Kubernetes 的主要特色之一就是伸缩性，为了证明这一点，让我们运行另外一个 Pod。我们通过如下定义创建另外一个 Pod 资源：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: v1
kind: Pod                                            
metadata:
  name: sa-frontend2      <span class="token comment"># The only change</span>
spec:                                                
  containers:
    - image: rinormaloku/sentiment-analysis-frontend 
      name: sa-frontend                              
      ports:
        - containerPort: <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后，通过如下命令创建新的 Pod：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> sa-frontend-pod2.yaml
pod <span class="token string">&quot;sa-frontend2&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以通过如下命令确认第二个 Pod：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods
NAME                          READY     STATUS    RESTARTS   AGE
sa-frontend                   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          7s
sa-frontend2                  <span class="token number">1</span>/1       Running   <span class="token number">0</span>          7s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在我们有两个运行中的 Pod。</p><p>请注意：这不是最终的解决方案，还有很多缺陷。我们将在另一个 Kubernetes 资源的部署一节中改善这个方案。</p><h3 id="总结-pod" tabindex="-1"><a class="header-anchor" href="#总结-pod" aria-hidden="true">#</a> 总结 Pod</h3><p>提供静态文件的 Nginx 网络服务器在另个不同的 Pod 内运行。现在我们有两个问题：</p><ul><li><p>怎样对外开放这些服务，让用户通过 URL 来访问它们？</p></li><li><p>怎样平衡 Pod 之间的负荷？</p></li></ul><figure><img src="/assets/img-20230408180201-PNnY4LxP.png" alt="图15：服务之间的负荷平衡" tabindex="0" loading="lazy"><figcaption>图15：服务之间的负荷平衡</figcaption></figure><p>Kubernetes 提供了服务类型的资源。在下一节中我们将详细介绍。</p><h2 id="kubernetes-实践——服务" tabindex="-1"><a class="header-anchor" href="#kubernetes-实践——服务" aria-hidden="true">#</a> Kubernetes 实践——服务</h2><p>Kubernetes 服务资源可以作为一组提供相同服务的 Pod 的入口。这个资源肩负发现服务和平衡 Pod 之间负荷的重任，如图 16 所示。</p><figure><img src="/assets/img-20230408180225-E92lBZF1.png" alt="图16：Kubernetes 服务维护 ID 地址" tabindex="0" loading="lazy"><figcaption>图16：Kubernetes 服务维护 ID 地址</figcaption></figure><p>在 Kubernetes 集群内，我们拥有提供不同服务的 Pod（前端、Spring 网络应用和 Flask Python 应用程序）。所以这里的问题是：服务如何知道该处理哪个 Pod？例如：它如何生成这些 Pod 的终端列表？</p><p>这个问题可以用标签来解决，具体分两个步骤：</p><ul><li><p>给所有服务处理的对象 Pod 贴上标签；</p></li><li><p>在服务中使用一个选择器，该选择器定义了所有贴有标签的对象 Pod。</p></li></ul><p>下列视图看起来更清晰：</p><figure><img src="/assets/img-20230408180249-h3qU3kgv.png" alt="图17：带有标签的 Pod 和它们的清单文件" tabindex="0" loading="lazy"><figcaption>图17：带有标签的 Pod 和它们的清单文件</figcaption></figure><p>我们可以看到 Pod 都贴着标签“app: sa-frontend”，服务用这个标签找到目标 Pod。</p><h3 id="标签" tabindex="-1"><a class="header-anchor" href="#标签" aria-hidden="true">#</a> 标签</h3><p>标签提供了一种简单的方法用于管理Kubernetes资源。它们有一对键值表示，且可以用于所有资源。按照图17中的例子，修改清单文件。</p><p>在修改完毕后保存文件，并通过如下命令应用这些变更：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-frontend-pod.yaml
Warning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply
pod <span class="token string">&quot;sa-frontend&quot;</span> configured
kubectl apply <span class="token parameter variable">-f</span> sa-frontend-pod2.yaml 
Warning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply
pod <span class="token string">&quot;sa-frontend2&quot;</span> configured
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们看到了一个警告（在应用的时候，而非创建，明白了）。在第二行我们看到部署了 pod “sa-frontend”和 “sa-frontend2”。我们可以过滤想要查看的 Pod：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pod <span class="token parameter variable">-l</span> <span class="token assign-left variable">app</span><span class="token operator">=</span>sa-frontend
NAME           READY     STATUS    RESTARTS   AGE
sa-frontend    <span class="token number">1</span>/1       Running   <span class="token number">0</span>          2h
sa-frontend2   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          2h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>验证带有标签的 Pod 的另一种方法是在上述命令中加入标志符 --show-labels，那么结果中会显示每个 Pod 的所有标签。</p><p>很好！Pod 已经贴上了标签，我们准备好通过服务找到它们了。让我们定义 LoadBalancer 类型的服务，如图 18 所示。</p><figure><img src="/assets/img-20230408180334-XsSRhL0z.gif" alt="图18：用 LoadBalancer 服务平衡负荷" tabindex="0" loading="lazy"><figcaption>图18：用 LoadBalancer 服务平衡负荷</figcaption></figure><h3 id="服务的定义" tabindex="-1"><a class="header-anchor" href="#服务的定义" aria-hidden="true">#</a> 服务的定义</h3><p>LoadBalancer 服务的 YAML 定义如下所示：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: v1
kind: Service              <span class="token comment"># 1</span>
metadata:
  name: sa-frontend-lb
spec:
  type: LoadBalancer       <span class="token comment"># 2</span>
  ports:
  - port: <span class="token number">80</span>               <span class="token comment"># 3</span>
    protocol: TCP          <span class="token comment"># 4</span>
    targetPort: <span class="token number">80</span>         <span class="token comment"># 5</span>
  selector:                <span class="token comment"># 6</span>
    app: sa-frontend       <span class="token comment"># 7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1 kind：服务；<br> #2 type：指定类型，我们选择 LoadBalancer，因为我们想平衡 Pod 之间的负荷；<br> #3 ports：指定服务获取请求的端口；<br> #4 protocol：定义交流；<br> #5 targetPort：可以将来访的请求转发到这个端口；<br> #6 selector：包含选择pod属性的对象；<br> #7 app：sa-frontend定义了哪个是目标 Pod，只有拥有标签“app: sa-frontend”的才是目标 Pod。</p></blockquote><p>通过运行如下命令创建服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> service-sa-frontend-lb.yaml
<span class="token function">service</span> <span class="token string">&quot;sa-frontend-lb&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以通过运行如下命令检查的服务的状态：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get svc
NAME             TYPE           CLUSTER-IP      EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>        AGE
sa-frontend-lb   LoadBalancer   <span class="token number">10.101</span>.244.40   <span class="token operator">&lt;</span>pending<span class="token operator">&gt;</span>     <span class="token number">80</span>:30708/TCP   7m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>External-IP 处于 pending 状态（不用再等了，这个状态不会变的）。这是因为我们使用的是 Minikube。如果我们在 Azure 或 Google 云服务上运行，那么我们可以得到一个公开的 IP，那么全世界都可以访问我们的服务了。</p><p>尽管如此，Minikube 也不会置我们于不顾，它提供一个非常有用的本地调试命令，如下所示：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>minikube <span class="token function">service</span> sa-frontend-lb
Opening kubernetes <span class="token function">service</span> default/sa-frontend-lb <span class="token keyword">in</span> default browser<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这可以在浏览器中打开指向该服务的 IP。服务受到请求后，会将请求转发给其中一个 Pod（不用理会是哪个）。通过利用服务作为访问入口，这种抽象可以让我们看到并将多个 Pod 当成一个来交互。</p><h3 id="服务的总结" tabindex="-1"><a class="header-anchor" href="#服务的总结" aria-hidden="true">#</a> 服务的总结</h3><p>在本节中，我们介绍了给资源贴标签，在服务中使用标签作为选择器，我们还定义并创建了一个 LoadBalancer 的服务。这满足了我们希望伸缩应用程序规模的需求（只需加入新的贴了标签的 Pod），并通过将服务作为访问入口在 Pod 之间做负载均衡。</p><h2 id="kubernetes-实践——部署" tabindex="-1"><a class="header-anchor" href="#kubernetes-实践——部署" aria-hidden="true">#</a> Kubernetes 实践——部署</h2><p>Kubernetes 部署可以帮助每一个应用程序的生命都保持相同的一点：那就是变化。此外，只有挂掉的应用程序才会一尘不变，否则，新的需求会源源不断地涌现，更多代码会被开发出来、打包以及部署。这个过程中的每一步都有可能出错。</p><p>部署资源可以自动化应用程序从一版本升迁到另一版本的过程，并保证服务不间断，如果有意外发生，它可以让我们迅速回滚到前一个版本。</p><h3 id="部署实践" tabindex="-1"><a class="header-anchor" href="#部署实践" aria-hidden="true">#</a> 部署实践</h3><p>现在我们有两个 Pod 和一个服务开放，而且它们之间有负载均衡（如图 19 所示）。我们提到过现有的 Pod 还远远不够完美。需要分开管理每一个 Pod（创建、更新、删除和监视他们的情况）。快速更新和迅速回滚根本不可能！这样是不行的，部署 Kubernetes 资源可以解决这里的每个问题。</p><figure><img src="/assets/img-20230408180523-fWQYX97E.png" alt="图19：现状" tabindex="0" loading="lazy"><figcaption>图19：现状</figcaption></figure><p>在继续下面的内容之前，让我们复述下我们的目标，通过概述可以让我们更好的理解部署资源的清单文件的定义。我们想要的是：</p><ul><li><p>映像 rinormaloku/sentiment-analysis-frontend 的两个 Pod；</p></li><li><p>部署期间服务不间断；</p></li><li><p>Pod 贴有标签 app: sa-frontend，所以我们可以通过 sa-frontend-lb 服务找到各个服务。</p></li></ul><p>在下一节中，我们可以将这些需求反映到部署的定义中。</p><h3 id="部署的定义" tabindex="-1"><a class="header-anchor" href="#部署的定义" aria-hidden="true">#</a> 部署的定义</h3><p>如下资源定义的YAML文件可以达成以上所有提到的点：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: extensions/v1beta1
kind: Deployment                                          <span class="token comment"># 1</span>
metadata:
  name: sa-frontend
spec:
  replicas: <span class="token number">2</span>                                             <span class="token comment"># 2</span>
  minReadySeconds: <span class="token number">15</span>
  strategy:
    type: RollingUpdate                                   <span class="token comment"># 3</span>
    rollingUpdate: 
      maxUnavailable: <span class="token number">1</span>                                   <span class="token comment"># 4</span>
      maxSurge: <span class="token number">1</span>                                         <span class="token comment"># 5</span>
  template:                                               <span class="token comment"># 6</span>
    metadata:
      labels:
        app: sa-frontend                                  <span class="token comment"># 7</span>
    spec:
      containers:
        - image: rinormaloku/sentiment-analysis-frontend
          imagePullPolicy: Always                         <span class="token comment"># 8</span>
          name: sa-frontend
          ports:
            - containerPort: <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1 kind：部署；<br> #2 replicas：是部署 Spec 对象的一个属性，定义了我们想运行多少的 Pod。所以是 2；<br> #3 type：指定从当前版本升迁到下个版本的时候，部署使用的策略。此处的策略 RollingUpdate 可以保证部署期间服务不间断；<br> #4 maxUnavailable：是 RollingUpdate 对象的一个属性，定义了在升级的时候，最大允许停止的 Pod 数量（与希望的状态相比）。对我们的部署来说，我们有 2 个副本，这意味着在一个 Pod 停止后，我们还会有另外一个 Pod 运行，所以可以保证应用程序可访问；<br> #5 maxSurge：是 RollingUpdate 对象的另一个属性，定义了添加到部署的最大 Pod 数量（与希望的状态相比）。对我们的部署来说，这意味着在向新版本迁移的时候，我们可以加一个 Pod，那么我们可以同时拥有个 3 个 Pod；<br> #6 template：指定 Pod 的模板，部署在创建新 Pod 的时候，会用到该模板。很可能这个非常相似的 Pod 会立即吸引你；<br> #7 app: sa-frontend：根据模板创建的 Pod 将被贴上该标签；<br> #8 imagePullPolicy：当设置成 Always 的时候，每一次新部署都会重新获取容器映像。</p></blockquote><p>坦白来说，这一堆的文本让我更糊涂了，所以还是让我们来看个例子：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-frontend-deployment.yaml
deployment <span class="token string">&quot;sa-frontend&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>照例让我们确认是否一切如约履行了：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods
NAME                           READY     STATUS    RESTARTS   AGE
sa-frontend                    <span class="token number">1</span>/1       Running   <span class="token number">0</span>          2d
sa-frontend-5d5987746c-ml6m4   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          1m
sa-frontend-5d5987746c-mzsgg   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          1m
sa-frontend2                   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          2d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在我们有 4 个运行中的 Pod，两个是由部署创建的，而另外两个是我们手动创建的。通过 kubectl delete pod <code>&lt;pod-name&gt;</code> 命令删除其中一个手动创建的 Pod。</p><p>练习：删除其中一个部署创建的 Pod，看看结果怎样。在阅读如下的解释前，请先想想原因。</p><p>解释：删除一个 Pod 后，部署注意到当前的状态（只有 1 个 Pod 在运行）与希望的状态（2 个 Pod 处于运行状态），所以它会再启动一个 Pod。</p><p>那么，除了保持希望的状态外，使用部署还有什么好处？让我们先来看看好处。</p><h3 id="好处-1-采用零停机时间部署-zero-downtime" tabindex="-1"><a class="header-anchor" href="#好处-1-采用零停机时间部署-zero-downtime" aria-hidden="true">#</a> 好处 1：采用零停机时间部署(Zero-downtime)</h3><p>产品经理带着新的需求来找我们，说客户想要在前端加一个绿色的按钮。开发者写好了代码后，只需提供给我们一样必须的东西，容器映像 rinormaloku/sentiment-analysis-frontend:green。然后就该我们了，我们需要采用零停机时间部署，这项工作很难吗？让我们试试看！</p><p>编辑 deploy-frontend-pods.yaml 文件，将容器映像改为新的映像：rinormaloku/sentiment-analysis-frontend:green。保存变更，并运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> deploy-frontend-green-pods.yaml <span class="token parameter variable">--record</span>
deployment <span class="token string">&quot;sa-frontend&quot;</span> configured
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>让我们通过如下命令检查下上线的状态：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl rollout status deployment sa-frontend
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> of <span class="token number">2</span> updated replicas are available<span class="token punctuation">..</span>.
deployment <span class="token string">&quot;sa-frontend&quot;</span> successfully rolled out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从部署上看来，上线已经成功。在这个过程中副本被逐个替换。意味着应用程序始终在线。在继续下面的内容前，先让我们来确认一下更新确实有效。</p><h3 id="确认部署" tabindex="-1"><a class="header-anchor" href="#确认部署" aria-hidden="true">#</a> 确认部署</h3><p>让我们在浏览器中确认更新的结果。运行我们之前用到过的命令 minikube service sa-frontend-lb，它会打开浏览器。我们可以看到按钮 SEND 已更新了。</p><figure><img src="/assets/img-20230408180753-uYZQSO0Z.png" alt="图20：绿色按钮" tabindex="0" loading="lazy"><figcaption>图20：绿色按钮</figcaption></figure><h3 id="rollingupdate-背后的情况" tabindex="-1"><a class="header-anchor" href="#rollingupdate-背后的情况" aria-hidden="true">#</a> “RollingUpdate”背后的情况</h3><p>在我们应用了新的部署后，Kubernetes 会将新状态与旧的相比。在我们的例子中，新状态需要两个 rinormaloku/sentiment-analysis-frontend:green 映像的 Pod。这与当前的运行状态不同，所以 Kubernetes 会执行 RollingUpdate。</p><figure><img src="/assets/img-20230408180814-f-trka_f.png" alt="图21：RollingUpdate 替换 Pod" tabindex="0" loading="lazy"><figcaption>图21：RollingUpdate 替换 Pod</figcaption></figure><p>这里的 RollingUpdate 会根据我们指定的规格执行，也就是“maxUnavailable: 1″和“maxSurge: 1″。这意味着部署需要终止一个 Pod，并且仅可以运行一个新的 Pod。这个过程会不断重复，一直到所有的 Pod被替换（如图 21 所示）。</p><p>我们继续介绍第二个好处。</p><p>声明：出于娱乐的目的，下面的部分我按照小说的形式来书写。</p><h3 id="好处2-回滚到前一个状态" tabindex="-1"><a class="header-anchor" href="#好处2-回滚到前一个状态" aria-hidden="true">#</a> 好处2：回滚到前一个状态</h3><blockquote><p>产品经理跑进办公室说，他遇到一个大麻烦！<br> 产品经理大喊道：“产品环境中的应用程序有一个很关键的 bug！！需要马上回滚到前一个版本”。<br> 你冷静地看着他，眼睛都没有眨一下，就转向了心爱的终端，然后开始敲：</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl rollout <span class="token function">history</span> deployment sa-frontend
deployments <span class="token string">&quot;sa-frontend&quot;</span>
REVISION  CHANGE-CAUSE
<span class="token number">1</span>         <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>         
<span class="token number">2</span>         kubectl.exe apply <span class="token parameter variable">--filename</span><span class="token operator">=</span>sa-frontend-deployment-green.yaml <span class="token parameter variable">--record</span><span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>你看了一眼前一个部署，然后问产品经理：“上个版本很多 bug，那前一个版本运行得很完美吗？”<br> 产品经理吼道：“是啊，你没听见我说嘛？！”<br> 你没理他，你知道该如何处理，于是你开始敲：</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl rollout undo deployment sa-frontend --to-revision<span class="token operator">=</span><span class="token number">1</span>
deployment <span class="token string">&quot;sa-frontend&quot;</span> rolled back
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>然后，你轻轻地刷新了页面，之前的修改全都不见了！<br> 产品经理瞠目结舌地看着你。<br> 你拯救了大家！<br> 完</p></blockquote><p>我知道……这是个很无聊的故事。在 Kubernetes 出现之前，这个故事挺好的，更加戏剧化，让人高度紧张，而且这种状态持续了很长时间。那段旧时光还是很美好的！</p><p>大多数的命令都自带说明，只是有一些细节你需要自己搞清楚。为什么第一个版本中字段 CHANGE-CAUSE 的值为 <code>&lt;none&gt;</code>，而同时第二次改版的时候，CHANGE-CAUSE 的值为“kubectl.exe apply –filename=sa-frontend-deployment-green.yaml –record=true”。</p><p>你应该可以发现这是因为在应用新的映像的时候，我们用到了标志符 --record。</p><p>在下一节中，我们将使用之前所有的概念，完成整个架构。</p><h2 id="kubernetes-和其他一切的实战应用" tabindex="-1"><a class="header-anchor" href="#kubernetes-和其他一切的实战应用" aria-hidden="true">#</a> Kubernetes 和其他一切的实战应用</h2><p>现在我们学习了完成架构的所有必须的资源，因此这一节会非常快。图 22 中灰色的部分是需要做的事情。让我们从底部开始：部署 sa-logic 的部署。</p><figure><img src="/assets/img-20230408181042-lAZfiLzj.png" alt="图 22：当前应用程序状态" tabindex="0" loading="lazy"><figcaption>图 22：当前应用程序状态</figcaption></figure><h3 id="部署-sa-logic" tabindex="-1"><a class="header-anchor" href="#部署-sa-logic" aria-hidden="true">#</a> 部署 SA-Logic</h3><p>在终端中进入资源清单文件所在的目录，然后运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-logic-deployment.yaml <span class="token parameter variable">--record</span>
deployment <span class="token string">&quot;sa-logic&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>SA-Logic 的部署会创建三个 Pod（Pod 上运行着我们的 Python 应用）。该命令还会给Pod 贴上 app: sa-logic 的标签。有了这个标签，我们就能从 SA-Logic 服务中利用选择器来选择这些 Pod。请花点时间打开 sa-logic-deployment.yaml，查看其内容。</p><p>这里的概念都是一样的，因此我们可以直接讲解下一个资源：SA-Logic 服务。</p><h3 id="sa-logic-服务" tabindex="-1"><a class="header-anchor" href="#sa-logic-服务" aria-hidden="true">#</a> SA Logic 服务</h3><p>首先来解释下为什么需要该服务。我们的 Java 应用（在 SA-WebApp 部署的 Pod 中运行）依赖于 Python 应用提供的情感分析。但现在，与我们在本地运行一切服务时的状况不同，我们并没有一个单一的 Python 应用监听着某个端口，我们只有两个 Pod，如果需要，我们可以有更多的 Pod。</p><p>这就是为什么需要“服务”为一组提供相同功能的 Pod 提供访问入口。这就是说，我们可以利用 SA-Logic 服务作为所有 SA-Logic Pod 的访问入口。</p><p>运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> service-sa-logic.yaml
<span class="token function">service</span> <span class="token string">&quot;sa-logic&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>更新后的应用程序状态：现在我们有两个 Pod 在运行（包含 Python 应用程序），并且 SA-Logic 服务提供了访问入口，该访问入口将在 SA-WebApp 的 Pod 中使用。</p><figure><img src="/assets/img-20230408181144-Q6Nm1TSi.png" alt="图23：更新后的应用程序状态" tabindex="0" loading="lazy"><figcaption>图23：更新后的应用程序状态</figcaption></figure><p>现在需要部署 SA-WebApp Pod，我们需要用到部署资源。</p><h3 id="sa-webapp-部署" tabindex="-1"><a class="header-anchor" href="#sa-webapp-部署" aria-hidden="true">#</a> SA-WebApp 部署</h3><p>我们已经学过了部署，尽管这个部署会用到更多的特性。打开 sa-web-app-deployment.yaml 文件，会发现以下的新内容：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>- image: rinormaloku/sentiment-analysis-web-app
  imagePullPolicy: Always
  name: sa-web-app
  env:
    - name: SA_LOGIC_API_URL
      value: <span class="token string">&quot;http://sa-logic&quot;</span>
  ports:
    - containerPort: <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们感兴趣的第一件事就是 env 属性。我们猜测它定义了环境变量 SA_LOGIC_API_URl，值为在 Pod 内的值为 <code>http://sa-logic</code>。但为什么要初始化成 <code>http://sa-logic</code>，<code>sa-logic</code> 究竟是什么？</p><p>我们先来介绍下 kube-dns。</p><h3 id="kube-dns" tabindex="-1"><a class="header-anchor" href="#kube-dns" aria-hidden="true">#</a> KUBE-DNS</h3><p>Kubernetes 有个特殊的 Pod 叫做 kube-dns。默认情况下，所有 Pod 都用它作为 DNS 服务器。kube-dns 的一个重要属性就是它为每个建立的访问都创建一条 DNS 记录。</p><p>这就是说当我们创建 sa-logic 服务时，它会获得一个 IP 地址。它的名字会加入到 kube-dns 中（和它的 IP 地址一起）。这样所有 Pod 都能够把 sa-logic 翻译成 SA-Logic 服务的 IP 地址。</p><p>好，现在可以继续了：</p><h3 id="sa-webapp-部署-续" tabindex="-1"><a class="header-anchor" href="#sa-webapp-部署-续" aria-hidden="true">#</a> SA WebApp 部署（续）</h3><p>运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-web-app-deployment.yaml <span class="token parameter variable">--record</span>
deployment <span class="token string">&quot;sa-web-app&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>完了。剩下的工作就是通过 LoadBalancer 服务将 SA-WebApp Pod 暴露到外部。LoadBalancer 服务提供了 SA-WebApp Pod 的访问入口，这样 React 应用程序就能发送 HTTP 请求了。</p><h3 id="sa-webapp-服务" tabindex="-1"><a class="header-anchor" href="#sa-webapp-服务" aria-hidden="true">#</a> SA-WebApp 服务</h3><p>打开 service-sa-web-app-lb.yaml 文件，可以看到内容还是挺熟悉的。</p><p>所以我们可以运行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> service-sa-web-app-lb.yaml
<span class="token function">service</span> <span class="token string">&quot;sa-web-app-lb&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这样架构就完成了。但还有一点不完美的地方。在部署 SA-Frontend Pod 之后，容器映像指向了 <code>http://localhost:8080/sentiment</code> 处的 SA-WebApp。但现在我们需要将其更新为 SA-WebApp LoadBalancer 的 IP 地址（其作用是 SA-WebApp Pod 的访问入口）。</p><p>修补该不完美是个快速复习一切的绝佳机会（如果能不参照以下的指南独立完成更好）。下面我们开始：</p><ul><li><p>执行下列命令获取 SA-WebApp LoadBalancer 的 IP：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>minikube <span class="token function">service</span> list
<span class="token operator">|</span>-------------<span class="token operator">|</span>----------------------<span class="token operator">|</span>-----------------------------<span class="token operator">|</span>
<span class="token operator">|</span>  NAMESPACE  <span class="token operator">|</span>         NAME         <span class="token operator">|</span>             URL             <span class="token operator">|</span>
<span class="token operator">|</span>-------------<span class="token operator">|</span>----------------------<span class="token operator">|</span>-----------------------------<span class="token operator">|</span>
<span class="token operator">|</span> default     <span class="token operator">|</span> kubernetes           <span class="token operator">|</span> No <span class="token function">node</span> port                <span class="token operator">|</span>
<span class="token operator">|</span> default     <span class="token operator">|</span> sa-frontend-lb       <span class="token operator">|</span> http://192.168.99.100:30708 <span class="token operator">|</span>
<span class="token operator">|</span> default     <span class="token operator">|</span> sa-logic             <span class="token operator">|</span> No <span class="token function">node</span> port                <span class="token operator">|</span>
<span class="token operator">|</span> default     <span class="token operator">|</span> sa-web-app-lb        <span class="token operator">|</span> http://192.168.99.100:31691 <span class="token operator">|</span>
<span class="token operator">|</span> kube-system <span class="token operator">|</span> kube-dns             <span class="token operator">|</span> No <span class="token function">node</span> port                <span class="token operator">|</span>
<span class="token operator">|</span> kube-system <span class="token operator">|</span> kubernetes-dashboard <span class="token operator">|</span> http://192.168.99.100:30000 <span class="token operator">|</span>
<span class="token operator">|</span>-------------<span class="token operator">|</span>----------------------<span class="token operator">|</span>-----------------------------<span class="token operator">|</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在 sa-frontend/src/App.js 中使用 SA-WebApp LoadBalancer 的 IP，如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function-name function">analyzeSentence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fetch<span class="token punctuation">(</span><span class="token string">&#39;http://192.168.99.100:31691/sentiment&#39;</span>, <span class="token punctuation">{</span> /* shortened <span class="token keyword">for</span> brevity */<span class="token punctuation">}</span><span class="token punctuation">)</span>
            .then<span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">&gt;</span> response.json<span class="token punctuation">(</span><span class="token punctuation">))</span>
            .then<span class="token punctuation">(</span>data <span class="token operator">=</span><span class="token operator">&gt;</span> this.setState<span class="token punctuation">(</span>data<span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>构建静态文件 npm build （需要先切换到 sa-front-end 目录）；</p><p>构建容器映像：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-f</span> Dockerfile <span class="token parameter variable">-t</span> <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend:minikube <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>将映像推送到 Docker hub：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> push <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend:minikube
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>编辑 sa-frontend-deployment.yaml 并使用新的映像；</p></li><li><p>执行 kubectl apply -f sa-frontend-deployment.yaml 命令。</p></li></ul><p>刷新浏览器（如果你关闭了浏览器，则执行 minikube service sa-frontend-lb）。敲个句子试试看！</p><figure><img src="/assets/img-20230408175653-CUeizlws.png" alt="Kubernetes 服务架构图" tabindex="0" loading="lazy"><figcaption>Kubernetes 服务架构图</figcaption></figure><h2 id="全文总结" tabindex="-1"><a class="header-anchor" href="#全文总结" aria-hidden="true">#</a> 全文总结</h2><p>Kubernetes 对团队、项目都很有好处，它能简化部署，提供伸缩性、灵活性，可以让我们使用任何底层基础设施。以后我们叫它 Supernetes 吧！</p><h3 id="本文中覆盖的内容" tabindex="-1"><a class="header-anchor" href="#本文中覆盖的内容" aria-hidden="true">#</a> 本文中覆盖的内容</h3><ul><li><p>/打包/运行 ReactJS、Java 和 Python 应用程序；</p></li><li><p>Docker容器，如何利用 Dockerfile 定义并构建容器；</p></li><li><p>容器注册目录，我们采用 Docker Hub 作为容器的代码库；</p></li><li><p>介绍了 Kubernetes 的最重要的内容；</p></li><li><p>Pod；</p></li><li><p>服务；</p></li><li><p>部署；</p></li><li><p>新概念，如零停机时间部署；</p></li><li><p>创建可伸缩的应用；</p></li><li><p>流程上，我们将整个微服务应用程序转成了 Kubernetes 集群。</p></li></ul><p>本文为你提供了坚实的基础供你在实际的项目中使用，并且帮你更容易地学习更多新概念。</p><hr><p>本文作者：Rinor Maloku，译者：弯月，责编：郭芮，转载仅为自学。<br> 原文链接：<a href="https://medium.freecodecamp.org/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882" target="_blank" rel="noopener noreferrer">https://medium.freecodecamp.org/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/chcbz/chcbz.github.io/edit/main/demo/theme-docs/src/article/2018121710.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: chcbz@sina.com">chcbz</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 Mr.Chen </div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-5ZyUDSyM.js" defer></script>
  </body>
</html>
