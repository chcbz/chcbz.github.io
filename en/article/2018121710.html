<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.11" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="alternate" hreflang="zh-cn" href="https://blog.chcbz.net/article/2018121710.html"><meta property="og:url" content="https://blog.chcbz.net/en/article/2018121710.html"><meta property="og:site_name" content="Commoner Yunshuike"><meta property="og:title" content="Conquer Kubernetes in three hours!"><meta property="og:description" content="​ Preface I promise this is the most exhaustive Kubernetes technical documentation I can tell from the amount of time I've been working behind the scenes. Not much nonsense - the importance of Kubernetes, which firmly occupies the dominant position of container technology, must be self-evident."><meta property="og:type" content="article"><meta property="og:image" content="https://blog.chcbz.net/"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="og:updated_time" content="2023-04-15T01:58:40.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Conquer Kubernetes in three hours!"><meta property="article:author" content="Mr.Chen"><meta property="article:tag" content="Java"><meta property="article:tag" content="Kubernetes"><meta property="article:published_time" content="2018-12-17T10:12:05.000Z"><meta property="article:modified_time" content="2023-04-15T01:58:40.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Conquer Kubernetes in three hours!","image":["https://blog.chcbz.net/"],"datePublished":"2018-12-17T10:12:05.000Z","dateModified":"2023-04-15T01:58:40.000Z","author":[{"@type":"Person","name":"Mr.Chen","url":"https://blog.chcbz.net"}]}</script><title>Conquer Kubernetes in three hours! | Commoner Yunshuike</title><meta name="description" content="​ Preface I promise this is the most exhaustive Kubernetes technical documentation I can tell from the amount of time I've been working behind the scenes. Not much nonsense - the importance of Kubernetes, which firmly occupies the dominant position of container technology, must be self-evident.">
    <link rel="preload" href="/assets/style-9Mn05JWz.css" as="style"><link rel="stylesheet" href="/assets/style-9Mn05JWz.css">
    <link rel="modulepreload" href="/assets/app-5ZyUDSyM.js"><link rel="modulepreload" href="/assets/2018121710.html-UuI1jEvn.js"><link rel="modulepreload" href="/assets/2018121710.html-TtfK8GmM.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js">
    <link rel="prefetch" href="/assets/index.html-lbc7fGuB.js" as="script"><link rel="prefetch" href="/assets/slides.html-okUiZ-zB.js" as="script"><link rel="prefetch" href="/assets/102533089.html-cjmbnXdB.js" as="script"><link rel="prefetch" href="/assets/102695355.html-KnFjCLCF.js" as="script"><link rel="prefetch" href="/assets/103254628.html-B7qCcamr.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-nTVCPxMD.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-4DYuiLWD.js" as="script"><link rel="prefetch" href="/assets/2018121710.html-eJHZm8La.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-m2hKBD2-.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-_i7EIqfQ.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-f0Yxpogp.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-lsK0z0dc.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-B6r6FUOd.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-fF6zs6dI.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-u8iG-X5D.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-005FEyf_.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-HkoOcynt.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-cwSYNXPt.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-Zq9Ue_jM.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-lCGPKy9G.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-e998V6_H.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-xtbsHBwo.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-iFHn9chN.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-0Ik9IROs.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-PLfNXcRY.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-QXRCZdo5.js" as="script"><link rel="prefetch" href="/assets/2023101600.html-DlOTnCaY.js" as="script"><link rel="prefetch" href="/assets/5466524.html-goDfbrun.js" as="script"><link rel="prefetch" href="/assets/5487455.html-Zdq7T3EM.js" as="script"><link rel="prefetch" href="/assets/5491957.html-GM5jNUFf.js" as="script"><link rel="prefetch" href="/assets/5542697.html-WF5qhAtS.js" as="script"><link rel="prefetch" href="/assets/6032924.html-2-SqStFK.js" as="script"><link rel="prefetch" href="/assets/6046168.html-UAgyELVe.js" as="script"><link rel="prefetch" href="/assets/index.html-BxQvivuG.js" as="script"><link rel="prefetch" href="/assets/slides.html-c7heAMho.js" as="script"><link rel="prefetch" href="/assets/index.html-SqfJI5Fn.js" as="script"><link rel="prefetch" href="/assets/disable.html-DoAYDT2w.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-CVU-4eLd.js" as="script"><link rel="prefetch" href="/assets/markdown.html--2yjPdGA.js" as="script"><link rel="prefetch" href="/assets/page.html-lY8QkTyQ.js" as="script"><link rel="prefetch" href="/assets/index.html-6g2wHVi1.js" as="script"><link rel="prefetch" href="/assets/index.html-QuXAjd9b.js" as="script"><link rel="prefetch" href="/assets/202404252334.html-0fz7nJMZ.js" as="script"><link rel="prefetch" href="/assets/102533089.html-Ka1sRsC7.js" as="script"><link rel="prefetch" href="/assets/102695355.html-fNztDKaf.js" as="script"><link rel="prefetch" href="/assets/103254628.html-MPexnJ8L.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-U0VIsFy7.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-Xx9b4n50.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-l8goxP4L.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-cVIN2USn.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-rQ58oEOi.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-H66W-h35.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-WE-xvpm6.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-t-s8Htli.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-1jnHROWC.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-CPUezikX.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-bA8KjgU6.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-PXcSv6-j.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-hYxoT2zv.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-hHcguKn8.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-ZGZWZzu6.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-ZkSdAozL.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-dpEw6Uga.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-SuCYzMhe.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-dph0Vwy8.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-HY8_xVeT.js" as="script"><link rel="prefetch" href="/assets/5466524.html-xkSOnHsU.js" as="script"><link rel="prefetch" href="/assets/5487455.html-mIgbS_ub.js" as="script"><link rel="prefetch" href="/assets/5491957.html-ZlsPIM-U.js" as="script"><link rel="prefetch" href="/assets/5542697.html-sTtN35zk.js" as="script"><link rel="prefetch" href="/assets/6032924.html-djq9NgdR.js" as="script"><link rel="prefetch" href="/assets/6046168.html-WLm5cnNn.js" as="script"><link rel="prefetch" href="/assets/index.html-Kxt8PPH7.js" as="script"><link rel="prefetch" href="/assets/index.html-dmxozKfb.js" as="script"><link rel="prefetch" href="/assets/index.html-C_7jqWIS.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-Zwp3_YBF.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-1oLhd3aV.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-p3Y0oOqN.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-n3b7dptQ.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-hKDnt64r.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-B9ul7Pvo.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-O5sRDQMG.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-Sk6AIYUE.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-h6MQDi9w.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-InhqtGMi.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-5uulFBvS.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-rqnInyfh.js" as="script"><link rel="prefetch" href="/assets/index.html-Dpo-8VD4.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-1HgN0TRl.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-QIcyEpC6.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-TGpUY7rn.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-PVuYqIKL.js" as="script"><link rel="prefetch" href="/assets/index.html-pofDR3Fw.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-Ewh5IL-x.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-SAYC91Jk.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-UIGH1fxE.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-cgvD1PF5.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-p4MDYTwN.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-iYYPsHvd.js" as="script"><link rel="prefetch" href="/assets/index.html-ph0A8Qfl.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-XPmYdKUO.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-FYIiFqcv.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-i-dCpm8d.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-bfbZGbL5.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-D9leOTfh.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-7Sz4Cc-X.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-BhPKwVVT.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-SjTTcRpo.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-NVGvK8LL.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-p4pY70sc.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-3MORbAlO.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html-qSaIKIHk.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-FG8sGokO.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-Sgsl-Ei2.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-jI3Np270.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-VSTWEamV.js" as="script"><link rel="prefetch" href="/assets/index.html-JW0sgYfF.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-BselYZ2_.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-25QbUEro.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-Rqxhhd7H.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-uTBj3bsV.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-nrxp7X_2.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-GFzVjiJU.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-G4gFMxCt.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-MzPBinbM.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-Ak24C8n9.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-CwxdhBj0.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-USi6gxZT.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-YCYivsdk.js" as="script"><link rel="prefetch" href="/assets/index.html-JNhEypM6.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-V6BrPUDV.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-NshRTVpG.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-MxF7heyZ.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-2EqW2wI5.js" as="script"><link rel="prefetch" href="/assets/index.html-qHEU4fyX.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-BJsSHyFl.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-nmG2_yk0.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-IYT2jNwY.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-8OkjLutG.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-kTHl6C6n.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-qMobi4sr.js" as="script"><link rel="prefetch" href="/assets/index.html-yRxVLYCB.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-RdUmNcU2.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-8bkvuAF3.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-C_ldgGGG.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-XzhXhm5V.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-4AmegLrE.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-FoT5YJcL.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-TmaB1rJc.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-BQTxzDwP.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-i-iNQWAS.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-b2y1AZf8.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-8Lnf9TO2.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html-5-AF1K20.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-UhetpJhC.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-cMa-YJJY.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-W1VBGeCX.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-6jl6-HgG.js" as="script"><link rel="prefetch" href="/assets/404.html-xOuGuK5E.js" as="script"><link rel="prefetch" href="/assets/index.html-ibww4veZ.js" as="script"><link rel="prefetch" href="/assets/index.html-ca9-YtNo.js" as="script"><link rel="prefetch" href="/assets/index.html-82wMCphs.js" as="script"><link rel="prefetch" href="/assets/index.html-3LyBxmHk.js" as="script"><link rel="prefetch" href="/assets/index.html-wOYaWU97.js" as="script"><link rel="prefetch" href="/assets/index.html-ibww4veZ.js" as="script"><link rel="prefetch" href="/assets/index.html-tO0VkZ0T.js" as="script"><link rel="prefetch" href="/assets/index.html-4AZFrQ7v.js" as="script"><link rel="prefetch" href="/assets/index.html-08UcJxvf.js" as="script"><link rel="prefetch" href="/assets/index.html-wTpZBs6l.js" as="script"><link rel="prefetch" href="/assets/index.html-82wMCphs.js" as="script"><link rel="prefetch" href="/assets/index.html-tsvBuaJe.js" as="script"><link rel="prefetch" href="/assets/index.html-BUWPfffV.js" as="script"><link rel="prefetch" href="/assets/index.html-xJrJfBe6.js" as="script"><link rel="prefetch" href="/assets/index.html-G4COlT5e.js" as="script"><link rel="prefetch" href="/assets/index.html-o68hD0La.js" as="script"><link rel="prefetch" href="/assets/index.html-9O_6zotR.js" as="script"><link rel="prefetch" href="/assets/index.html-m-_cpzdU.js" as="script"><link rel="prefetch" href="/assets/index.html-7L_go_Er.js" as="script"><link rel="prefetch" href="/assets/index.html-mRj61E1Y.js" as="script"><link rel="prefetch" href="/assets/index.html-dZ6a4TOa.js" as="script"><link rel="prefetch" href="/assets/index.html-Oms-m2oU.js" as="script"><link rel="prefetch" href="/assets/index.html-4j9-jQoc.js" as="script"><link rel="prefetch" href="/assets/index.html-FWhRtBwE.js" as="script"><link rel="prefetch" href="/assets/index.html-gyWZ_yxp.js" as="script"><link rel="prefetch" href="/assets/index.html-Wd3NytVX.js" as="script"><link rel="prefetch" href="/assets/index.html-qTpgm02e.js" as="script"><link rel="prefetch" href="/assets/index.html-5dn56mj2.js" as="script"><link rel="prefetch" href="/assets/index.html-QuQFmg3v.js" as="script"><link rel="prefetch" href="/assets/index.html-YV47FpjC.js" as="script"><link rel="prefetch" href="/assets/index.html-g2UV0xoZ.js" as="script"><link rel="prefetch" href="/assets/index.html-5kEEz3l_.js" as="script"><link rel="prefetch" href="/assets/index.html-0_U2D2qO.js" as="script"><link rel="prefetch" href="/assets/index.html-rBtMyTlr.js" as="script"><link rel="prefetch" href="/assets/index.html-OR0gYaBm.js" as="script"><link rel="prefetch" href="/assets/index.html-4SiXHz2l.js" as="script"><link rel="prefetch" href="/assets/index.html-26rTPcP0.js" as="script"><link rel="prefetch" href="/assets/index.html-jVfdCYiQ.js" as="script"><link rel="prefetch" href="/assets/index.html-1PK73ibj.js" as="script"><link rel="prefetch" href="/assets/index.html-jLIndP4B.js" as="script"><link rel="prefetch" href="/assets/index.html-xgi-vCaH.js" as="script"><link rel="prefetch" href="/assets/index.html-E4oHeplv.js" as="script"><link rel="prefetch" href="/assets/index.html-FzKM0q2s.js" as="script"><link rel="prefetch" href="/assets/index.html-PRAMHLKu.js" as="script"><link rel="prefetch" href="/assets/index.html-otWReHFr.js" as="script"><link rel="prefetch" href="/assets/index.html-nulExq4-.js" as="script"><link rel="prefetch" href="/assets/index.html-kfxuGuGT.js" as="script"><link rel="prefetch" href="/assets/index.html-HRmfyTzV.js" as="script"><link rel="prefetch" href="/assets/index.html--48Ez_Qi.js" as="script"><link rel="prefetch" href="/assets/index.html-Q1nmZqhE.js" as="script"><link rel="prefetch" href="/assets/index.html-2OGzqHVf.js" as="script"><link rel="prefetch" href="/assets/index.html-qGTEvuaj.js" as="script"><link rel="prefetch" href="/assets/index.html-VYTVJRFa.js" as="script"><link rel="prefetch" href="/assets/index.html-1JhBpabb.js" as="script"><link rel="prefetch" href="/assets/index.html-RIanURhk.js" as="script"><link rel="prefetch" href="/assets/index.html-Nv3IWbr8.js" as="script"><link rel="prefetch" href="/assets/index.html-A-qPtfOy.js" as="script"><link rel="prefetch" href="/assets/index.html-lxBBGGWk.js" as="script"><link rel="prefetch" href="/assets/index.html-veZkX2N8.js" as="script"><link rel="prefetch" href="/assets/index.html-7sixlFzu.js" as="script"><link rel="prefetch" href="/assets/index.html-Pkq9BCbt.js" as="script"><link rel="prefetch" href="/assets/index.html-2U0__Nh3.js" as="script"><link rel="prefetch" href="/assets/index.html-0egDcDtZ.js" as="script"><link rel="prefetch" href="/assets/index.html-6B8VHTrg.js" as="script"><link rel="prefetch" href="/assets/index.html-2CxETNd5.js" as="script"><link rel="prefetch" href="/assets/index.html-yfQL_zjO.js" as="script"><link rel="prefetch" href="/assets/index.html--yRDJMtQ.js" as="script"><link rel="prefetch" href="/assets/index.html-t93PsUdU.js" as="script"><link rel="prefetch" href="/assets/index.html-pwdmYhAu.js" as="script"><link rel="prefetch" href="/assets/index.html-H1l2AAoF.js" as="script"><link rel="prefetch" href="/assets/index.html-yZ81lBt6.js" as="script"><link rel="prefetch" href="/assets/index.html-IK8LXdpI.js" as="script"><link rel="prefetch" href="/assets/index.html-haidobA4.js" as="script"><link rel="prefetch" href="/assets/index.html-AMQHHJyO.js" as="script"><link rel="prefetch" href="/assets/index.html-mlfmrgYN.js" as="script"><link rel="prefetch" href="/assets/index.html-dbTCK4DZ.js" as="script"><link rel="prefetch" href="/assets/slides.html-J3mkKp6K.js" as="script"><link rel="prefetch" href="/assets/102533089.html-s6ZdcLCo.js" as="script"><link rel="prefetch" href="/assets/102695355.html-yoG8kqk8.js" as="script"><link rel="prefetch" href="/assets/103254628.html-6iIwZ76n.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-o5EE-TT_.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-jMlBm0J5.js" as="script"><link rel="prefetch" href="/assets/2018121710.html-sRsR_ymu.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-qzcAHPi8.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-g9RcZgHK.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-jYnq50_2.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-nNLLdzji.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-ygS2xua-.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-RyjCwxSu.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-EX5NPZjv.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-QbVYfOdy.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-PwxL4LOM.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-6Iw2CVWl.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-k42noWGf.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-yxiX3L6g.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-3oOiul5q.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-ZkyobVpG.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-j05jhbN-.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-uB36nTdr.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-4j41lBS5.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-tb35Ft_l.js" as="script"><link rel="prefetch" href="/assets/2023101600.html-ZqcFM4jp.js" as="script"><link rel="prefetch" href="/assets/5466524.html-QNKXpBZa.js" as="script"><link rel="prefetch" href="/assets/5487455.html-Gg6fCYgZ.js" as="script"><link rel="prefetch" href="/assets/5491957.html-gIKYKW9Z.js" as="script"><link rel="prefetch" href="/assets/5542697.html-8DUyD9GD.js" as="script"><link rel="prefetch" href="/assets/6032924.html-7rMHBni6.js" as="script"><link rel="prefetch" href="/assets/6046168.html-vaKWyL-y.js" as="script"><link rel="prefetch" href="/assets/index.html-rMMLYOcW.js" as="script"><link rel="prefetch" href="/assets/slides.html-gnxAjqwC.js" as="script"><link rel="prefetch" href="/assets/index.html-l9kNAMxN.js" as="script"><link rel="prefetch" href="/assets/disable.html-bQrhevoH.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-8w8w7Od0.js" as="script"><link rel="prefetch" href="/assets/markdown.html-aeov_Wne.js" as="script"><link rel="prefetch" href="/assets/page.html-MnKGOn6-.js" as="script"><link rel="prefetch" href="/assets/index.html-eXxWEzUs.js" as="script"><link rel="prefetch" href="/assets/index.html--FlTFKNU.js" as="script"><link rel="prefetch" href="/assets/202404252334.html-bkYMAcmK.js" as="script"><link rel="prefetch" href="/assets/102533089.html-Ijz9avDd.js" as="script"><link rel="prefetch" href="/assets/102695355.html-BtHPHd6H.js" as="script"><link rel="prefetch" href="/assets/103254628.html-uYcB00Wl.js" as="script"><link rel="prefetch" href="/assets/2018121415.html-Xc-ZNlFY.js" as="script"><link rel="prefetch" href="/assets/2018121511.html-dld2CPky.js" as="script"><link rel="prefetch" href="/assets/2018122117.html-soA2cSvN.js" as="script"><link rel="prefetch" href="/assets/2019022611.html-2gZIX8pD.js" as="script"><link rel="prefetch" href="/assets/2019022709.html-nzuoEfny.js" as="script"><link rel="prefetch" href="/assets/2019031018.html-9u4ye-I9.js" as="script"><link rel="prefetch" href="/assets/2019041110.html-nhie_X8z.js" as="script"><link rel="prefetch" href="/assets/2019060114.html-GkapCMIt.js" as="script"><link rel="prefetch" href="/assets/2020041819.html-MXR1Qfhc.js" as="script"><link rel="prefetch" href="/assets/2020042522.html-Y8k7Ol5d.js" as="script"><link rel="prefetch" href="/assets/2023032311.html-GLihvdHu.js" as="script"><link rel="prefetch" href="/assets/2023040509.html-dVtwzfvf.js" as="script"><link rel="prefetch" href="/assets/2023040520.html-qOw6vOz_.js" as="script"><link rel="prefetch" href="/assets/2023040623.html-JSHdre4q.js" as="script"><link rel="prefetch" href="/assets/2023041222.html-gqaNc1oe.js" as="script"><link rel="prefetch" href="/assets/2023042323.html-WsJoNZtH.js" as="script"><link rel="prefetch" href="/assets/2023042621.html-pnHp6zTI.js" as="script"><link rel="prefetch" href="/assets/2023042823.html-SShfvLMT.js" as="script"><link rel="prefetch" href="/assets/2023052511.html-E_1TZRVB.js" as="script"><link rel="prefetch" href="/assets/2023062500.html-3IDcCRqA.js" as="script"><link rel="prefetch" href="/assets/5466524.html-ArHIqMWR.js" as="script"><link rel="prefetch" href="/assets/5487455.html-zfvQlyNL.js" as="script"><link rel="prefetch" href="/assets/5491957.html-SR_hHEGt.js" as="script"><link rel="prefetch" href="/assets/5542697.html-FVKmCtrp.js" as="script"><link rel="prefetch" href="/assets/6032924.html-_hLfPtJU.js" as="script"><link rel="prefetch" href="/assets/6046168.html-v2pxyfiI.js" as="script"><link rel="prefetch" href="/assets/index.html-OfnRvO1B.js" as="script"><link rel="prefetch" href="/assets/index.html-l9e7hzY_.js" as="script"><link rel="prefetch" href="/assets/index.html-OXneLtHE.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-yc3salJm.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-MwCe7QzP.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-SrFu2kjj.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-K1VO1e14.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-tk0AFT9Z.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-3SssSRuk.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-BkSpnwlD.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-VBA0YRLE.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-ZMG_NSwn.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-oDWYJ6mN.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-PX_ULxOx.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-oeYDjOV5.js" as="script"><link rel="prefetch" href="/assets/index.html-sdktrw8a.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-E8L2VS_3.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-7wjHunoI.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-Hiejd_fC.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-hpfWHxhk.js" as="script"><link rel="prefetch" href="/assets/index.html-9MVibQIT.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-_LuwHjKq.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-6qTJOnG9.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-QL7oTkuH.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-BdXZVPWg.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-UnqQ5eEV.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-2_pHJQNt.js" as="script"><link rel="prefetch" href="/assets/index.html-BdPLgMwn.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-VzqXBuVQ.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-yxY9mrF3.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-7JViUBXy.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-JD9LrLHl.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-yU8mNvLq.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-kirURqPe.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-GSP2Cdzn.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-_4Ro8K6g.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-vKkatxcC.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-8t1bttpc.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-EH37CQtr.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html--EfJ61Il.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-VUE76o-V.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-BlNzY1tS.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-KAsUDrU-.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-tdLIkQ1I.js" as="script"><link rel="prefetch" href="/assets/index.html-LXYWDEUd.js" as="script"><link rel="prefetch" href="/assets/calculus_p1.html-bX-1K3Wg.js" as="script"><link rel="prefetch" href="/assets/calculus_p10.html-fdqjvzLv.js" as="script"><link rel="prefetch" href="/assets/calculus_p11.html-VVMYJ-kW.js" as="script"><link rel="prefetch" href="/assets/calculus_p12.html-jzDpw-Du.js" as="script"><link rel="prefetch" href="/assets/calculus_p2.html-wPqHXfm9.js" as="script"><link rel="prefetch" href="/assets/calculus_p3.html-vgLHLYjb.js" as="script"><link rel="prefetch" href="/assets/calculus_p4.html-I74XLFPT.js" as="script"><link rel="prefetch" href="/assets/calculus_p5.html-XiLLuAAm.js" as="script"><link rel="prefetch" href="/assets/calculus_p6.html-xNhWiYM5.js" as="script"><link rel="prefetch" href="/assets/calculus_p7.html-apPDX1hP.js" as="script"><link rel="prefetch" href="/assets/calculus_p8.html-enYvMSpT.js" as="script"><link rel="prefetch" href="/assets/calculus_p9.html-dAkQnrHR.js" as="script"><link rel="prefetch" href="/assets/index.html-UKNdcxtq.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p1.html-VqnU8IWD.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p2.html-dCH3P-nw.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p3.html-wbqQG9sY.js" as="script"><link rel="prefetch" href="/assets/deep_learn_p4.html-oWQ-6bt6.js" as="script"><link rel="prefetch" href="/assets/index.html-_cCNKsg9.js" as="script"><link rel="prefetch" href="/assets/equations_p1.html-2CtYOBhF.js" as="script"><link rel="prefetch" href="/assets/equations_p2.html-NApJPdIZ.js" as="script"><link rel="prefetch" href="/assets/equations_p3.html-n5CE0VaT.js" as="script"><link rel="prefetch" href="/assets/equations_p4.html-EmKCw3kt.js" as="script"><link rel="prefetch" href="/assets/equations_p5.html-X0QLcqcM.js" as="script"><link rel="prefetch" href="/assets/equations_p6.html-MCVH0tFd.js" as="script"><link rel="prefetch" href="/assets/index.html-DLTBVrmo.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p1.html-7hP0SOBb.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p10.html-OSjJLKT3.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p11.html-2-J08yu_.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p12.html-uakiiVC1.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p13.html-QASzYXXR.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p14.html-dqOGAP6b.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p15.html-JS34uZcD.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p16.html-h2OAQ3vp.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p2.html-y0vwyv_F.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p3.html-k6TyFvX0.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p4.html-tQudhSyl.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p5.html-mq8iKi9s.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p6.html-MZX7_iO6.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p7.html-G807oEXe.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p8.html-30xFFFHa.js" as="script"><link rel="prefetch" href="/assets/linear_algebra_p9.html-g0wsdl2z.js" as="script"><link rel="prefetch" href="/assets/404.html-5HiG5_qk.js" as="script"><link rel="prefetch" href="/assets/index.html-0fCskzDr.js" as="script"><link rel="prefetch" href="/assets/index.html-kGy0dpvS.js" as="script"><link rel="prefetch" href="/assets/index.html-I7sDk935.js" as="script"><link rel="prefetch" href="/assets/index.html-XHVsMUrp.js" as="script"><link rel="prefetch" href="/assets/index.html-xmT_CCAP.js" as="script"><link rel="prefetch" href="/assets/index.html-0fCskzDr.js" as="script"><link rel="prefetch" href="/assets/index.html-OlBiSeCY.js" as="script"><link rel="prefetch" href="/assets/index.html-lSeu6F_C.js" as="script"><link rel="prefetch" href="/assets/index.html-4GNNLEsm.js" as="script"><link rel="prefetch" href="/assets/index.html-TQ0MKVTS.js" as="script"><link rel="prefetch" href="/assets/index.html-I7sDk935.js" as="script"><link rel="prefetch" href="/assets/index.html--QGWQAy5.js" as="script"><link rel="prefetch" href="/assets/index.html-6wMrenD3.js" as="script"><link rel="prefetch" href="/assets/index.html-NeByVx3K.js" as="script"><link rel="prefetch" href="/assets/index.html-R9NKf2SL.js" as="script"><link rel="prefetch" href="/assets/index.html-jYkuqTfe.js" as="script"><link rel="prefetch" href="/assets/index.html-dFwpS-t7.js" as="script"><link rel="prefetch" href="/assets/index.html-6S_z8jiM.js" as="script"><link rel="prefetch" href="/assets/index.html--h48Inu_.js" as="script"><link rel="prefetch" href="/assets/index.html-bmAN9KBe.js" as="script"><link rel="prefetch" href="/assets/index.html-y7CosQPl.js" as="script"><link rel="prefetch" href="/assets/index.html-0CoXYzGF.js" as="script"><link rel="prefetch" href="/assets/index.html-gPmEaxDl.js" as="script"><link rel="prefetch" href="/assets/index.html-nZW_eguA.js" as="script"><link rel="prefetch" href="/assets/index.html-7O2HYgnY.js" as="script"><link rel="prefetch" href="/assets/index.html-qNF9on_l.js" as="script"><link rel="prefetch" href="/assets/index.html-BQZaZhVu.js" as="script"><link rel="prefetch" href="/assets/index.html-drakyYZY.js" as="script"><link rel="prefetch" href="/assets/index.html-OHTk5us3.js" as="script"><link rel="prefetch" href="/assets/index.html-VaBOWQ2S.js" as="script"><link rel="prefetch" href="/assets/index.html-idoYlEkM.js" as="script"><link rel="prefetch" href="/assets/index.html-UU9FCgEx.js" as="script"><link rel="prefetch" href="/assets/index.html-BLO0tGxk.js" as="script"><link rel="prefetch" href="/assets/index.html-qT49xuno.js" as="script"><link rel="prefetch" href="/assets/index.html-SLYBDt9r.js" as="script"><link rel="prefetch" href="/assets/index.html-ZbWpcSSY.js" as="script"><link rel="prefetch" href="/assets/index.html-aN9QBuMa.js" as="script"><link rel="prefetch" href="/assets/index.html-5fX4-HHi.js" as="script"><link rel="prefetch" href="/assets/index.html-b7NC3DTm.js" as="script"><link rel="prefetch" href="/assets/index.html-PHaK8NMb.js" as="script"><link rel="prefetch" href="/assets/index.html-Vatbh4qv.js" as="script"><link rel="prefetch" href="/assets/index.html-aHK_y0G3.js" as="script"><link rel="prefetch" href="/assets/index.html--BlEic-2.js" as="script"><link rel="prefetch" href="/assets/index.html-t_SMODgu.js" as="script"><link rel="prefetch" href="/assets/index.html-l9i8fzgd.js" as="script"><link rel="prefetch" href="/assets/index.html-7soScVZy.js" as="script"><link rel="prefetch" href="/assets/index.html-6vBkzqxF.js" as="script"><link rel="prefetch" href="/assets/index.html-v3LTQQIK.js" as="script"><link rel="prefetch" href="/assets/index.html-buLSE6Ts.js" as="script"><link rel="prefetch" href="/assets/index.html-mzy4uT44.js" as="script"><link rel="prefetch" href="/assets/index.html-IkOR9J0O.js" as="script"><link rel="prefetch" href="/assets/index.html-12IROKUq.js" as="script"><link rel="prefetch" href="/assets/index.html-zl1WqX2f.js" as="script"><link rel="prefetch" href="/assets/index.html-iMJRPIt2.js" as="script"><link rel="prefetch" href="/assets/index.html-uUSkrrU6.js" as="script"><link rel="prefetch" href="/assets/index.html-t7ThS6Js.js" as="script"><link rel="prefetch" href="/assets/index.html-nJnm0gU9.js" as="script"><link rel="prefetch" href="/assets/index.html-gb50PU3d.js" as="script"><link rel="prefetch" href="/assets/index.html-0MCg5xg6.js" as="script"><link rel="prefetch" href="/assets/index.html-ibmi2LmD.js" as="script"><link rel="prefetch" href="/assets/index.html-1un7U6_Q.js" as="script"><link rel="prefetch" href="/assets/index.html-GLHIpbMz.js" as="script"><link rel="prefetch" href="/assets/index.html-OsXlOlt1.js" as="script"><link rel="prefetch" href="/assets/index.html-uPGZsS5E.js" as="script"><link rel="prefetch" href="/assets/index.html-YTpF8cZO.js" as="script"><link rel="prefetch" href="/assets/index.html-5SF17J0s.js" as="script"><link rel="prefetch" href="/assets/index.html-kDmDYPwh.js" as="script"><link rel="prefetch" href="/assets/index.html-KBAyWs8E.js" as="script"><link rel="prefetch" href="/assets/index.html-_H5JLUd8.js" as="script"><link rel="prefetch" href="/assets/index.html-R8nzvar-.js" as="script"><link rel="prefetch" href="/assets/index.html-TYkI_EMF.js" as="script"><link rel="prefetch" href="/assets/index.html-NWLvmYVu.js" as="script"><link rel="prefetch" href="/assets/index.html-mv1fdAWG.js" as="script"><link rel="prefetch" href="/assets/index.html-BMdt8Uz8.js" as="script"><link rel="prefetch" href="/assets/index.html-Z3GNlmTX.js" as="script"><link rel="prefetch" href="/assets/giscus-NkhROb6B.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-08_zHRDQ.js" as="script"><link rel="prefetch" href="/assets/style-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/docsearch-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/index-QOy62Fup.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/en/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">Commoner Yunshuike</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="home page" class="vp-link nav-link nav-link" href="/en/"><span class="font-icon icon iconfont icon-home" style=""></span>home page<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Article" class="vp-link nav-link active nav-link active" href="/en/article/"><span class="font-icon icon iconfont icon-discover" style=""></span>Article<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Video" class="vp-link nav-link nav-link" href="/en/video/"><span class="font-icon icon iconfont icon-actions" style=""></span>Video<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Handbook" class="vp-link nav-link nav-link" href="/en/handbook/"><span class="font-icon icon iconfont icon-repo" style=""></span>Handbook<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button type="button" class="dropdown-title" aria-label="Select language"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="简体中文" class="vp-link nav-link nav-link" href="/article/2018121710.html"><!---->简体中文<!----></a></li><li class="dropdown-item"><a aria-label="English" class="vp-link nav-link active nav-link active" href="/en/article/2018121710.html"><!---->English<!----></a></li></ul></button></div></div><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/chcbz/chcbz.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search Documentation"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search Documentation</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="home page" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/en/"><span class="font-icon icon iconfont icon-home" style=""></span>home page<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon iconfont icon-actions" style=""></span><span class="vp-sidebar-title">video</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="vp-sidebar-title">1. The essence of linear algebra</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="vp-sidebar-title">2. The Essence of Calculus</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-relation" style=""></span><span class="vp-sidebar-title">3. Deep Learning</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-function" style=""></span><span class="vp-sidebar-title">4. Differential Equations</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><!--[--><a aria-label="Slide page" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/en/slides.html"><span class="font-icon icon iconfont icon-slides" style=""></span>Slide page<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-creative" style=""></span>Conquer Kubernetes in three hours!</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://blog.chcbz.net" target="_blank" rel="noopener noreferrer">Mr.Chen</a></span><span property="author" content="Mr.Chen"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2018-12-17T10:12:05.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 27 min</span><meta property="timeRequired" content="PT27M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category7 clickable" role="navigation">article</span><!--]--><meta property="articleSection" content="article"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag4 clickable" role="navigation">Java</span><span class="page-tag-item tag3 clickable" role="navigation">Kubernetes</span><!--]--><meta property="keywords" content="Java,Kubernetes"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#preface">Preface</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#application-demo">Application Demo</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#run-the-microservice-based-application-on-the-computer">Run the microservice-based application on the computer</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#setting-up-a-local-deployment-of-react">Setting up a local deployment of React</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#prepare-a-production-environment-for-react-applications">Prepare a production environment for React applications</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#serving-static-files-with-nginx">Serving static files with Nginx</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#check-code">Check code</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#building-a-spring-web-application">Building a Spring web application</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#package-the-application-into-a-jar-file">Package the application into a Jar file</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#start-the-application">Start the application</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#check-for-error-codes">Check for error codes</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#define-attributes">Define attributes</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#building-the-python-application">Building the Python application</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#install-dependencies">Install dependencies</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#start-application">Start application</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#check-python-code">Check python code</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#create-container-images-for-each-service">Create container images for each service</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#serving-react-static-files-through-a-virtual-machine">Serving React static files through a virtual machine</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#serving-react-static-files-through-the-container">Serving React static files through the container</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#building-container-images-for-react-apps-introduction-to-docker">Building Container Images for React Apps (Introduction to Docker)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#define-the-dockerfile-for-the-frontend">Define the Dockerfile for the frontend</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#build-and-push-container">Build and push container</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#run-the-container">Run the container</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#dockerignore-file">Dockerignore file</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#building-a-container-image-for-a-java-application">Building a container image for a Java application</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#create-a-container-image-for-a-python-application">Create a container image for a Python application</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#test-the-containerized-application">Test the containerized application</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#trivia-questions-why-kubernetes">Trivia Questions - Why Kubernetes?</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#introduction-to-kubernetes">Introduction to Kubernetes</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#what-is-kubernetes">What is Kubernetes?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#abstraction-of-underlying-infrastructure">Abstraction of underlying infrastructure</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#standardized-cloud-service-provider">Standardized cloud service provider</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-practice-pod">Kubernetes Practice - Pod</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#install-and-start-minikube">Install and start Minikube</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#pods">Pods</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#pod-definition">Pod definition</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#create-a-pod-for-sa-frontend">Create a Pod for SA Frontend</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#accessing-the-application-externally">Accessing the application externally</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#the-wrong-way-to-scale">The Wrong Way to Scale</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#summary-pods">Summary Pods</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-practice-service">Kubernetes Practice - Service</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#label">Label</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#service-definition">Service definition</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#summary-of-services">Summary of Services</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-practice-deployment">Kubernetes Practice - Deployment</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#deployment-practice">Deployment practice</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#deployment-definition">Deployment definition</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#benefit-1-adopt-zero-downtime-deployment-zero-downtime">Benefit 1: Adopt zero-downtime deployment (Zero-downtime)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#confirm-deployment">Confirm Deployment</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#situation-behind-rollingupdate">Situation behind &quot;RollingUpdate&quot;</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#benefit-2-roll-back-to-the-previous-state">Benefit 2: Roll back to the previous state</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#kubernetes-and-everything-else-in-action">Kubernetes and everything else in action</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#deploy-sa-logic">Deploy SA-Logic</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-logic-service">SA Logic Service</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-webapp-deployment">SA-WebApp deployment</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#kube-dns">KUBE-DNS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-webapp-deployment-continued">SA WebApp Deployment (continued)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#sa-webapp-service">SA-WebApp Service</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#full-text-summary">Full text summary</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#covered-in-this-article">Covered in this article</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><p>​</p><h2 id="preface" tabindex="-1"><a class="header-anchor" href="#preface" aria-hidden="true">#</a> Preface</h2><p>I promise this is the most exhaustive Kubernetes technical documentation I can tell from the amount of time I&#39;ve been working behind the scenes. Not much nonsense - the importance of Kubernetes, which firmly occupies the dominant position of container technology, must be self-evident.</p><figure><img src="/assets/img-20230408164138-5XXB39WD.png" alt="Kubernetes" tabindex="0" loading="lazy"><figcaption>Kubernetes</figcaption></figure><p>The following is the translation:</p><p>Why would a bank pay me a fortune to do something so simple in Kubernetes? - I&#39;ve always wondered about this because I thought anyone could learn this technique in 3 hours.</p><p>If you doubt what I say, come and challenge it! **After reading this article, you can definitely learn how to run microservices-based applications on a Kubernetes cluster.**I promise you can do it because that&#39;s how I introduce Kubernetes to my clients.</p><p>How are the tutorials in this article different from other resources? with large differences. Most tutorials start with the simplest: Kubernetes concepts and kubectl commands. This article is based on the reader&#39;s understanding of application development, microservices, and Docker containers.</p><p>In this article, we will cover the following:</p><ul><li><p>Running microservices-based applications on computers;</p></li><li><p>Build a container image for each service of the microservice application;</p></li><li><p>Basic introduction to Kubernetes;</p></li><li><p>Deploy microservices-based applications inside a Kubernetes-managed cluster.</p></li></ul><p>Through step-by-step in-depth study, everyone can understand the simplicity and ease of use of Kubernetes. Kubernetes is easy to master only if you understand the context in which it will be used. Without further ado, let&#39;s get started.</p><h2 id="application-demo" tabindex="-1"><a class="header-anchor" href="#application-demo" aria-hidden="true">#</a> Application Demo</h2><p>The following application has a function: it accepts one sentence per input; using text analysis, calculates the sentiment expressed by the sentence.</p><figure><img src="/assets/img-20230408164516-dfk621Eq.gif" alt="Figure 1: Sentiment Analysis Network Application" tabindex="0" loading="lazy"><figcaption>Figure 1: Sentiment Analysis Network Application</figcaption></figure><p>From a technical point of view, the application consists of 3 microservices, each with specific functionality:</p><ul><li><p>SA-Frontend: Frontend, Nginx web server, serving ReactJS static files;</p></li><li><p>SA-WebAp: web application, a Java web application that handles requests from the front end;</p></li><li><p>SA-Logic: Logic processing, Python application to perform sentiment analysis.</p></li></ul><p>You need to understand that microservices cannot work independently, they introduce a &quot;separation of concerns&quot; (separation of concerns), but they still need to interact with each other.</p><figure><img src="/assets/img-20230408164616-W-O4plhl.gif" alt="Figure 2: Data flow in sentiment analysis network application" tabindex="0" loading="lazy"><figcaption>Figure 2: Data flow in sentiment analysis network application</figcaption></figure><p>We can describe this interaction in terms of data flow between microservices:</p><ul><li><p>the client application requests the initial page index.html (the index.html page will in turn load the script of the ReactJS application);</p></li><li><p>User interaction with the application triggers a request to the Spring web application;</p></li><li><p>The Spring web application sends the request to the Python application for sentiment analysis;</p></li><li><p>The Python application calculates the sentiment value and returns the result;</p></li><li><p>The Spring web app returns the result to the React app (which then displays the result to the user).</p></li></ul><p>Click here to download the code for these applications: <code>https://github.com/rinormaloku/k8s-mastery</code>. Now you can clone this code repository, and then we will do more exciting things.</p><h2 id="run-the-microservice-based-application-on-the-computer" tabindex="-1"><a class="header-anchor" href="#run-the-microservice-based-application-on-the-computer" aria-hidden="true">#</a> Run the microservice-based application on the computer</h2><p>We need to start the 3 required services. Let&#39;s start with the most interesting part - the front-end application.</p><h3 id="setting-up-a-local-deployment-of-react" tabindex="-1"><a class="header-anchor" href="#setting-up-a-local-deployment-of-react" aria-hidden="true">#</a> Setting up a local deployment of React</h3><p>In order to run a React application, first you need to have NodeJS and NPM installed on your computer. Once these are installed, navigate to the directory sa-frontend in a terminal. Then run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This command will download all the Javascript dependencies of the React application into the folder node_modules (all dependencies are defined in the package.json file). After all dependencies are resolved, run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>that&#39;s it! We have our React application running and can now access it on the default port localhost:3000. You can modify the code freely and observe the immediate effect from the browser. The technology of hot module replacement (that is, replacing modules at runtime to reduce the number of page refreshes) is used here, which can reduce the work of front-end development.</p><h3 id="prepare-a-production-environment-for-react-applications" tabindex="-1"><a class="header-anchor" href="#prepare-a-production-environment-for-react-applications" aria-hidden="true">#</a> Prepare a production environment for React applications</h3><p>In order to build a production environment, we need to create a static web page of the application and serve it through a web server.</p><p>To build a React application, first navigate to the directory sa-frontend in a terminal. Then run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> run build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This command will generate a folder called &quot;build&quot; in the project&#39;s file directory. This folder contains all the static files required by the ReactJS application.</p><h3 id="serving-static-files-with-nginx" tabindex="-1"><a class="header-anchor" href="#serving-static-files-with-nginx" aria-hidden="true">#</a> Serving static files with Nginx</h3><p>First install and start the Nginx web server. Then move the files inside the sa-frontend/build directory to [nginx installation directory]/html.</p><p>In this way, we can access the index.html file through [nginx installation directory]/html/index.html, which is the default file of Nginx service.</p><p>By default, the Nginx web server listens on port 80. You can specify a different port by modifying the server.listen field in the [nginx installation directory]/conf/nginx.conf file.</p><p>Open a browser and access port 80 to see that the ReactJS application loaded successfully.</p><figure><img src="/assets/img-20230408164933-WOqfKvBX.png" alt="Figure 3: React application served by Nginx" tabindex="0" loading="lazy"><figcaption>Figure 3: React application served by Nginx</figcaption></figure><p>Type your sentence in the input box &quot;Type your sentence&quot; and click the SEND button, but the page returns an error 404 (you can check your browser&#39;s console). Why? Let&#39;s examine the code.</p><h3 id="check-code" tabindex="-1"><a class="header-anchor" href="#check-code" aria-hidden="true">#</a> Check code</h3><p>We can see in the App.js file that clicking the &quot;SEND&quot; button triggers analyzeSentence. The code of this method is as follows (we have numbered each piece of code &quot;# number&quot;, and the specific explanation is as follows):</p><div class="language-JavaScript line-numbers-mode" data-ext="JavaScript"><pre class="language-JavaScript"><code>analyzeSentence() {
     fetch(&#39;http://localhost:8080/sentiment&#39;, { // #1
         method: &#39;POST&#39;,
         headers: {
             &#39;Content-Type&#39;: &#39;application/json&#39;
         },
         body: JSON.stringify({
                        sentence: this.textField.getValue()})// #2
     })
         .then(response =&gt; response.json())
         .then(data =&gt; this.setState(data)); // #3
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1: The URL for the POST method call (the application should listen for access on this URL);<br> #2: The request body sent to the application looks like this:</p></blockquote><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>{
     sentence: “I like Yogobella!”
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#3: The return value will update the state of the component, and the state change will re-render the component. If we receive data (i.e. a JSON object containing the sentence entered by the user and the polarity), then we display the component polarityComponent because the condition is met and we can define the component as follows:</p></blockquote><div class="language-JavaScript line-numbers-mode" data-ext="JavaScript"><pre class="language-JavaScript"><code>const polarityComponent = this.state.polarity !== undefined ?
     &lt;Polarity sentence={this.state.sentence}
               polarity={this.state.polarity}/&gt; :
     null;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Everything looks fine. But what are we missing? You may have noticed that we didn&#39;t set anything on localhost:8080! We must start the Spring web application listening on this port!</p><figure><img src="/assets/img-20230408165252-z_NFJ38x.png" alt="Figure 4: Missing Spring web application microservice" tabindex="0" loading="lazy"><figcaption>Figure 4: Missing Spring web application microservice</figcaption></figure><h2 id="building-a-spring-web-application" tabindex="-1"><a class="header-anchor" href="#building-a-spring-web-application" aria-hidden="true">#</a> Building a Spring web application</h2><p>In order to set up a Spring web application, you must install JDK8 and Maven, and set their environment variables. Once set, we move on to the next section.</p><h3 id="package-the-application-into-a-jar-file" tabindex="-1"><a class="header-anchor" href="#package-the-application-into-a-jar-file" aria-hidden="true">#</a> Package the application into a Jar file</h3><p>Enter the sa-webapp directory in the terminal and run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mvn <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This command will generate a folder called target in the directory sa-webapp. There is a packaged Java application package in the target folder: &#39;sentiment-analysis-web-0.0.1-SNAPSHOT.jar&#39;.</p><h3 id="start-the-application" tabindex="-1"><a class="header-anchor" href="#start-the-application" aria-hidden="true">#</a> Start the application</h3><p>Enter the target directory and start the application with the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> sentiment-analysis-web-0.0.1-SNAPSHOT.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Wait... something went wrong. The application fails to start, and we can see the following exception information:</p><blockquote><p>Error creating bean with name &#39;sentimentController&#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;sa.logic.api.url&#39; in value &quot;${sa.logic.api.url }&quot;</p></blockquote><p>The important information shown here is sa.logic.api.url in the SentimentController. Let&#39;s examine this code.</p><h3 id="check-for-error-codes" tabindex="-1"><a class="header-anchor" href="#check-for-error-codes" aria-hidden="true">#</a> Check for error codes</h3><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>@CrossOrigin(origins = &quot;*&quot;)
@RestController
public class SentimentController {
@Value(&quot;${sa.logic.api.url}&quot;) // #1
     private String saLogicApiUrl;
@PostMapping(&quot;/sentiment&quot;)
     public SentimentDto sentimentAnalysis(
                             @RequestBody SentenceDto sentenceDto) {
         RestTemplate restTemplate = new RestTemplate();
return restTemplate. postForEntity(
                 saLogicApiUrl + &quot;/analyse/sentiment&quot;, // #2
                 sentenceDto, SentimentDto.class)
                 .getBody();
     }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1: SentimentController has a field called saLogicApiUrl. The assignment of this field is defined by the sa.logic.api.url property.<br> #2: The saLogicApiUrl is concatenated with the value &quot;/analyse/sentiment&quot; to form the URL for the Sentiment Analysis request.</p></blockquote><h3 id="define-attributes" tabindex="-1"><a class="header-anchor" href="#define-attributes" aria-hidden="true">#</a> Define attributes</h3><p>The default property resource in Spring is application.properties (the specific location is in sa-webapp/src/main/resources). But this is not the only way to define properties, we can complete the property definition through the previous command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> sentiment-analysis-web-0.0.1-SNAPSHOT.jar
      <span class="token parameter variable">--sa.logic.api.url</span><span class="token operator">=</span>WHAT.IS.THE.SA.LOGIC.API.URL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>This property should be initialized with a value defined by the Python application at runtime, so that the Spring web application knows where to pass the information at runtime.</p><p>For simplicity, let&#39;s assume the Python application is running on localhost:5000. Please remember!</p><p>Run the following command, and then we look at the last service: the Python application.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> sentiment-analysis-web-0.0.1-SNAPSHOT.jar
      <span class="token parameter variable">--sa.logic.api.url</span><span class="token operator">=</span>http://localhost:5000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/img-20230408170828-K0XZcry3.png" alt="Service deployment status" tabindex="0" loading="lazy"><figcaption>Service deployment status</figcaption></figure><h2 id="building-the-python-application" tabindex="-1"><a class="header-anchor" href="#building-the-python-application" aria-hidden="true">#</a> Building the Python application</h2><p>In order to start the Python application, first we need to install Python3 and Pip, and set their environment variables.</p><h3 id="install-dependencies" tabindex="-1"><a class="header-anchor" href="#install-dependencies" aria-hidden="true">#</a> Install dependencies</h3><p>Go to sa-logic/sa (code repository) in a terminal and run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt
python <span class="token parameter variable">-m</span> textblob.download_corpora
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="start-application" tabindex="-1"><a class="header-anchor" href="#start-application" aria-hidden="true">#</a> Start application</h3><p>After installing the dependencies with Pip, we can start the application by running the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python sentiment_analysis.py
* Running on http://0.0.0.0:5000/ <span class="token punctuation">(</span>Press CTRL+C to quit<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>This means the application is started and listening for HTTP requests on port 5000 of localhost.</p><h3 id="check-python-code" tabindex="-1"><a class="header-anchor" href="#check-python-code" aria-hidden="true">#</a> Check python code</h3><p>Let&#39;s examine the code and see what the Python application that handles the logic part is doing:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> textblob <span class="token keyword">import</span> TextBlob
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> request<span class="token punctuation">,</span> jsonify
app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span> <span class="token comment">#1</span>
<span class="token decorator annotation punctuation">@app</span><span class="token punctuation">.</span> route<span class="token punctuation">(</span><span class="token string">&quot;/analyse/sentiment&quot;</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#2</span>
<span class="token keyword">def</span> <span class="token function">analyze_sentiment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
     sentence <span class="token operator">=</span> request<span class="token punctuation">.</span> get_json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;sentence&#39;</span><span class="token punctuation">]</span> <span class="token comment">#3</span>
     polarity <span class="token operator">=</span> TextBlob<span class="token punctuation">(</span>sentence<span class="token punctuation">)</span><span class="token punctuation">.</span> sentences<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span> polarity <span class="token comment">#4</span>
     <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token comment">#5</span>
         sentence<span class="token operator">=</span>sentence<span class="token punctuation">,</span>
         polarity<span class="token operator">=</span>polarity
     <span class="token punctuation">)</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
     app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span> <span class="token comment">#6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1: Instantiate a Flask object;<br> #2: Define the access path for POST requests;<br> #3: Extract the &quot;sentence&quot; attribute from the request body;<br> #4: Initialize an anonymous TextBlob object and get the polarity from the first sentence (we only have one);<br> #5: return sentence and polarity in corresponding body;<br> #6: Run the flask object application to listen for requests on localhost:5000.</p></blockquote><p>All the services are set up to talk to each other. Try reopening localhost:80 on the frontend.</p><figure><img src="/assets/img-20230408171154-hmECa1Ei.png" alt="Figure 6: Microservice architecture completed" tabindex="0" loading="lazy"><figcaption>Figure 6: Microservice architecture completed</figcaption></figure><p>In the following sections, we will describe how to start these services inside Docker containers, as this is a prerequisite for running these services inside a Kubernetes cluster.</p><h2 id="create-container-images-for-each-service" tabindex="-1"><a class="header-anchor" href="#create-container-images-for-each-service" aria-hidden="true">#</a> Create container images for each service</h2><p>Kubernetes is a container management platform. It is conceivable that we need containers to manage them. But what is a container? The best answer from the official Docker documentation is as follows:</p><blockquote><p>A container image is a lightweight, self-contained, executable package that contains everything to run: code, runtime, system tools, system libraries, settings. For Linux- and Windows-based applications, containerized software can run regardless of the environment.</p></blockquote><p>This means that containers can run on any computer, even a production server, without any difference.</p><p>To illustrate this more visually, let&#39;s compare a React application running on a virtual machine versus a container.</p><h3 id="serving-react-static-files-through-a-virtual-machine" tabindex="-1"><a class="header-anchor" href="#serving-react-static-files-through-a-virtual-machine" aria-hidden="true">#</a> Serving React static files through a virtual machine</h3><p>Disadvantages of using virtual machines include:</p><ul><li><p>Resource inefficient, requiring a fully fledged operating system for each virtual machine;</p></li><li><p>There is a dependency on the platform. Features that work well on a local machine may not work properly on a production server;</p></li><li><p>Heavier and slower to scale than containers.</p></li></ul><figure><img src="/assets/img-20230408171317-N-0xzjbZ.png" alt="Figure 7: Nginx web server serving static files on virtual machine" tabindex="0" loading="lazy"><figcaption>Figure 7: Nginx web server serving static files on virtual machine</figcaption></figure><h3 id="serving-react-static-files-through-the-container" tabindex="-1"><a class="header-anchor" href="#serving-react-static-files-through-the-container" aria-hidden="true">#</a> Serving React static files through the container</h3><p>Advantages of using containers include:</p><ul><li><p>Very resource efficient, using the host OS with the help of Docker;</p></li><li><p>No dependency on platform. A container that works on a local machine will work fine on any machine;</p></li><li><p>Provide lightweight services through the image layer.</p></li></ul><figure><img src="/assets/img-20230408171405-0LnRVAl3.png" alt="Figure 8: Nginx web server serving static files inside the container" tabindex="0" loading="lazy"><figcaption>Figure 8: Nginx web server serving static files inside the container</figcaption></figure><p>The above are the most prominent features and advantages of using containers. For more information, please refer to the official Docker documentation: <code>https://www.docker.com/what-container</code>.</p><h3 id="building-container-images-for-react-apps-introduction-to-docker" tabindex="-1"><a class="header-anchor" href="#building-container-images-for-react-apps-introduction-to-docker" aria-hidden="true">#</a> Building Container Images for React Apps (Introduction to Docker)</h3><p>The most basic component of a Docker container is the .dockerfile. The most basic component of the Dockerfile is a container image. We will introduce how to create a container image that meets the application requirements through the following series of instructions.</p><p>Before we start defining the Dockerfile, let&#39;s recall the steps to serve React static files with Nginx:</p><ul><li><p>create static files (npm run build);</p></li><li><p>Start the Nginx server;</p></li><li><p>Copy the contents of the build folder of the frontend project into the nginx/html directory.</p></li></ul><p>In the next section, you&#39;ll notice that creating a container is very similar to building React natively.</p><h3 id="define-the-dockerfile-for-the-frontend" tabindex="-1"><a class="header-anchor" href="#define-the-dockerfile-for-the-frontend" aria-hidden="true">#</a> Define the Dockerfile for the frontend</h3><p>There are only two steps to build the front-end Dockerfile. This is because the Nginx team provides us with a basic Nginx image that we can leverage out of the box. The two steps are as follows:</p><ul><li><p>Boot the base Nginx image;</p></li><li><p>Copy the sa-frontend/build directory into the container&#39;s nginx/html.</p></li></ul><p>The converted Dockerfile looks like this:</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> nginx</span>
<span class="token instruction"><span class="token keyword">COPY</span> build /usr/share/nginx/html</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Surprised? This file is readable and we can generalize it as:</p><p>Start with the Nginx image (whatever is inside). Copy the build directory into the nginx/html directory of the image. Then just fine!</p><p>You may be thinking, where do I copy the build files from? For example: /usr/share/nginx/html. Very simple: documented in the Nginx image documentation on Docker Hub.</p><h3 id="build-and-push-container" tabindex="-1"><a class="header-anchor" href="#build-and-push-container" aria-hidden="true">#</a> Build and push container</h3><p>Before pushing the image, we need a container registry to host the image. Docker Hub is a free cloud container service that we will use for this demonstration. There are 3 tasks to complete next:</p><ul><li><p>Install Docker CE;</p></li><li><p>Register with Docker Hub;</p></li><li><p>Run the following command in the terminal to log in:</p></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> login <span class="token parameter variable">-u</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$DOCKER_USERNAME</span>&quot;</span> <span class="token parameter variable">-p</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$DOCKER_PASSWORD</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>After doing any of the above, go into the directory sa-frontend. Then run the following command (please replace $DOCKER username with your docker hub username, for example: rinormaloku/sentiment-analysis-frontend).</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-f</span> Dockerfile <span class="token parameter variable">-t</span> <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Now we can remove the -f Dockerfile since we are already in the directory containing the Dockerfile.</p><p>We can push the image using the docker push command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> push <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Please confirm that the image was successfully pushed to the docker hub repository.</p><h3 id="run-the-container" tabindex="-1"><a class="header-anchor" href="#run-the-container" aria-hidden="true">#</a> Run the container</h3><p>Now anyone can grab the image in $DOCKER_USER_ID/sentiment-analysis-frontend and run:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The Docker container is already running!</p><p>Before going to the next step, let&#39;s explain 80:80, which is confusing to many people:</p><ul><li><p>the first 80 is the port number of the host machine (eg: my computer);</p></li><li><p>The second 80 is the port number of the container, requests will be forwarded here.</p></li></ul><figure><img src="/assets/img-20230408171731-QDwNlCQH.png" alt="Figure 9: Port matching from host to container" tabindex="0" loading="lazy"><figcaption>Figure 9: Port matching from host to container</figcaption></figure><p>This is matched from <code>&lt;host port&gt;</code> to <code>&lt;container port&gt;</code>. That is to say, every request sent to port 80 of the host will be matched to port 80 of the container, as shown in Figure 9.</p><p>Because the port running on port 80 on the host machine (your computer) can access localhost:80. If Docker is not supported locally, then you can open the application on <code>&lt;docker machine ip&gt;:80</code>. Run the docker-machine ip command to find the IP of the Docker machine.</p><p>try it! You should now have access to your React application.</p><h3 id="dockerignore-file" tabindex="-1"><a class="header-anchor" href="#dockerignore-file" aria-hidden="true">#</a> Dockerignore file</h3><p>Just now we saw that building the image of SA-Frontend is very slow, sorry, it should be super slow. This is because we have to send the environment files during the build to the Docker service. More specifically, the environment file in the build process refers to all the data in the Dockerfile directory that will be used when building the image.</p><p>In our example, the SA-Frontend file includes the following folders:</p><div class="language-folder line-numbers-mode" data-ext="folder"><pre class="language-folder"><code>sa-frontend:
|.dockerignore
| Dockerfile
| package.json
| README.md
+---build
+---node_modules
+---public
\---src
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But we only need the build folder. Uploading other files would be a waste of time. We can save time by deleting other directories. This requires the use of .dockerignore. You may think this is very similar to .gitignore, for example, you can add all directories you want to ignore to .dockerignore, like this:</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>node_modules
src
public
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This .dockerignore file should be in the same folder as the Dockerfile. Creating an image file now only takes a few seconds.</p><p>Let&#39;s move on to the Java application.</p><h3 id="building-a-container-image-for-a-java-application" tabindex="-1"><a class="header-anchor" href="#building-a-container-image-for-a-java-application" aria-hidden="true">#</a> Building a container image for a Java application</h3><p>do you know? You&#39;ve pretty much learned all there is to know about creating container images! That&#39;s why this subsection is so short.</p><p>Open the Dockerfile in sa-webapp and you will see only two new keywords:</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>ENV SA_LOGIC_API_URL http://localhost:5000
…
EXPOSE 8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The keyword ENV declares environment variables inside a Docker container. This allows us to provide the sentiment analysis API URL when starting the container.</p><p>Also, the keyword EXPOSE provides a port for us to access later. But wait, we didn&#39;t do this step in SA-Frontend, quite rightly so! This port is for documentation only, in other words this port is used to provide information to someone reading the Dockerfile.</p><p>You should have mastered creating and pushing container images. If you encounter any difficulties, you can read the <a href="http://README.md" target="_blank" rel="noopener noreferrer">README.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> file in sa-webapp.</p><h3 id="create-a-container-image-for-a-python-application" tabindex="-1"><a class="header-anchor" href="#create-a-container-image-for-a-python-application" aria-hidden="true">#</a> Create a container image for a Python application</h3><p>There are no new keywords in the Dockerfile for sa-logic. You are now a Docker guru.</p><p>For how to build and push container images, please read the <a href="http://README.md" target="_blank" rel="noopener noreferrer">README.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> file in the sa-logic directory.</p><h2 id="test-the-containerized-application" tabindex="-1"><a class="header-anchor" href="#test-the-containerized-application" aria-hidden="true">#</a> Test the containerized application</h2><p>Can you trust something that hasn&#39;t been tested? I don&#39;t believe it either. So let&#39;s test these containers.</p><p>1.Run the sa-logic container and configure the listening port 5050:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">5050</span>:5000 <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-logic
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.Run the sa-webapp container and configure the listening port 8080 (because we changed the listening port of the Python application, we need to rewrite the environment variable SA_LOGIC_API_URL):</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token parameter variable">-e</span> <span class="token assign-left variable">SA_LOGIC_API_URL</span><span class="token operator">=</span><span class="token string">&#39;http://&lt;container_ip or docker machine ip&gt;:5000&#39;</span> <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-web-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3.Run the sa-frontend container:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Then it will work. Open localhost:80 in your browser.</p><p>Please note: If you change the port of sa-webapp, or use the IP of the docker machine, then you need to update App.js in sa-frontend to let analyzeSentence get the URL from the new IP or port. Then you need to build and use the updated image.</p><figure><img src="/assets/img-20230408172325-yGCYnEtS.png" alt="Figure 10: Running microservices in containers" tabindex="0" loading="lazy"><figcaption>Figure 10: Running microservices in containers</figcaption></figure><h3 id="trivia-questions-why-kubernetes" tabindex="-1"><a class="header-anchor" href="#trivia-questions-why-kubernetes" aria-hidden="true">#</a> Trivia Questions - Why Kubernetes?</h3><p>In this section, we learned about the Dockerfile, how to use it to create an image, and the commands to push the image to the Docker registry directory. Additionally, we explored how to reduce the build environment files that need to be sent by ignoring unused files. Finally we ran the application from the container.</p><p>Next, we introduce why use Kubernetes? We&#39;ll be covering Kubernetes in depth below, and here I want to leave you with a quiz.</p><p>If our sentiment analysis web application is done well, and suddenly the traffic soars to millions of requests per minute, then our sa-webapp and sa-logic will face huge load pressure. How can we scale up the container, please?</p><h2 id="introduction-to-kubernetes" tabindex="-1"><a class="header-anchor" href="#introduction-to-kubernetes" aria-hidden="true">#</a> Introduction to Kubernetes</h2><p>I assure you I am not exaggerating, after reading this you will be asking &quot;why don&#39;t we call it Supernetes?&quot;</p><figure><img src="/assets/img-20230408175432-Lx7JdE9H.png" alt="Figure 11: Supernetes" tabindex="0" loading="lazy"><figcaption>Figure 11: Supernetes</figcaption></figure><h3 id="what-is-kubernetes" tabindex="-1"><a class="header-anchor" href="#what-is-kubernetes" aria-hidden="true">#</a> What is Kubernetes?</h3><p>After starting the microservice from the container, we have a problem, let us describe this problem in the form of the following question and answer:</p><blockquote><p>Q: How do we expand or shrink the container?<br> Answer: We start another container.<br> Q: How do we share the load among containers? If the current server is maxed out, do we need another server? How can we maximize hardware usage?<br> A: Uh...uh... (Let me search)<br> Q: If the update patch is applied, all services will not be affected? If something goes wrong with the service, how do I go back to a version that was working before?</p></blockquote><p>Kubernetes can solve all of the above problems (and more!). I can sum up Kubernetes in one sentence: &quot;Kubernetes is a container control platform that can abstract all the underlying infrastructure (the infrastructure used by containers to run).&quot;</p><p>We have a vague idea of a container control platform. Later in this article, we&#39;ll look at this in action, but this is the first time we&#39;ve mentioned &quot;abstraction of the underlying infrastructure&quot;, so let&#39;s take a closer look at the concept.</p><h3 id="abstraction-of-underlying-infrastructure" tabindex="-1"><a class="header-anchor" href="#abstraction-of-underlying-infrastructure" aria-hidden="true">#</a> Abstraction of underlying infrastructure</h3><p>Kubernetes provides an abstraction of the underlying infrastructure through a simple API that we can send requests to. These requests allow Kubernetes to handle them to the best of its ability. For example, you can simply ask &quot;Kubernetes add 4 containers for image x.&quot; Kubernetes will then figure out which nodes are in use and add the new containers there (as shown in Figure 12).</p><figure><img src="/assets/img-20230408175545-nEYAkD4O.png" alt="Figure 12: Send request to API" tabindex="0" loading="lazy"><figcaption>Figure 12: Send request to API</figcaption></figure><p>What does this mean for developers? Meaning developers don&#39;t need to care about the number of nodes, where they run their containers from and how they talk to them. Developers don&#39;t need to manage hardware optimizations, or worry about node shutdowns (they will follow Murphy&#39;s Law), as new nodes are added to the Kubernetes cluster. At the same time Kubernetes will add containers to other running nodes. Kubernetes will play the biggest role.</p><p>In Figure 2 we see something new:</p><ul><li><p>API server: the only way to interact with the cluster. Responsible for starting or stopping another container, or checking current status, logs, etc.;</p></li><li><p>Kubelet: monitors the containers in the node and communicates with the master node;</p></li><li><p>Pod: In the initial stage, we can regard pod as a container.</p></li></ul><p>That&#39;s all for the introduction, and the in-depth introduction will distract us, we can wait until a little later, there are some useful resources, such as official documents, or read the book &quot;Kubernetes in Action&quot; by Marko Lukša, and Sébastien Goasguen &amp; Michael The Kubernetes Cookbook by Hausenblas.</p><h3 id="standardized-cloud-service-provider" tabindex="-1"><a class="header-anchor" href="#standardized-cloud-service-provider" aria-hidden="true">#</a> Standardized cloud service provider</h3><p>Another popular point of Kubernetes is that it standardizes cloud service providers. This is a very bold declaration. Let&#39;s take a look at it through the following examples:</p><p>For example, there is an expert in Azure, Google Cloud Platform, or another cloud service provider who takes on a project built on a brand new cloud service provider. This may cause many consequences, for example: he may not be able to meet the deadline; the company may need to recruit more relevant personnel, and so on.</p><p>In contrast, Kubernetes does not have this problem. Because no matter which cloud service provider, you can run the same command on it. You can send requests to the API server in the established way. Kubernetes will be responsible for abstracting and implementing this cloud service provider.</p><p>Stop for a second and think about it, this is an extremely powerful feature. For companies, this means they don&#39;t need to be tied to a single cloud provider. They can calculate the cost of other cloud service providers, and then transfer to another. They can still keep the original experts, keep the original personnel, and they can spend less money.</p><p>Having said all that, in the next section let&#39;s get to work with Kubernetes in practice.</p><h2 id="kubernetes-practice-pod" tabindex="-1"><a class="header-anchor" href="#kubernetes-practice-pod" aria-hidden="true">#</a> Kubernetes Practice - Pod</h2><p>We built microservices to run on containers, and it was bumpy, but it worked. We also mentioned that this solution is not scalable and elastic, and Kubernetes can solve these problems. In subsequent sections of this article, we will move individual services into containers managed by Kubernetes, as shown in Figure 13.</p><figure><img src="/assets/img-20230408175653-CUeizlws.png" alt="Figure 13: Running microservices in a Kubernetes-managed cluster" tabindex="0" loading="lazy"><figcaption>Figure 13: Running microservices in a Kubernetes-managed cluster</figcaption></figure><p>In this article, we will use Minikube for local debugging, although everything is running in Azure and Google Cloud Platform.</p><h3 id="install-and-start-minikube" tabindex="-1"><a class="header-anchor" href="#install-and-start-minikube" aria-hidden="true">#</a> Install and start Minikube</h3><p>See the official documentation for installing Minikube:</p><blockquote><p><code>https://kubernetes.io/docs/tasks/tools/install-minikube/</code></p></blockquote><p>When installing Minikube, you can piggyback install Kubectl. Kubectl is the client that sends requests to the Kubernetes API server.</p><p>You can start Minikube by running the minikube start command. After starting, run the kubectl get nodes command to get the following results:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get nodes
NAME STATUS ROLES AGE VERSION
minikube Ready <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span> 11m v1.9.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The Kubernetes cluster provided to us by Minikube has only one node, but remember that we don&#39;t care how many nodes there are, Kubernetes will take care of the abstraction, and it is not important for us to have a deep understanding of Kubernetes.</p><p>In the next section, we&#39;ll introduce Kubernetes&#39; first resource: Pods.</p><h3 id="pods" tabindex="-1"><a class="header-anchor" href="#pods" aria-hidden="true">#</a> Pods</h3><p>I love containers, and I&#39;m sure by now you love them too. So why does Kubernetes give us the Pod, the smallest deployable computing unit? What are pods for? Pods consisting of one or a group of containers can share the same runtime environment.</p><p>But do we really need to run two containers inside a Pod? Uh... Normally, only one container will run, and that&#39;s the case in our case. But in some cases, for example, two containers need to share volumes, or they communicate through cross-process communication, or they are bound together, then Pod can be used. Another feature of Pod is that if we want to use other technologies such as Rke, we can do it without relying on Docker containers.</p><figure><img src="/assets/img-20230408175841-bo_l_DBt.png" alt="Figure 14: Pod Properties" tabindex="0" loading="lazy"><figcaption>Figure 14: Pod Properties</figcaption></figure><p>In general, the main attributes of a Pod include (as shown in Figure 14):</p><ul><li><p>Each Pod can have a unique IP address within the Kubernetes cluster;</p></li><li><p>Pods can have multiple containers. These containers share the same port space, so they can communicate through localhost (it is conceivable that they cannot use the same port), and the communication with containers in other Pods can be done by combining the Pod&#39;s IP;</p></li><li><p>Containers in a Pod share the same volume, same IP, port space, and IPC namespace.</p></li></ul><p>Note: Containers have their own independent file system, although they can share data through Kubernetes resource volumes.</p><p>For more details, please refer to the relevant official documents:</p><blockquote><p><code>https://kubernetes.io/docs/concepts/workloads/pods/pod/</code></p></blockquote><h3 id="pod-definition" tabindex="-1"><a class="header-anchor" href="#pod-definition" aria-hidden="true">#</a> Pod definition</h3><p>The following is the manifest file of our first pod sa-frontend, and we will explain the contents of the file one by one.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: v1
kind: Pod <span class="token comment"># 1</span>
metadata:
   name: sa-frontend <span class="token comment"># 2</span>
spec: <span class="token comment">#3</span>
   containers:
     - image: rinormaloku/sentiment-analysis-frontend <span class="token comment"># 4</span>
       name: sa-frontend <span class="token comment"># 5</span>
       ports:
         - containerPort: <span class="token number">80</span> <span class="token comment"># 6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1 kind: Specifies the type of Kubernetes resource we want to create. Here are Pods.<br> #2 name: Define the name of the resource. We named it sa-frontend here.<br> #3 spec: This object defines the state that the resource should have. The most important property in a Pod Spec is the array of containers.<br> #4 image: refers to the image of the container we want to start in this Pod.<br> #5 name: The unique name of the container in the Pod.<br> #6 containerPort: refers to the port number that the container listens to. This is for documentation information only (access is not affected even without this port).</p></blockquote><h3 id="create-a-pod-for-sa-frontend" tabindex="-1"><a class="header-anchor" href="#create-a-pod-for-sa-frontend" aria-hidden="true">#</a> Create a Pod for SA Frontend</h3><p>You can find the above Pod definitions in resource-manifests/sa-frontend-pod.yaml. You can enter this folder in the terminal, or enter the full path on the command line. Then execute the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> sa-frontend-pod.yaml
pod <span class="token string">&quot;sa-frontend&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Pods can be confirmed with the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods
NAME READY STATUS RESTARTS AGE
sa-frontend <span class="token number">1</span>/1 Running <span class="token number">0</span> 7s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If the Pod is still in the state of container generation, you can add the parameter --watch when running the command. When the Pod enters the running state, the terminal will display information.</p><h3 id="accessing-the-application-externally" tabindex="-1"><a class="header-anchor" href="#accessing-the-application-externally" aria-hidden="true">#</a> Accessing the application externally</h3><p>In order to access the application from the outside, we need to create a Kubernetes resource of the service type. We will explain the specific content in the following chapters. Although it is more appropriate to support external access through the resource of the service type, here for quick debugging, we also have Another way is to forward the port:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl port-forward sa-frontend-pod <span class="token number">88</span>:80
Forwarding from <span class="token number">127.0</span>.0.1:88 -<span class="token operator">&gt;</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Visit 127.0.0.1:88 in your browser to open the React application.</p><h3 id="the-wrong-way-to-scale" tabindex="-1"><a class="header-anchor" href="#the-wrong-way-to-scale" aria-hidden="true">#</a> The Wrong Way to Scale</h3><p>We said that one of the main features of Kubernetes is scalability, to prove it, let&#39;s run another pod. We create another Pod resource with the following definition:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: v1
kind: Pod
metadata:
   name: sa-frontend2 <span class="token comment"># The only change</span>
spec:
   containers:
     - image: rinormaloku/sentiment-analysis-frontend
       name: sa-frontend
       ports:
         - containerPort: <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, create a new Pod with the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> sa-frontend-pod2.yaml
pod <span class="token string">&quot;sa-frontend2&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The second Pod can be confirmed with the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods
NAME READY STATUS RESTARTS AGE
sa-frontend <span class="token number">1</span>/1 Running <span class="token number">0</span> 7s
sa-frontend2 <span class="token number">1</span>/1 Running <span class="token number">0</span> 7s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We now have two Pods running.</p><p>Please note: this is not a final solution, there are many flaws. We&#39;ll improve on this solution in the Deployment of another Kubernetes resource section.</p><h3 id="summary-pods" tabindex="-1"><a class="header-anchor" href="#summary-pods" aria-hidden="true">#</a> Summary Pods</h3><p>The Nginx web server serving static files runs in a different Pod. Now we have two problems:</p><ul><li><p>How do you expose these services to the outside world so that users can access them through URLs?</p></li><li><p>How to balance the load between Pods?</p></li></ul><figure><img src="/assets/img-20230408180201-PNnY4LxP.png" alt="Figure 15: Load balancing between services" tabindex="0" loading="lazy"><figcaption>Figure 15: Load balancing between services</figcaption></figure><p>Kubernetes provides resources of type service. We&#39;ll go into detail in the next section.</p><h2 id="kubernetes-practice-service" tabindex="-1"><a class="header-anchor" href="#kubernetes-practice-service" aria-hidden="true">#</a> Kubernetes Practice - Service</h2><p>A Kubernetes Service resource can serve as an entry point for a group of Pods that provide the same service. This resource is responsible for discovering services and balancing load among Pods, as shown in Figure 16.</p><figure><img src="/assets/img-20230408180225-E92lBZF1.png" alt="Figure 16: Kubernetes service maintenance ID address" tabindex="0" loading="lazy"><figcaption>Figure 16: Kubernetes service maintenance ID address</figcaption></figure><p>Inside the Kubernetes cluster we have Pods that provide different services (frontend, Spring web application and Flask Python application). So the question here is: how does a service know which pod to process? For example: how does it generate a list of endpoints for these Pods?</p><p>This problem can be solved with labels, in two steps:</p><ul><li><p>Label all object Pods handled by the service;</p></li><li><p>Use a selector in the service that defines all object Pods that are labeled.</p></li></ul><p>The following view looks clearer:</p><figure><img src="/assets/img-20230408180249-h3qU3kgv.png" alt="Figure 17: Labeled Pods and their manifest files" tabindex="0" loading="lazy"><figcaption>Figure 17: Labeled Pods and their manifest files</figcaption></figure><p>We can see that the Pods are all labeled &quot;app: sa-frontend&quot;, and the service uses this label to find the target Pod.</p><h3 id="label" tabindex="-1"><a class="header-anchor" href="#label" aria-hidden="true">#</a> Label</h3><p>Labels provide an easy way to manage Kubernetes resources. They are represented by a key-value pair and can be used for all resources. Following the example in Figure 17, modify the manifest file.</p><p>Save the file after making modifications, and apply the changes with the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-frontend-pod.yaml
Warning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply
pod <span class="token string">&quot;sa-frontend&quot;</span> configured
kubectl apply <span class="token parameter variable">-f</span> sa-frontend-pod2.yaml
Warning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply
pod <span class="token string">&quot;sa-frontend2&quot;</span> configured
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We see a warning (when applying, not creating, got it). On the second line we see pods &quot;sa-frontend&quot; and &quot;sa-frontend2&quot; deployed. We can filter the Pods we want to see:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pod <span class="token parameter variable">-l</span> <span class="token assign-left variable">app</span><span class="token operator">=</span>sa-frontend
NAME READY STATUS RESTARTS AGE
sa-frontend <span class="token number">1</span>/1 Running <span class="token number">0</span> 2h
sa-frontend2 <span class="token number">1</span>/1 Running <span class="token number">0</span> 2h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Another way to verify the pods with labels is to add the flag --show-labels to the above command, then all labels of each pod will be displayed in the result.</p><p>very good! The pods are already labeled and we are ready to find them through the service. Let&#39;s define a service of type LoadBalancer as shown in Figure 18.</p><figure><img src="/assets/img-20230408180334-XsSRhL0z.gif" alt="Figure 18: Load balancing with LoadBalancer service" tabindex="0" loading="lazy"><figcaption>Figure 18: Load balancing with LoadBalancer service</figcaption></figure><h3 id="service-definition" tabindex="-1"><a class="header-anchor" href="#service-definition" aria-hidden="true">#</a> Service definition</h3><p>The YAML definition for the LoadBalancer service looks like this:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: v1
kind: Service <span class="token comment"># 1</span>
metadata:
   name: sa-frontend-lb
spec:
   type: LoadBalancer <span class="token comment"># 2</span>
   ports:
   - port: <span class="token number">80</span> <span class="token comment"># 3</span>
     protocol: TCP <span class="token comment"># 4</span>
     targetPort: <span class="token number">80</span> <span class="token comment"># 5</span>
   selector: <span class="token comment"># 6</span>
     app: sa-frontend <span class="token comment"># 7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1 kind: service;<br> #2 type: Specify the type, we choose LoadBalancer because we want to balance the load between Pods;<br> #3 ports: Specify the port for the service to obtain the request;<br> #4 protocol: define communication;<br> #5 targetPort: The incoming request can be forwarded to this port;<br> #6 selector: an object containing the selected pod properties;<br> #7 app: sa-frontend defines which is the target Pod, and only the one with the label &quot;app: sa-frontend&quot; is the target Pod.</p></blockquote><p>Create the service by running the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> service-sa-frontend-lb.yaml
<span class="token function">service</span> <span class="token string">&quot;sa-frontend-lb&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The status of the service can be checked by running the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get svc
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span> AGE
sa-frontend-lb LoadBalancer <span class="token number">10.101</span>.244.40 <span class="token operator">&lt;</span>pending<span class="token operator">&gt;</span> <span class="token number">80</span>:30708/TCP 7m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>External-IP is in pending state (don&#39;t wait any longer, this state will not change). This is because we are using Minikube. If we run on Azure or Google cloud services, then we can get a public IP, then the whole world can access our service.</p><p>Nevertheless, Minikube will not leave us alone, and it provides a very useful local debugging command, as follows:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>minikube <span class="token function">service</span> sa-frontend-lb
Opening kubernetes <span class="token function">service</span> default/sa-frontend-lb <span class="token keyword">in</span> default browser<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>This opens a browser pointing to the service&#39;s IP. When a service receives a request, it forwards the request to one of the Pods (it doesn&#39;t matter which). This abstraction allows us to see and interact with multiple Pods as if they were one, by using services as access points.</p><h3 id="summary-of-services" tabindex="-1"><a class="header-anchor" href="#summary-of-services" aria-hidden="true">#</a> Summary of Services</h3><p>In this section, we introduced labeling resources, using labels as selectors in services, and we also defined and created a LoadBalancer service. This satisfies our need to scale the application (just add new labeled pods) and load balance across pods by using services as access points.</p><h2 id="kubernetes-practice-deployment" tabindex="-1"><a class="header-anchor" href="#kubernetes-practice-deployment" aria-hidden="true">#</a> Kubernetes Practice - Deployment</h2><p>Kubernetes deployments help keep the life of every application the same: change. In addition, only dead applications will remain unchanged, otherwise, new requirements will continue to emerge, and more code will be developed, packaged, and deployed. Every step in the process has the potential to go wrong.</p><p>Deployment resources can automate the process of upgrading an application from one version to another without interrupting service, and if something unexpected happens, it allows us to quickly roll back to the previous version.</p><h3 id="deployment-practice" tabindex="-1"><a class="header-anchor" href="#deployment-practice" aria-hidden="true">#</a> Deployment practice</h3><p>Now we have two pods and one service open with load balancing between them (as shown in Figure 19). We mentioned that existing Pods are far from perfect. Each Pod needs to be managed separately (create, update, delete and monitor their condition). Quick updates and quick rollbacks are simply not possible! This is not OK, deploying Kubernetes resources can solve every problem here.</p><figure><img src="/assets/img-20230408180523-fWQYX97E.png" alt="Figure 19: Status quo" tabindex="0" loading="lazy"><figcaption>Figure 19: Status quo</figcaption></figure><p>Before moving on, let&#39;s restate our goals and give an overview to better understand the definition of a manifest file for deploying resources. What we want is:</p><ul><li><p>two Pods of the image rinormaloku/sentiment-analysis-frontend;</p></li><li><p>Uninterrupted service during deployment;</p></li><li><p>Pods are labeled app: sa-frontend, so we can find individual services via the sa-frontend-lb service.</p></li></ul><p>In the next section, we can reflect these requirements into the definition of a deployment.</p><h3 id="deployment-definition" tabindex="-1"><a class="header-anchor" href="#deployment-definition" aria-hidden="true">#</a> Deployment definition</h3><p>The YAML file defined by the following resources can achieve all the points mentioned above:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>apiVersion: extensions/v1beta1
kind: Deployment <span class="token comment"># 1</span>
metadata:
   name: sa-frontend
spec:
   replicas: <span class="token number">2</span> <span class="token comment"># 2</span>
   minReadySeconds: <span class="token number">15</span>
   strategy:
     type: RollingUpdate <span class="token comment"># 3</span>
     rollingUpdate:
       maxUnavailable: <span class="token number">1</span> <span class="token comment"># 4</span>
       maxSurge: <span class="token number">1</span> <span class="token comment"># 5</span>
   template: <span class="token comment"># 6</span>
     metadata:
       labels:
         app: sa-frontend <span class="token comment"># 7</span>
     spec:
       containers:
         - image: rinormaloku/sentiment-analysis-frontend
           imagePullPolicy: Always <span class="token comment"># 8</span>
           name: sa-frontend
           ports:
             - containerPort: <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>#1 kind: deployment;<br> #2 replicas: It is an attribute of the deployment Spec object, which defines how many Pods we want to run. So it is 2;<br> #3 type: Specify the deployment strategy when upgrading from the current version to the next version. The strategy RollingUpdate here can ensure uninterrupted service during deployment;<br> #4 maxUnavailable: It is an attribute of the RollingUpdate object, which defines the maximum number of pods allowed to stop when upgrading (compared to the desired state). For our deployment, we have 2 replicas, which means that after one Pod stops, we will have another Pod running, so the application can be guaranteed to be accessible;<br> #5 maxSurge: is another property of the RollingUpdate object that defines the maximum number of Pods to add to the deployment (compared to the desired state). For our deployment, this means that when migrating to a new version, we can add a Pod, then we can have 3 Pods at the same time;<br> #6 template: Specifies the template of the Pod, which will be used when deploying to create a new Pod. Chances are this very similar Pod will appeal to you immediately;<br> #7 app: sa-frontend: Pods created according to the template will be labeled with this label;<br> #8 imagePullPolicy: When set to Always, every new deployment will re-fetch the container image.</p></blockquote><p>Frankly, this pile of text confuses me even more, so let&#39;s look at an example:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-frontend-deployment.yaml
deployment <span class="token string">&quot;sa-frontend&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>As usual let&#39;s check if everything went as promised:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods
NAME READY STATUS RESTARTS AGE
sa-frontend <span class="token number">1</span>/1 Running <span class="token number">0</span> 2d
sa-frontend-5d5987746c-ml6m4 <span class="token number">1</span>/1 Running <span class="token number">0</span> 1m
sa-frontend-5d5987746c-mzsgg <span class="token number">1</span>/1 Running <span class="token number">0</span> 1m
sa-frontend2 <span class="token number">1</span>/1 Running <span class="token number">0</span> 2d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now we have 4 running pods, two were created by deployment and two we created manually. Delete one of the manually created Pods with the kubectl delete pod <code>&lt;pod-name&gt;</code> command.</p><p>Exercise: Delete the Pods created by one of the deployments and see what happens. Before reading the explanation below, please think about why.</p><p>Explanation: After deleting a Pod, the deployment notices the current state (only 1 Pod is running) and the desired state (2 Pods are running), so it starts another Pod.</p><p>So what&#39;s the benefit of using deployments other than maintaining the desired state? Let&#39;s look at the benefits first.</p><h3 id="benefit-1-adopt-zero-downtime-deployment-zero-downtime" tabindex="-1"><a class="header-anchor" href="#benefit-1-adopt-zero-downtime-deployment-zero-downtime" aria-hidden="true">#</a> Benefit 1: Adopt zero-downtime deployment (Zero-downtime)</h3><p>The product manager came to us with a new requirement, saying that the customer wanted to add a green button on the front end. After the developer has written the code, they only need to provide us with one of the necessary things, the container image rinormaloku/sentiment-analysis-frontend:green. Then it&#39;s up to us, we need to deploy with zero downtime, is it hard? Let&#39;s try it out!</p><p>Edit the deploy-frontend-pods.yaml file and change the container image to the new image: rinormaloku/sentiment-analysis-frontend:green. Save the changes and run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> deploy-frontend-green-pods.yaml <span class="token parameter variable">--record</span>
deployment <span class="token string">&quot;sa-frontend&quot;</span> configured
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Let&#39;s check the status of the online with the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl rollout status deployment sa-frontend
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.  
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.  
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.  
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.  
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> old replicas are pending termination<span class="token punctuation">..</span>.  
Waiting <span class="token keyword">for</span> rollout to finish: <span class="token number">1</span> of <span class="token number">2</span> updated replicas are available<span class="token punctuation">..</span>.  
deployment <span class="token string">&quot;sa-frontend&quot;</span> successfully rolled out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>From the perspective of deployment, the launch has been successful. The copies are replaced one by one during this process. Means the application is always online. Before continuing, let&#39;s make sure that the update actually worked.</p><h3 id="confirm-deployment" tabindex="-1"><a class="header-anchor" href="#confirm-deployment" aria-hidden="true">#</a> Confirm Deployment</h3><p>Let&#39;s confirm the updated result in the browser. Run the command minikube service sa-frontend-lb that we used before, it will open the browser. We can see that the button SEND has been updated.</p><figure><img src="/assets/img-20230408180753-uYZQSO0Z.png" alt="Figure 20: Green button" tabindex="0" loading="lazy"><figcaption>Figure 20: Green button</figcaption></figure><h3 id="situation-behind-rollingupdate" tabindex="-1"><a class="header-anchor" href="#situation-behind-rollingupdate" aria-hidden="true">#</a> Situation behind &quot;RollingUpdate&quot;</h3><p>After we apply the new deployment, Kubernetes compares the new state with the old one. In our case, the new state requires two Pods of the rinormaloku/sentiment-analysis-frontend:green image. This is different from the current running state, so Kubernetes will perform a RollingUpdate.</p><figure><img src="/assets/img-20230408180814-f-trka_f.png" alt="Figure 21: RollingUpdate replaces Pod" tabindex="0" loading="lazy"><figcaption>Figure 21: RollingUpdate replaces Pod</figcaption></figure><p>The RollingUpdate here will be executed according to the specifications we specified, that is, &quot;maxUnavailable: 1&quot; and &quot;maxSurge: 1&quot;. This means that a deployment needs to terminate a Pod and only a new Pod can be run. This process is repeated until all Pods are replaced (as shown in Figure 21).</p><p>We move on to the second benefit.</p><p>Disclaimer: For the purpose of entertainment, I wrote the following part in the form of a novel.</p><h3 id="benefit-2-roll-back-to-the-previous-state" tabindex="-1"><a class="header-anchor" href="#benefit-2-roll-back-to-the-previous-state" aria-hidden="true">#</a> Benefit 2: Roll back to the previous state</h3><blockquote><p>The product manager comes into the office and says he has a big problem!<br> The product manager yells: &quot;Application in production environment has a critical bug!! Need to rollback to previous version immediately&quot;.<br> You looked at him calmly, without even blinking, you turned to your beloved terminal, and started typing:</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl rollout <span class="token function">history</span> deployment sa-frontend
deployments <span class="token string">&quot;sa-frontend&quot;</span>
REVISION CHANGE-CAUSE
<span class="token number">1</span> <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
<span class="token number">2</span> kubectl.exe apply <span class="token parameter variable">--filename</span><span class="token operator">=</span>sa-frontend-deployment-green.yaml <span class="token parameter variable">--record</span><span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>You take a look at the previous deployment and ask the product manager: &quot;The last version had a lot of bugs, so did the previous version work flawlessly?&quot;<br> The product manager yelled: &quot;Yeah, didn&#39;t you hear me?!&quot;<br> You ignore him, you know what to do, so you start typing:</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl rollout undo deployment sa-frontend --to-revision<span class="token operator">=</span><span class="token number">1</span>
deployment <span class="token string">&quot;sa-frontend&quot;</span> rolled back
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Then, you lightly refresh the page, and all previous changes are gone!<br> The product manager looks at you dumbfounded.<br> You saved everyone!<br> end</p></blockquote><p>I know...it&#39;s a boring story. Before Kubernetes, the story was good, more dramatic, high tension, and it stayed that way for a long time. The old days are still good!</p><p>Most commands come with their own instructions, but there are some details that you need to figure out yourself. Why is the value of field CHANGE-CAUSE in the first version <code>&lt;none&gt;</code>, while in the second revision, the value of CHANGE-CAUSE is &quot;kubectl.exe apply –filename=sa-frontend-deployment-green. yaml --record=true&quot;.</p><p>You should be able to spot this because we used the flag --record when applying the new image.</p><p>In the next section, we will use all the previous concepts to complete the entire architecture.</p><h2 id="kubernetes-and-everything-else-in-action" tabindex="-1"><a class="header-anchor" href="#kubernetes-and-everything-else-in-action" aria-hidden="true">#</a> Kubernetes and everything else in action</h2><p>Now we have learned all the necessary resources to complete the architecture, so this section will be very fast. The gray areas in Figure 22 are things that need to be done. Let&#39;s start from the bottom: deploy sa-logic&#39;s deployment.</p><figure><img src="/assets/img-20230408181042-lAZfiLzj.png" alt="Figure 22: Current application state" tabindex="0" loading="lazy"><figcaption>Figure 22: Current application state</figcaption></figure><h3 id="deploy-sa-logic" tabindex="-1"><a class="header-anchor" href="#deploy-sa-logic" aria-hidden="true">#</a> Deploy SA-Logic</h3><p>Enter the directory where the resource manifest file is located in the terminal, and then run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-logic-deployment.yaml <span class="token parameter variable">--record</span>
deployment <span class="token string">&quot;sa-logic&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The deployment of SA-Logic creates three Pods (on which our Python application is running). The command also labels the Pod app: sa-logic . With this label, we can use selectors from the SA-Logic service to select these Pods. Please take a moment to open sa-logic-deployment.yaml and review its contents.</p><p>The concepts are the same here, so we can move on to the next resource: the SA-Logic service.</p><h3 id="sa-logic-service" tabindex="-1"><a class="header-anchor" href="#sa-logic-service" aria-hidden="true">#</a> SA Logic Service</h3><p>First, let&#39;s explain why this service is needed. Our Java application (running in a Pod deployed by SA-WebApp) relies on the sentiment analysis provided by the Python application. But now, unlike when we were running everything locally, we don&#39;t have a single Python application listening to a port, we only have two Pods, and we can have more if needed.</p><p>That&#39;s why a &quot;service&quot; is needed to provide access to a group of pods that provide the same functionality. That is, we can use the SA-Logic service as an access point for all SA-Logic Pods.</p><p>Run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> service-sa-logic.yaml
<span class="token function">service</span> <span class="token string">&quot;sa-logic&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Updated application status: Now we have two pods running (containing the Python application) and the SA-Logic service provides access that will be used in the SA-WebApp&#39;s pod.</p><figure><img src="/assets/img-20230408181144-Q6Nm1TSi.png" alt="Figure 23: Updated app state" tabindex="0" loading="lazy"><figcaption>Figure 23: Updated app state</figcaption></figure><p>Now we need to deploy the SA-WebApp Pod, we need to use the deployment resources.</p><h3 id="sa-webapp-deployment" tabindex="-1"><a class="header-anchor" href="#sa-webapp-deployment" aria-hidden="true">#</a> SA-WebApp deployment</h3><p>We have already learned about deployment, although this deployment will use more features. Open the sa-web-app-deployment.yaml file, and you will find the following new content:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>- image: rinormaloku/sentiment-analysis-web-app
   imagePullPolicy: Always
   name: sa-web-app
   env:
     - name: SA_LOGIC_API_URL
       value: <span class="token string">&quot;http://sa-logic&quot;</span>
   ports:
     - containerPort: <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The first thing we&#39;re interested in is the env property. We guess it defines the environment variable SA_LOGIC_API_URl with the value <code>http://sa-logic</code> inside the Pod. But why initialize it to <code>http://sa-logic</code>, what exactly is <code>sa-logic</code>?</p><p>Let&#39;s introduce kube-dns first.</p><h3 id="kube-dns" tabindex="-1"><a class="header-anchor" href="#kube-dns" aria-hidden="true">#</a> KUBE-DNS</h3><p>Kubernetes has a special Pod called kube-dns. By default, all Pods use it as a DNS server. An important property of kube-dns is that it creates a DNS record for each established access.</p><p>This means that when we create the sa-logic service, it gets an IP address. Its name will be added to kube-dns (along with its IP address). In this way, all Pods can translate sa-logic into the IP address of the SA-Logic service.</p><p>OK, now you can continue:</p><h3 id="sa-webapp-deployment-continued" tabindex="-1"><a class="header-anchor" href="#sa-webapp-deployment-continued" aria-hidden="true">#</a> SA WebApp Deployment (continued)</h3><p>Run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> sa-web-app-deployment.yaml <span class="token parameter variable">--record</span>
deployment <span class="token string">&quot;sa-web-app&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>It&#39;s over. All that remains is to expose the SA-WebApp Pod to the outside world via the LoadBalancer service. The LoadBalancer service provides access to the SA-WebApp Pod so that the React application can send HTTP requests.</p><h3 id="sa-webapp-service" tabindex="-1"><a class="header-anchor" href="#sa-webapp-service" aria-hidden="true">#</a> SA-WebApp Service</h3><p>Open the service-sa-web-app-lb.yaml file, you can see that the content is quite familiar.</p><p>So we can run the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> service-sa-web-app-lb.yaml
<span class="token function">service</span> <span class="token string">&quot;sa-web-app-lb&quot;</span> created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>This completes the architecture. But there is still a little imperfection. After deploying the SA-Frontend Pod, the container image points to the SA-WebApp at <code>http://localhost:8080/sentiment</code>. But now we need to update it to the IP address of the SA-WebApp LoadBalancer (which acts as the access point for the SA-WebApp Pod).</p><p>Fixing that imperfection is a great opportunity to quickly review everything (even better if you can do it on your own without following the guide below). Here we start:</p><ul><li><p>Execute the following command to get the IP of the SA-WebApp LoadBalancer:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>minikube <span class="token function">service</span> list
<span class="token operator">|</span>--------------<span class="token operator">|</span>----------------------<span class="token operator">|</span>------------ -----------------<span class="token operator">|</span>
<span class="token operator">|</span> NAMESPACE <span class="token operator">|</span> NAME <span class="token operator">|</span> URL <span class="token operator">|</span>
<span class="token operator">|</span>--------------<span class="token operator">|</span>----------------------<span class="token operator">|</span>------------ -----------------<span class="token operator">|</span>
<span class="token operator">|</span> default <span class="token operator">|</span> kubernetes <span class="token operator">|</span> No <span class="token function">node</span> port <span class="token operator">|</span>
<span class="token operator">|</span> default <span class="token operator">|</span> sa-frontend-lb <span class="token operator">|</span> http://192.168.99.100:30708 <span class="token operator">|</span>
<span class="token operator">|</span> default <span class="token operator">|</span> sa-logic <span class="token operator">|</span> No <span class="token function">node</span> port <span class="token operator">|</span>
<span class="token operator">|</span> default <span class="token operator">|</span> sa-web-app-lb <span class="token operator">|</span> http://192.168.99.100:31691 <span class="token operator">|</span>
<span class="token operator">|</span> kube-system <span class="token operator">|</span> kube-dns <span class="token operator">|</span> No <span class="token function">node</span> port <span class="token operator">|</span>
<span class="token operator">|</span> kube-system <span class="token operator">|</span> kubernetes-dashboard <span class="token operator">|</span> http://192.168.99.100:30000 <span class="token operator">|</span>
<span class="token operator">|</span>--------------<span class="token operator">|</span>----------------------<span class="token operator">|</span>------------ -----------------<span class="token operator">|</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Use the IP of SA-WebApp LoadBalancer in sa-frontend/src/App.js as follows:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function-name function">analyzeSentence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fetch<span class="token punctuation">(</span><span class="token string">&#39;http://192.168.99.100:31691/sentiment&#39;</span>, <span class="token punctuation">{</span> /* shortened <span class="token keyword">for</span> brevity */<span class="token punctuation">}</span><span class="token punctuation">)</span>
            .then<span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">&gt;</span> response.json<span class="token punctuation">(</span><span class="token punctuation">))</span>
            .then<span class="token punctuation">(</span>data <span class="token operator">=</span><span class="token operator">&gt;</span> this.setState<span class="token punctuation">(</span>data<span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Build static files npm build (need to switch to sa-front-end directory first);</p><p>Build the container image:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-f</span> Dockerfile <span class="token parameter variable">-t</span> <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend:minikube <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Push the image to Docker hub:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> push <span class="token variable">$DOCKER_USER_ID</span>/sentiment-analysis-frontend:minikube
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>edit sa-frontend-deployment.yaml and use the new image;</p></li><li><p>Execute the kubectl apply -f sa-frontend-deployment.yaml command.</p></li></ul><p>Refresh your browser (or minikube service sa-frontend-lb if you closed your browser). Type a sentence and try it out!</p><figure><img src="/assets/img-20230408175653-CUeizlws.png" alt="Kubernetes Service Architecture Diagram" tabindex="0" loading="lazy"><figcaption>Kubernetes Service Architecture Diagram</figcaption></figure><h2 id="full-text-summary" tabindex="-1"><a class="header-anchor" href="#full-text-summary" aria-hidden="true">#</a> Full text summary</h2><p>Kubernetes is good for teams and projects. It simplifies deployment, provides scalability, flexibility, and allows us to use any underlying infrastructure. Let&#39;s call it Supernetes from now on!</p><h3 id="covered-in-this-article" tabindex="-1"><a class="header-anchor" href="#covered-in-this-article" aria-hidden="true">#</a> Covered in this article</h3><ul><li><p>/package/run ReactJS, Java and Python applications;</p></li><li><p>Docker container, how to use Dockerfile to define and build a container;</p></li><li><p>Container registration directory, we use Docker Hub as the code base of the container;</p></li><li><p>Introduces the most important content of Kubernetes;</p></li><li><p>Pods;</p></li><li><p>Serve;</p></li><li><p>deployment;</p></li><li><p>New concepts such as zero downtime deployment;</p></li><li><p>Create scalable applications;</p></li><li><p>In terms of process, we converted the entire microservice application into a Kubernetes cluster.</p></li></ul><p>This article provides you with a solid foundation for you to use in real projects and helps you learn more new concepts more easily.</p><hr><p>The author of this article: Rinor Maloku, translator: Wan Yue, editor in charge: Guo Rui, reprinted for self-study only.<br> Original link: <a href="https://medium.freecodecamp.org/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882" target="_blank" rel="noopener noreferrer">https://medium.freecodecamp.org/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/chcbz/chcbz.github.io/edit/main/demo/theme-docs/src/en/article/2018121710.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: chcbz@sina.com">chcbz</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright © 2024 Mr.Chen </div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-5ZyUDSyM.js" defer></script>
  </body>
</html>
