import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,f as e}from"./app-5ZyUDSyM.js";const t={},p=e(`<p>​​<br> 报错的原因：<br> 在运行的docker容器中 执行命令启动nginx</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node132 ~<span class="token punctuation">]</span><span class="token comment"># docker run -it nginx-1 /bin/bash    </span>
<span class="token punctuation">[</span>root@03e74fb601c1 /<span class="token punctuation">]</span><span class="token comment"># systemctl start nginx    </span>
Failed to get D-Bus connection: Operation not permitted
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果要是用systemctl 管理服务就要加上参数 --privileged 来增加权，并且不能使用默认的bash，换成 init，命令如下</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node132 ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -it --privileged nginx-1 /usr/sbin/init</span>
362306ddc6f03919fcf22854da065d46c5231e8c140e636656c1bbbe497f9b62
<span class="token punctuation">[</span>root@node132 ~<span class="token punctuation">]</span><span class="token comment"># docker ps </span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
362306ddc6f0        nginx-1             <span class="token string">&quot;/usr/sbin/init&quot;</span>    <span class="token number">2</span> seconds ago       Up <span class="token number">1</span> second 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以后台模式运行我再进入到容器里操作</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node132 ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it 3623 /bin/bash</span>
<span class="token punctuation">[</span>root@362306ddc6f0 /<span class="token punctuation">]</span><span class="token comment"># systemctl start nginx</span>
<span class="token punctuation">[</span>root@362306ddc6f0 /<span class="token punctuation">]</span><span class="token comment"># systemctl status nginx</span>
● nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/nginx.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Wed <span class="token number">2019</span>-02-27 <span class="token number">11</span>:43:04 UTC<span class="token punctuation">;</span> 6s ago
  Process: <span class="token number">4221</span> <span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">0</span>/SUCCESS<span class="token punctuation">)</span>
  Process: <span class="token number">4220</span> <span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token parameter variable">-t</span> <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">0</span>/SUCCESS<span class="token punctuation">)</span>
  Process: <span class="token number">4219</span> <span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/usr/bin/rm <span class="token parameter variable">-f</span> /run/nginx.pid <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">0</span>/SUCCESS<span class="token punctuation">)</span>
 Main PID: <span class="token number">4222</span> <span class="token punctuation">(</span>nginx<span class="token punctuation">)</span>
   CGroup: /docker/362306ddc6f03919fcf22854da065d46c5231e8c140e636656c1bbbe497f9b62/system.slice/nginx.service
           ├─4222 nginx: master process /usr/sbin/nginx
           ├─4223 nginx: worker process
           ├─4224 nginx: worker process
           ├─4225 nginx: worker process
           └─4226 nginx: worker process
           ‣ <span class="token number">4222</span> nginx: master process /usr/sbin/nginx

Feb <span class="token number">27</span> <span class="token number">11</span>:43:04 362306ddc6f0 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting The nginx HTTP and reverse proxy server<span class="token punctuation">..</span>.
Feb <span class="token number">27</span> <span class="token number">11</span>:43:04 362306ddc6f0 nginx<span class="token punctuation">[</span><span class="token number">4220</span><span class="token punctuation">]</span>: nginx: the configuration <span class="token function">file</span> /etc/nginx/nginx.conf syntax is ok
Feb <span class="token number">27</span> <span class="token number">11</span>:43:04 362306ddc6f0 nginx<span class="token punctuation">[</span><span class="token number">4220</span><span class="token punctuation">]</span>: nginx: configuration <span class="token function">file</span> /etc/nginx/nginx.conf <span class="token builtin class-name">test</span> is successful
Feb <span class="token number">27</span> <span class="token number">11</span>:43:04 362306ddc6f0 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started The nginx HTTP and reverse proxy server.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>至此问题解决</p>`,7),i=[p];function c(o,l){return s(),a("div",null,i)}const d=n(t,[["render",c],["__file","102695355.html.vue"]]);export{d as default};
