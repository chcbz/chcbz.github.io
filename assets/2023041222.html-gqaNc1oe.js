import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as c,c as i,b as n,d as s,e,f as t}from"./app-5ZyUDSyM.js";const l="/assets/img-20230412230648-WuIu1x0P.png",r="/assets/img-20230412230800-3_ClP-Ep.png",u="/assets/img-20230412231125-O1w5Dtv8.png",d="/assets/img-20230412234907-dEQPQTqx.png",k="/assets/img-20230412235049-zkAEOJxY.png",m="/assets/img-20230412235157-65Bi3m1G.png",h="/assets/img-20230412235310-h0ABwW6Z.png",v="/assets/img-20230413000540-5DIcxUL5.png",g={},b=t('<p>​</p><h2 id="_1-background" tabindex="-1"><a class="header-anchor" href="#_1-background" aria-hidden="true">#</a> 1. Background</h2><h3 id="_1-source" tabindex="-1"><a class="header-anchor" href="#_1-source" aria-hidden="true">#</a> 1. Source</h3><p>Disruptor is a high-performance queue developed by LMAX, a British foreign exchange trading company. The original intention of the research and development is to solve the delay problem of the internal memory queue, rather than the distributed queue. The single thread of the system developed based on Disruptor can support 6 million orders per second. After giving a speech at QCon in 2010, it gained the attention of the industry.</p><h3 id="_2-application-background-and-introduction" tabindex="-1"><a class="header-anchor" href="#_2-application-background-and-introduction" aria-hidden="true">#</a> 2. Application background and introduction</h3><p>According to the current data, the well-known projects using Disruptor include the following: Storm, Camel, Log4j2, and the current Meituan Dianping technical team also has many applications, or some of them borrowed from its design mechanism.<br> Disruptor is a high-performance framework for asynchronous communication between threads, that is, message passing between multiple threads in the same JVM process.</p><h2 id="_2-traditional-queue-problem" tabindex="-1"><a class="header-anchor" href="#_2-traditional-queue-problem" aria-hidden="true">#</a> 2. Traditional queue problem</h2><p>First of all, the queue mentioned here is also limited to the message queue inside Java</p><table><thead><tr><th>Queues</th><th>Boundedness</th><th>Locks</th><th>Structures</th><th>Queue Types</th></tr></thead><tbody><tr><td>ArrayBlockingQueue</td><td>Bounded</td><td>Locked</td><td>Array</td><td>Blocked</td></tr><tr><td>LinkedBlockingQueue</td><td>optional</td><td>locking</td><td>linked list</td><td>blocking</td></tr><tr><td>ConcurrentLinkedQueue</td><td>unbounded</td><td>lock-free</td><td>linked list</td><td>non-blocking</td></tr><tr><td>LinkedTransferQueue</td><td>unbounded</td><td>lock-free</td><td>linked list</td><td>blocking</td></tr><tr><td>PriorityBlockingQueue</td><td>Unbounded</td><td>Locked</td><td>Heap</td><td>Blocked</td></tr><tr><td>DelayQueue</td><td>Unbounded</td><td>Locked</td><td>Heap</td><td>Blocked</td></tr></tbody></table><p>The underlying data structure of the queue is generally divided into three types: array, linked list and heap. Among them, the heap here is to implement a queue with priority characteristics, which is not considered for the time being.<br> In a system with particularly high stability and performance requirements, in order to prevent the producer from being too fast and causing memory overflow, only bounded queues can be selected; at the same time, in order to reduce the impact of Java garbage collection on system performance, array/ Data structure in heap format. After filtering in this way, only ArrayBlockingQueue is the eligible queue. However, ArrayBlockingQueue guarantees thread safety by locking, and ArrayBlockingQueue also has false sharing problems. These two problems seriously affect performance.<br> Among them, we will first introduce the two ways that affect performance: locking and false sharing. The locking method and the non-locking CAS method will not be introduced here. We will first explain the pseudo-sharing problem here.</p><h3 id="_1-false-sharing-concept" tabindex="-1"><a class="header-anchor" href="#_1-false-sharing-concept" aria-hidden="true">#</a> 1. False sharing concept</h3><h4 id="share" tabindex="-1"><a class="header-anchor" href="#share" aria-hidden="true">#</a> share</h4><p>Computers have long supported multi-core, and more and more software supports multi-core operation. In fact, it can also be called multi-processing operation. One processor corresponds to one physical socket. One of the slots corresponds to one L3 Cache, and one slot contains multiple cpus. A cpu includes registers, L1 Cache, and L2 Cache, as shown in the following figure:</p><figure><img src="'+l+'" alt="CPU cache mechanism" tabindex="0" loading="lazy"><figcaption>CPU cache mechanism</figcaption></figure><p>The closer to the cpu, the faster the speed and the smaller the capacity. Among them, L1 and L2 can only be shared by one CPU, but L3 can be shared by CPUs in the same slot, and the main memory can be shared by all CPUs, which is memory sharing.<br> The process of the cpu performing calculations is as follows: first go back to L1 to find the corresponding data, if not, then go to L2, L3, if not, then go to the main memory to get it, the longer the road, the longer it will take, The performance will be lower.<br> It should be noted that when sharing data between threads, the data needs to be written back to the main memory, and another thread obtains new data by accessing the main memory.<br> Some people will ask, will there be some non-main memory caches shared between multiple threads, then will another thread directly access the memory before modification? The answer is yes, but one thing is that we can set the cache invalidation strategy for this kind of data to ensure that the cache is up-to-date. This instruction is to prohibit the reordering of the cpu. The data before the barrier cannot appear after the barrier, and the processing after the barrier cannot appear before the barrier, that is, the data obtained after the barrier is the latest). Corresponding to the application level is a keyword volatile, There will be some introductions below.</p><h4 id="cache-line" tabindex="-1"><a class="header-anchor" href="#cache-line" aria-hidden="true">#</a> cache line</h4><p>The cache invalidation just mentioned actually refers to the invalidation of the Cache line, that is, the cache line. The Cache is composed of many Cache lines, and the size of each cache line is 32~128 bytes (usually 64 bytes). We assume here that the cache line is 64 bytes, and a Java Long type is 8 bytes. In this case, a cache line can store 8 Long type variables, as shown in the following figure:</p><figure><img src="'+r+'" alt="Structure diagram of a cache line corresponding to a cache" tabindex="0" loading="lazy"><figcaption>Structure diagram of a cache line corresponding to a cache</figcaption></figure><p>Every time the CPU fetches data from main memory, it stores adjacent data into the same cache line. Assuming that when we access an array corresponding to a Long memory, if one of them is loaded into the memory, then the corresponding next 7 data will also be loaded into the corresponding cache line, so that the data will be accessed very quickly.</p><h4 id="pseudo-sharing" tabindex="-1"><a class="header-anchor" href="#pseudo-sharing" aria-hidden="true">#</a> Pseudo-Sharing</h4><p>Just now we said that the invalidation of the cache is actually the invalidation of the cache line. What is the principle of the invalidation of the cache line? This also involves a MESI protocol (cache consistency protocol). We will not introduce this here. We only need to know that this will be in a When the data in the cache changes, all other caches (actually cache lines) that store the cache will be invalidated. If you are interested, you can read the appendix. First, let’s use the very classic diagram in Disruptor to explain pseudo-sharing. :</p><figure><img src="'+u+`" alt="False sharing" tabindex="0" loading="lazy"><figcaption>False sharing</figcaption></figure><p>The figure above shows a slot with multiple cpus inside. If the thread on cpu1 updates the variable X, according to the MESI protocol, all the cache lines corresponding to the variable X will be invalidated (note: although the change is X, But X and Y are put into the same cache line, and they are invalid together), at this time, if the thread in cpu2 reads the variable Y and finds that the cache line is invalid, it will search up according to the cache search strategy if it wants to get Y. During this period, the thread corresponding to cpu1 does not access X after updating X (that is, the cache line is not refreshed), and the thread of cpu2 can only obtain data from the main memory, which will have a great impact on performance. This is false sharing.<br> On the surface, both X and Y are operated by independent threads, and there is no relationship between the two operations. It&#39;s just that they share a cache line, but all contention conflicts come from sharing.</p><h3 id="_2-the-false-sharing-problem-of-arrayblockingqueue" tabindex="-1"><a class="header-anchor" href="#_2-the-false-sharing-problem-of-arrayblockingqueue" aria-hidden="true">#</a> 2. The false sharing problem of ArrayBlockingQueue</h3><p>We have just talked about the problem of false sharing, so where does the false sharing problem of ArrayBlockingQueue exist? Let’s analyze some of the core source code</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
     <span class="token function">checkNotNull</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span> lock<span class="token punctuation">;</span>
     <span class="token comment">// Get the current object lock</span>
     lock<span class="token punctuation">.</span> <span class="token function">lockInterruptibly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> items<span class="token punctuation">.</span> length<span class="token punctuation">)</span>
             <span class="token comment">//Block and release the lock, waiting for notFull.signal() notification</span>
             notFull<span class="token punctuation">.</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// put data into array</span>
         <span class="token function">enqueue</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
         lock<span class="token punctuation">.</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token class-name">E</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">;</span>
     <span class="token comment">//putIndex is the subscript of the queue</span>
     items<span class="token punctuation">[</span>putIndex<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>putIndex <span class="token operator">==</span> items<span class="token punctuation">.</span> length<span class="token punctuation">)</span>
         putIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
     count<span class="token operator">++</span><span class="token punctuation">;</span>
     notEmpty<span class="token punctuation">.</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
     <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span> lock<span class="token punctuation">;</span>
     <span class="token comment">// lock</span>
     lock<span class="token punctuation">.</span> <span class="token function">lockInterruptibly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
             <span class="token comment">//Block and release the object lock, and wait for notEmpty.signal() notification</span>
             notEmpty<span class="token punctuation">.</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//if the data is not empty</span>
         <span class="token keyword">return</span> <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
         lock<span class="token punctuation">.</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">;</span>
     <span class="token comment">//takeIndex is the subscript of the queue</span>
     <span class="token class-name">E</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> items<span class="token punctuation">[</span>takeIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
     items<span class="token punctuation">[</span>takeIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>takeIndex <span class="token operator">==</span> items<span class="token punctuation">.</span> length<span class="token punctuation">)</span>
         takeIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
     count<span class="token operator">--</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>itrs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
         itrs<span class="token punctuation">.</span> <span class="token function">elementDequeued</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     notFull<span class="token punctuation">.</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The three core member variables are</p><ul><li><strong>putIndex</strong>: Enter the subscript</li><li><strong>takeIndex</strong>: Subscript out of the team</li><li><strong>count</strong>: the number of elements in the queue</li></ul><p>And the positions of the three members are as follows:</p><figure><img src="`+d+'" alt="ArrayBlockingQueue" tabindex="0" loading="lazy"><figcaption>ArrayBlockingQueue</figcaption></figure><p>These three variables are easy to put in the same cache line. For this reason, a false sharing detection tool is specially used for detection. At present, the only tool for detecting false sharing is Intel&#39;s Intel Vtune. It has just been found that there is a mac os version, but after testing, it is found that This tool cannot analyze the processor configuration of macOs. When using it, I found the following error &quot;Unable to detect the supported processor configuration&quot;. This can be left to other students. For the installation and use of the tool, you can check another link in the appendix .</p><h2 id="three-high-performance-principle" tabindex="-1"><a class="header-anchor" href="#three-high-performance-principle" aria-hidden="true">#</a> Three, high performance principle</h2><p>I just talked about the two performance problems of the above queue: one is locking and the other is false sharing, so how does the disruptor solve these two problems, and besides solving these two problems, what other advanced things have been introduced? performance-enhancing.<br> Here is a brief list:</p><ul><li><strong>Introduce a circular array structure</strong>: Array elements will not be recycled, avoiding frequent GC,</li><li><strong>Lock-free design</strong>: CAS lock-free method is adopted to ensure the safety of threads</li><li><strong>Attribute padding</strong>: By adding extra useless information, avoid false sharing problems</li><li><strong>Element Position Positioning</strong>: Use the same method as consistent hashing, an index, for self-increment</li></ul><h3 id="_1-ring-array-structure" tabindex="-1"><a class="header-anchor" href="#_1-ring-array-structure" aria-hidden="true">#</a> 1. Ring array structure</h3><p>The ring array structure is the core of the entire Disruptor.<br> First of all, because it is an array, it is faster than a linked list, and according to our explanation of the above cache line, we know that when an element in the array is loaded, the adjacent array elements will also be preloaded, so in such a structure, the CPU does not need From time to time, go to main memory to load the next element in the array. Moreover, you can pre-allocate memory for the array, so that the array object will always exist (unless the program terminates). This means that there is no need to spend a lot of time on garbage collection. In addition, unlike a linked list, a node object needs to be created for each object added to it—correspondingly, when a node is deleted, a corresponding memory cleanup operation needs to be performed. The elements in the ring array are overwritten to avoid jvm GC.<br> Secondly, the structure is a ring, and the size of the array is 2 to the nth power, so that element positioning can be done more efficiently through bit operations, which is somewhat similar to the ring strategy in consistent hashing. In the disruptor, this awesome ring structure is RingBuffer. Since it is an array, it has a size, and the size must be 2 to the nth power. The structure is as follows:</p><figure><img src="'+k+'" alt="RingBuffer" tabindex="0" loading="lazy"><figcaption>RingBuffer</figcaption></figure><p>Its essence is just an ordinary array, but when the data is placed to fill the queue (that is, reach the 2^n-1 position), and then fill the data, it will start from 0 and overwrite the previous data, so it is equivalent to a ring.</p><h3 id="_2-production-and-consumption-modes" tabindex="-1"><a class="header-anchor" href="#_2-production-and-consumption-modes" aria-hidden="true">#</a> 2. Production and consumption modes</h3><p>According to the above ring structure, let&#39;s analyze the working principle of the Disruptor in detail.<br> Disruptor is not like a traditional queue, which is divided into a queue head pointer and a queue tail pointer, but has only one subscript (seq above), so how does this ensure that the produced messages will not overwrite the unconsumed messages.<br> In Disruptor, producers are divided into single producer and multi-producer, while consumers are not distinguished. In the case of a single producer, ordinary producers place data in the RingBuffer, and consumers obtain the maximum consumable position and consume. When there are multiple producers, there is an additional Buffer of the same size as the RingBuffer, called AvailableBuffer. In multi-producers, each producer first obtains the writable space through CAS competition, and then slowly puts data in it. If consumers want to consume data at this time, then each consumer needs to obtain the maximum available space. Consumption subscript, this subscript is the longest continuous sequence subscript obtained from AvailableBuffer.</p><h4 id="multi-producer-produce" tabindex="-1"><a class="header-anchor" href="#multi-producer-produce" aria-hidden="true">#</a> Multi-producer --produce</h4><p>Assume that two more producers start writing data, and through CAS competition, w1 gets 34 spaces, and w2 gets 78 spaces, of which 6 represents data that has been written or not consumed.</p><figure><img src="'+m+'" alt="Multi-Producer - Production" tabindex="0" loading="lazy"><figcaption>Multi-Producer - Production</figcaption></figure><p>Green represents the data that has been written OK</p><h4 id="multi-producer-consumer" tabindex="-1"><a class="header-anchor" href="#multi-producer-consumer" aria-hidden="true">#</a> Multi-Producer-Consumer</h4><p>Assuming that the three producers are writing and have not set the AvailableBuffer, then the consumption subscript that the consumer can obtain can only obtain 6, and then after the producer writes OK, the consumer is notified, and the consumer continues to repeat the above step. As shown below</p><figure><img src="'+h+'" alt="Multi-producer - consumption" tabindex="0" loading="lazy"><figcaption>Multi-producer - consumption</figcaption></figure><h4 id="common-waits-for-consumers" tabindex="-1"><a class="header-anchor" href="#common-waits-for-consumers" aria-hidden="true">#</a> Common waits for consumers</h4><ul><li><strong>BusySpinWaitStrategy</strong>: Spin wait, similar to the spin lock used by the Linux Kernel. Low latency but at the same time it takes up a lot of CPU resources.</li><li>BlockingWaitStrategy: Use locks and condition variables. The CPU resource usage is small, the delay is large, and the default waiting strategy is used.</li><li><strong>SleepingWaitStrategy</strong>: After several unsuccessful loop attempts, choose to give up the CPU and wait for the next scheduling. If it is still unsuccessful after multiple scheduling, sleep for a nanosecond before trying again. This strategy balances latency and CPU resource usage, but the latency is uneven.</li><li><strong>YieldingWaitStrategy</strong>: After several unsuccessful loop attempts, choose to yield the CPU and wait for the next adjustment. The delay and CPU resource usage are balanced, but the delay is also relatively uniform.</li><li><strong>PhasedBackoffWaitStrategy</strong>: A combination of the above strategies, with less CPU resource usage and greater delay</li></ul><h3 id="_3-awesome-subscript-pointer" tabindex="-1"><a class="header-anchor" href="#_3-awesome-subscript-pointer" aria-hidden="true">#</a> 3. Awesome subscript pointer</h3>',53),f={href:"https://link.jianshu.com/?t=https://github.com/LMAX-Exchange/disruptor/issues/154#event-671348970",target:"_blank",rel:"noopener noreferrer"},y=n("em",null,"24",-1),w=t(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">LhsPadding</span><span class="token punctuation">{</span>
     <span class="token comment">//Complete the cache line to improve the cache hit rate</span>
     <span class="token keyword">protected</span> <span class="token keyword">long</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">,</span> p4<span class="token punctuation">,</span> p5<span class="token punctuation">,</span> p6<span class="token punctuation">,</span> p7<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">LhsPadding</span><span class="token punctuation">{</span>
     <span class="token keyword">protected</span> <span class="token keyword">volatile</span> <span class="token keyword">long</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">RhsPadding</span> <span class="token keyword">extends</span> <span class="token class-name">Value</span><span class="token punctuation">{</span>
     <span class="token comment">//Complete the cache line to improve the cache hit rate</span>
     <span class="token keyword">protected</span> <span class="token keyword">long</span> p9<span class="token punctuation">,</span> p10<span class="token punctuation">,</span> p11<span class="token punctuation">,</span> p12<span class="token punctuation">,</span> p13<span class="token punctuation">,</span> p14<span class="token punctuation">,</span> p15<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sequence</span> <span class="token keyword">extends</span> <span class="token class-name">RhsPadding</span><span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-usage" tabindex="-1"><a class="header-anchor" href="#_4-usage" aria-hidden="true">#</a> 4. Usage</h2><p>The usage is very simple, there are three roles in total: producer, consumer, disruptor object</p><h3 id="_1-simple-usage" tabindex="-1"><a class="header-anchor" href="#_1-simple-usage" aria-hidden="true">#</a> 1. Simple usage</h3><h4 id="disruptor-object" tabindex="-1"><a class="header-anchor" href="#disruptor-object" aria-hidden="true">#</a> disruptor object</h4><p>The disruptor has two construction methods</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Disruptor</span><span class="token punctuation">(</span>
         <span class="token keyword">final</span> <span class="token class-name">EventFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> eventFactory<span class="token punctuation">,</span> <span class="token comment">// data entity construction factory</span>
         <span class="token keyword">final</span> <span class="token keyword">int</span> ringBufferSize<span class="token punctuation">,</span> <span class="token comment">// queue size, must be a power of 2</span>
         <span class="token keyword">final</span> <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">,</span> <span class="token comment">// thread factory</span>
         <span class="token keyword">final</span> <span class="token class-name">ProducerType</span> producerType<span class="token punctuation">,</span> <span class="token comment">// producer type, single producer or multiple</span>
         <span class="token keyword">final</span> <span class="token class-name">WaitStrategy</span> waitStrategy<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// consumer waiting strategy</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">Disruptor</span><span class="token punctuation">(</span>
     <span class="token keyword">final</span> <span class="token class-name">EventFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> eventFactory<span class="token punctuation">,</span>
     <span class="token keyword">final</span> <span class="token keyword">int</span> ringBufferSize<span class="token punctuation">,</span>
     <span class="token keyword">final</span> <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="production-processing" tabindex="-1"><a class="header-anchor" href="#production-processing" aria-hidden="true">#</a> Production Processing</h4><p>The producer has no fixed object here, just needs to get the location where the data is placed, and then publish</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">RingBuffer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MsgEvent</span><span class="token punctuation">&gt;</span></span> ringBuffer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>disruptor<span class="token punctuation">.</span><span class="token function">getRingBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//Get the next position to place data</span>
     <span class="token keyword">long</span> next <span class="token operator">=</span> ringBuffer<span class="token punctuation">.</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token class-name">MsgEvent</span> event <span class="token operator">=</span> ringBuffer<span class="token punctuation">.</span> <span class="token function">get</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
         event<span class="token punctuation">.</span> <span class="token function">setValue</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
         <span class="token comment">//Publish event</span>
         ringBuffer<span class="token punctuation">.</span> <span class="token function">publish</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="consumption-processing" tabindex="-1"><a class="header-anchor" href="#consumption-processing" aria-hidden="true">#</a> Consumption Processing</h4><p>Consumption processing can be as follows</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EventHandlerGroup</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleEventsWith</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">EventHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> handlers<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">EventHandlerGroup</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleEventsWith</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">EventProcessor</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>processors<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">EventHandlerGroup</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleEventsWith</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">EventProcessorFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> eventProcessorFactories<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">EventHandlerGroup</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleEventsWithWorkerPool</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">WorkHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> workHandlers<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="simple-use-case" tabindex="-1"><a class="header-anchor" href="#simple-use-case" aria-hidden="true">#</a> Simple use case</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//consumer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgConsumer</span> <span class="token keyword">implements</span> <span class="token class-name">EventHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MsgEvent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
     <span class="token keyword">public</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onEvent</span><span class="token punctuation">(</span><span class="token class-name">MsgEvent</span> msgEvent<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">,</span> <span class="token keyword">boolean</span> b<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&quot; -&gt; received message: &quot;</span><span class="token operator">+</span>msgEvent<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//producer processing</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgProducer</span> <span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Disruptor</span> disruptor<span class="token punctuation">;</span>
     <span class="token keyword">public</span> <span class="token class-name">MsgProducer</span><span class="token punctuation">(</span><span class="token class-name">Disruptor</span> disruptor<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span> disruptor <span class="token operator">=</span> disruptor<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">RingBuffer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MsgEvent</span><span class="token punctuation">&gt;</span></span> ringBuffer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>disruptor<span class="token punctuation">.</span><span class="token function">getRingBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">long</span> next <span class="token operator">=</span> ringBuffer<span class="token punctuation">.</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token class-name">MsgEvent</span> event <span class="token operator">=</span> ringBuffer<span class="token punctuation">.</span> <span class="token function">get</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
             event<span class="token punctuation">.</span> <span class="token function">setValue</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
             ringBuffer<span class="token punctuation">.</span> <span class="token function">publish</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">)</span><span class="token punctuation">{</span>
         dataList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>data <span class="token operator">-&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//trigger test</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DisruptorDemo</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Test</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">Disruptor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MsgEvent</span><span class="token punctuation">&gt;</span></span> disruptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Disruptor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">MsgEvent</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span> <span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">//Define the consumer</span>
         <span class="token class-name">MsgConsumer</span> msg1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">MsgConsumer</span> msg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">MsgConsumer</span> msg3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">//Binding configuration relationship</span>
         disruptor<span class="token punctuation">.</span> <span class="token function">handleEventsWith</span><span class="token punctuation">(</span>msg1<span class="token punctuation">,</span> msg2<span class="token punctuation">,</span> msg3<span class="token punctuation">)</span><span class="token punctuation">;</span>
         disruptor<span class="token punctuation">.</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">// Define the data to send</span>
         <span class="token class-name">MsgProducer</span> msgProducer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgProducer</span><span class="token punctuation">(</span>disruptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
         msgProducer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;nihao&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hah&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output (consumed in no fixed order):</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">1</span> <span class="token operator">-&gt;</span> received message<span class="token operator">:</span> nihao
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> nihao
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Message</span> received<span class="token operator">:</span> hah
<span class="token number">2</span> <span class="token operator">-&gt;</span> received message<span class="token operator">:</span> nihao
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Message</span> received<span class="token operator">:</span> hah
<span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token class-name">Message</span> received<span class="token operator">:</span> hah
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-other-usages" tabindex="-1"><a class="header-anchor" href="#_2-other-usages" aria-hidden="true">#</a> 2. Other usages</h3><p>The above mainly introduces multi-consumption unified consumption, but there are many types in the producer model, as follows, one-to-one, one-to-many, many-to-many, many-to-one</p><figure><img src="`+v+`" alt="Producer model" tabindex="0" loading="lazy"><figcaption>Producer model</figcaption></figure><ol><li>A single producer produces data and a single consumer consumes data, which is generally used in the business logic of background processing.</li><li>A single producer produces data, and multiple consumers consume data (there are two situations: the same message can be consumed by multiple consumers separately. Or multiple consumers form a group, and one consumer consumes one data ).</li><li>Multiple producers produce data, and a single consumer consumes data, which can be used in scenarios such as current limiting or queuing for processing by a single resource.</li><li>Multiple producers produce data separately, and multiple consumers consume data (there are two situations: the same message can be consumed by multiple consumers separately. Or multiple consumers form a group, and one consumer consumes a data).</li></ol><h4 id="producer-configuration" tabindex="-1"><a class="header-anchor" href="#producer-configuration" aria-hidden="true">#</a> Producer configuration</h4><p>Among them, the single-producer mode and multi-producer mode in the production mode are mainly distinguished by an enumeration: ProduceType. It is recommended that multiple producers use the multi-producer mode, and the performance will be better.</p><h4 id="consumer-configuration" tabindex="-1"><a class="header-anchor" href="#consumer-configuration" aria-hidden="true">#</a> Consumer configuration</h4><p>There are two types of consumer models:</p><ul><li><strong>Unified consumption</strong>: Each consumer consumes a piece of data produced by the producer</li><li><strong>Group consumption</strong>: The data produced by each production is only consumed once</li></ul><p>Unified consumption can be used as in the simple usage above. For group consumption, use the function handleEventsWithWorkerPool</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * Group processing handleEventWithWorkerPool
  */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">Disruptor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MsgEvent</span><span class="token punctuation">&gt;</span></span> disruptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Disruptor</span><span class="token punctuation">(</span><span class="token class-name">MsgEvent</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span> <span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     disruptor<span class="token punctuation">.</span> <span class="token function">handleEventsWithWorkerPool</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyWorkHandler</span><span class="token punctuation">(</span><span class="token string">&quot;work1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyWorkHandler</span><span class="token punctuation">(</span><span class="token string">&quot;work2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     disruptor<span class="token punctuation">.</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name">MsgProducer</span> msgProducer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgProducer</span><span class="token punctuation">(</span>disruptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
     msgProducer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>output:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>work1 <span class="token operator">:</span> <span class="token class-name">MsgEvent</span><span class="token punctuation">(</span>value<span class="token operator">=</span>bbb<span class="token punctuation">)</span>
work2 <span class="token operator">:</span> <span class="token class-name">MsgEvent</span><span class="token punctuation">(</span>value<span class="token operator">=</span>aaa<span class="token punctuation">)</span>
work1 <span class="token operator">:</span> <span class="token class-name">MsgEvent</span><span class="token punctuation">(</span>value<span class="token operator">=</span>cc<span class="token punctuation">)</span>
work2 <span class="token operator">:</span> <span class="token class-name">MsgEvent</span><span class="token punctuation">(</span>value<span class="token operator">=</span>dd<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="consumption-order-configuration" tabindex="-1"><a class="header-anchor" href="#consumption-order-configuration" aria-hidden="true">#</a> Consumption order configuration</h4><p>In the consumption configuration, there can be many consumption methods, such as:</p><h5 id="_1-sequential-consumption-of-consumers" tabindex="-1"><a class="header-anchor" href="#_1-sequential-consumption-of-consumers" aria-hidden="true">#</a> 1. Sequential consumption of consumers</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * Test sequential consumption
  * After consumers 1 and 3 consume each message, consumer 2 will continue to consume
  */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">MsgConsumer</span> msg1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">MsgConsumer</span> msg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">MsgConsumer</span> msg3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name">Disruptor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MsgEvent</span><span class="token punctuation">&gt;</span></span> disruptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Disruptor</span><span class="token punctuation">(</span><span class="token class-name">MsgEvent</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span> <span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     disruptor<span class="token punctuation">.</span><span class="token function">handleEventsWith</span><span class="token punctuation">(</span>msg1<span class="token punctuation">,</span> msg3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>msg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
     disruptor<span class="token punctuation">.</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name">MsgProducer</span> msgProducer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgProducer</span><span class="token punctuation">(</span>disruptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
     msgProducer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ccc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ddd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output (inside is according to the consumer order of each message):</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">1</span> <span class="token operator">-&gt;</span> received message<span class="token operator">:</span> aaa
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> aaa
<span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> ccc
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> aaa
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> ccc
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Message</span> received<span class="token operator">:</span> ddd
<span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token class-name">Message</span> received<span class="token operator">:</span> ddd
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> ccc
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Message</span> received<span class="token operator">:</span> ddd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-consumption-is-divided-into-multiple-branches-and-there-is-also-a-problem-of-consumption-order" tabindex="-1"><a class="header-anchor" href="#_2-consumption-is-divided-into-multiple-branches-and-there-is-also-a-problem-of-consumption-order" aria-hidden="true">#</a> 2. Consumption is divided into multiple branches, and there is also a problem of consumption order</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * Test multi-branch consumption
  * Consumer 1 and consumer 3 have a branch line, consumer 2 and consumer 4 have a branch line, after consumer 3 and consumer 4 consume, consumer 5 will continue to consume
  */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">MsgConsumer</span> msg1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">MsgConsumer</span> msg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">MsgConsumer</span> msg3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">MsgConsumer</span> msg4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">MsgConsumer</span> msg5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment">//Branches: consumer 1 and consumer 3</span>
     disruptor<span class="token punctuation">.</span> <span class="token function">handleEventsWith</span><span class="token punctuation">(</span>msg1<span class="token punctuation">,</span> msg3<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//Branches: consumer 2 and consumer 4</span>
     disruptor<span class="token punctuation">.</span> <span class="token function">handleEventsWith</span><span class="token punctuation">(</span>msg2<span class="token punctuation">,</span> msg4<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// After consumer 3 and consumer 4 are executed, point to consumer 5</span>
     disruptor<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>msg3<span class="token punctuation">,</span> msg4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">handleEventsWith</span><span class="token punctuation">(</span>msg5<span class="token punctuation">)</span><span class="token punctuation">;</span>
     disruptor<span class="token punctuation">.</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name">MsgProducer</span> msgProducer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgProducer</span><span class="token punctuation">(</span>disruptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
     msgProducer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ccc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ddd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">1</span> <span class="token operator">-&gt;</span> received message<span class="token operator">:</span> aaa
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> aaa
<span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> aaa
<span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">4</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> aaa
<span class="token number">4</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">5</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> aaa
<span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
<span class="token number">5</span> <span class="token operator">-&gt;</span> <span class="token class-name">Received</span> message<span class="token operator">:</span> bbb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-frequently-asked-questions" tabindex="-1"><a class="header-anchor" href="#_5-frequently-asked-questions" aria-hidden="true">#</a> 5. Frequently Asked Questions</h2><p>Below are some frequently asked questions.</p><p><strong>1. How should the disruptor be used to maximize its effectiveness?</strong></p><p>The disruptor is originally an event-driven design, and its entire architecture is very different from ordinary multi-threading. For example, in one usage, the disruptor is used as business processing with I/O processing in the middle. This method is slower than multi-threading; on the contrary, if the disruptor is used for business processing, nio asynchronous calls are used when I/O is required, and the disruptor consumption is not blocked. After the I/O asynchronous call returns, the follow-up processing will be re-stuffed into the disruptor queue in the callback method. It can be seen that this is a typical event processing architecture, and it can indeed take advantage of time. In addition, ringBuffer&#39;s inherent Several performance optimizations allow the disruptor to play its best role.</p><p><strong>2. What if the buffer is often full?</strong></p><p>One is to increase the size of the buffer, and the other is to solve the problem of the large speed difference between the producer and the consumer from the source, such as trying to divide the producer, or using multiple disruptors to make the load of each disruptor smaller.</p><p><strong>3. When to use disruptor?</strong></p><p>It can be considered if the need for latency is high.</p><h2 id="_6-reference" tabindex="-1"><a class="header-anchor" href="#_6-reference" aria-hidden="true">#</a> 6. Reference</h2>`,48),_=n("br",null,null,-1),x={href:"https://github.com/LMAX-Exchange/disruptor",target:"_blank",rel:"noopener noreferrer"},q=n("br",null,null,-1),j={href:"https://lmax-exchange.github.io/disruptor/",target:"_blank",rel:"noopener noreferrer"},M=n("br",null,null,-1),E=n("br",null,null,-1),C={href:"https://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html",target:"_blank",rel:"noopener noreferrer"},T=n("br",null,null,-1),P=n("br",null,null,-1),B={href:"http://in355hz.iteye.com/blog/1797829",target:"_blank",rel:"noopener noreferrer"},A=n("br",null,null,-1),I=n("br",null,null,-1),L={href:"https://www.cnblogs.com/cyfonly/p/5800758.html",target:"_blank",rel:"noopener noreferrer"},S=n("br",null,null,-1),W=n("br",null,null,-1),z={href:"https://www.jianshu.com/p/71c9bc3bfe1a",target:"_blank",rel:"noopener noreferrer"},R=n("br",null,null,-1),D=n("br",null,null,-1),F={href:"https://www.cnblogs.com/Binhua-Liu/p/5620339.html",target:"_blank",rel:"noopener noreferrer"},U=n("br",null,null,-1),O=n("br",null,null,-1),Q={href:"https://software.intel.com/zh-cn/vtune-amplifier-cookbook-false-sharing",target:"_blank",rel:"noopener noreferrer"},H=n("br",null,null,-1),G=n("br",null,null,-1),V={href:"https://www.jianshu.com/p/71c9bc3bfe1a",target:"_blank",rel:"noopener noreferrer"},X=n("br",null,null,-1),N={href:"http://wiki.jikexueyuan.com/project/disruptor-getting-started/the-framework.html",target:"_blank",rel:"noopener noreferrer"},J=n("br",null,null,-1),Y={href:"https://www.jianshu.com/p/d6375295fad4",target:"_blank",rel:"noopener noreferrer"},K=n("br",null,null,-1),Z={href:"http://colobu.com/2014/12/22/why-is-disruptor-faster-than-ArrayBlockingQueue/",target:"_blank",rel:"noopener noreferrer"},$=n("br",null,null,-1),nn={href:"https://blog.csdn.net/kobejayandy/article/details/18329583",target:"_blank",rel:"noopener noreferrer"},sn=n("br",null,null,-1),an={href:"https://blog.csdn.net/u014313492/article/details/42556341",target:"_blank",rel:"noopener noreferrer"},en=n("br",null,null,-1),tn=n("br",null,null,-1),on={href:"http://in355hz.iteye.com/blog/1797829",target:"_blank",rel:"noopener noreferrer"},pn=n("br",null,null,-1),cn=n("br",null,null,-1),ln={href:"http://www.uml.org.cn/zjjs/2016060310.asp",target:"_blank",rel:"noopener noreferrer"},rn=n("br",null,null,-1),un=n("br",null,null,-1),dn={href:"http://357029540.iteye.com/blog/2395677",target:"_blank",rel:"noopener noreferrer"},kn=n("hr",null,null,-1),mn=n("br",null,null,-1),hn={href:"https://blog.csdn.net/zhouzhenyong/article/details/81303011",target:"_blank",rel:"noopener noreferrer"};function vn(gn,bn){const a=p("ExternalLinkIcon");return c(),i("div",null,[b,n("p",null,[s("The pointer (Sequence) of RingBuffer belongs to a volatile variable, and it is also one of the reasons why we can implement Disruptor without lock operation, and it avoids the false sharing problem by supplementing the cache line. The so-called pointer is to obtain the next writable or readable data by means of continuous self-increment. The data is of Long type, so there is no need to worry about it will explode. Someone has calculated: "),n("a",f,[s("The range of long can reach up to 9223372036854775807, 365"),y,s("60*60 = 31536000 seconds a year, 1W pieces of data are generated per second, and can also be used for 292 years"),e(a)]),s(".")]),w,n("p",null,[s("official git"),_,n("a",x,[s("https://github.com/LMAX-Exchange/disruptor"),e(a)]),q,n("a",j,[s("https://lmax-exchange.github.io/disruptor/"),e(a)]),M,s(" False sharing:"),E,n("a",C,[s("https://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html"),e(a)]),T,s(" memory barrier:"),P,n("a",B,[s("http://in355hz.iteye.com/blog/1797829"),e(a)]),A,s(" MESI (Cache Consistency Protocol)"),I,n("a",L,[s("https://www.cnblogs.com/cyfonly/p/5800758.html"),e(a)]),S,s(" ArrayBlockingQueue false sharing problem"),W,n("a",z,[s("https://www.jianshu.com/p/71c9bc3bfe1a"),e(a)]),R,s(" jdk itself handles false sharing"),D,n("a",F,[s("https://www.cnblogs.com/Binhua-Liu/p/5620339.html"),e(a)]),U,s(" Intel vtune analysis false sharing case"),O,n("a",Q,[s("https://software.intel.com/zh-cn/vtune-amplifier-cookbook-false-sharing"),e(a)]),H,s(" Working principle of RingBuffer"),G,n("a",V,[s("https://www.jianshu.com/p/71c9bc3bfe1a"),e(a)]),X,n("a",N,[s("http://wiki.jikexueyuan.com/project/disruptor-getting-started/the-framework.html"),e(a)]),J,n("a",Y,[s("https://www.jianshu.com/p/d6375295fad4"),e(a)]),K,n("a",Z,[s("http://colobu.com/2014/12/22/why-is-disruptor-faster-than-ArrayBlockingQueue/"),e(a)]),$,n("a",nn,[s("https://blog.csdn.net/kobejayandy/article/details/18329583"),e(a)]),sn,n("a",an,[s("https://blog.csdn.net/u014313492/article/details/42556341"),e(a)]),en,s(" How Disruptors Work"),tn,n("a",on,[s("http://in355hz.iteye.com/blog/1797829"),e(a)]),pn,s(" Various scenarios for queues"),cn,n("a",ln,[s("http://www.uml.org.cn/zjjs/2016060310.asp"),e(a)]),rn,s(" consumption order"),un,n("a",dn,[s("http://357029540.iteye.com/blog/2395677"),e(a)])]),kn,n("p",null,[s('This article is the original article of CSDN blogger "Old Persimmon", and the reprint is only for self-study.'),mn,s(" Original link: "),n("a",hn,[s("https://blog.csdn.net/zhouzhenyong/article/details/81303011"),e(a)])])])}const wn=o(g,[["render",vn],["__file","2023041222.html.vue"]]);export{wn as default};
